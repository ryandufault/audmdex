(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(n){if(n.ep)return;n.ep=!0;const a=i(n);fetch(n.href,a)}})();function makeMap(e){const t=Object.create(null);for(const i of e.split(","))t[i]=1;return i=>i in t}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const i=e.indexOf(t);i>-1&&e.splice(i,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>(isObject(e)||isFunction(e))&&isFunction(e.then)&&isFunction(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return(i=>t[i]||(t[i]=e(i)))},camelizeRE=/-\w/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,t=>t.slice(1).toUpperCase())),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,...t)=>{for(let i=0;i<e.length;i++)e[i](...t)},def=(e,t,i,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:i})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof globalThis<"u"?globalThis:{});function normalizeStyle(e){if(isArray(e)){const t={};for(let i=0;i<e.length;i++){const r=e[i],n=isString(r)?parseStringStyle(r):normalizeStyle(r);if(n)for(const a in n)t[a]=n[a]}return t}else if(isString(e)||isObject(e))return e}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(i=>{if(i){const r=i.split(propertyDelimiterRE);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function normalizeClass(e){let t="";if(isString(e))t=e;else if(isArray(e))for(let i=0;i<e.length;i++){const r=normalizeClass(e[i]);r&&(t+=r+" ")}else if(isObject(e))for(const i in e)e[i]&&(t+=i+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const isRef$1=e=>!!(e&&e.__v_isRef===!0),toDisplayString=e=>isString(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction(e.toString))?isRef$1(e)?toDisplayString(e.value):JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>isRef$1(t)?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((i,[r,n],a)=>(i[stringifySymbol(r,a)+" =>"]=n,i),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()].map(i=>stringifySymbol(i))}:isSymbol(t)?stringifySymbol(t):isObject(t)&&!isArray(t)&&!isPlainObject(t)?String(t):t,stringifySymbol=(e,t="")=>{var i;return isSymbol(e)?`Symbol(${(i=e.description)!=null?i:t})`:e};let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].pause();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,i;if(this.scopes)for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].resume();for(t=0,i=this.effects.length;t<i;t++)this.effects[t].resume()}}run(t){if(this._active){const i=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=i}}}on(){++this._on===1&&(this.prevScope=activeEffectScope,activeEffectScope=this)}off(){this._on>0&&--this._on===0&&(activeEffectScope=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(this.effects.length=0,i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.cleanups.length=0,this.scopes){for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function getCurrentScope(){return activeEffectScope}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const t=activeSub,i=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=t,shouldTrack=i,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)removeSub(t);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(e,t=!1){if(e.flags|=8,t){e.next=batchedComputed,batchedComputed=e;return}e.next=batchedSub,batchedSub=e}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let t=batchedComputed;for(batchedComputed=void 0;t;){const i=t.next;t.next=void 0,t.flags&=-9,t=i}}let e;for(;batchedSub;){let t=batchedSub;for(batchedSub=void 0;t;){const i=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=i}}if(e)throw e}function prepareDeps(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function cleanupDeps(e){let t,i=e.depsTail,r=i;for(;r;){const n=r.prevDep;r.version===-1?(r===i&&(i=n),removeSub(r),removeDep(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=i}function isDirty(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(refreshComputed(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function refreshComputed(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===globalVersion)||(e.globalVersion=globalVersion,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!isDirty(e))))return;e.flags|=2;const t=e.dep,i=activeSub,r=shouldTrack;activeSub=e,shouldTrack=!0;try{prepareDeps(e);const n=e.fn(e._value);(t.version===0||hasChanged(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{activeSub=i,shouldTrack=r,cleanupDeps(e),e.flags&=-3}}function removeSub(e,t=!1){const{dep:i,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),i.subs===e&&(i.subs=r,!r&&i.computed)){i.computed.flags&=-5;for(let a=i.computed.deps;a;a=a.nextDep)removeSub(a,!0)}!t&&!--i.sc&&i.map&&i.map.delete(i.key)}function removeDep(e){const{prevDep:t,nextDep:i}=e;t&&(t.nextDep=i,e.prevDep=void 0),i&&(i.prevDep=t,e.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function cleanupEffect(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const i=activeSub;activeSub=void 0;try{t()}finally{activeSub=i}}}let globalVersion=0;class Link{constructor(t,i){this.sub=t,this.dep=i,this.version=i.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let i=this.activeLink;if(i===void 0||i.sub!==activeSub)i=this.activeLink=new Link(activeSub,this),activeSub.deps?(i.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=i,activeSub.depsTail=i):activeSub.deps=activeSub.depsTail=i,addSub(i);else if(i.version===-1&&(i.version=this.version,i.nextDep)){const r=i.nextDep;r.prevDep=i.prevDep,i.prevDep&&(i.prevDep.nextDep=r),i.prevDep=activeSub.depsTail,i.nextDep=void 0,activeSub.depsTail.nextDep=i,activeSub.depsTail=i,activeSub.deps===i&&(activeSub.deps=r)}return i}trigger(t){this.version++,globalVersion++,this.notify(t)}notify(t){startBatch();try{for(let i=this.subs;i;i=i.prevSub)i.sub.notify()&&i.sub.dep.notify()}finally{endBatch()}}}function addSub(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)addSub(r)}const i=e.dep.subs;i!==e&&(e.prevSub=i,i&&(i.nextSub=e)),e.dep.subs=e}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(e,t,i){if(shouldTrack&&activeSub){let r=targetMap.get(e);r||targetMap.set(e,r=new Map);let n=r.get(i);n||(r.set(i,n=new Dep),n.map=r,n.key=i),n.track()}}function trigger(e,t,i,r,n,a){const o=targetMap.get(e);if(!o){globalVersion++;return}const s=l=>{l&&l.trigger()};if(startBatch(),t==="clear")o.forEach(s);else{const l=isArray(e),c=l&&isIntegerKey(i);if(l&&i==="length"){const d=Number(r);o.forEach((m,f)=>{(f==="length"||f===ARRAY_ITERATE_KEY||!isSymbol(f)&&f>=d)&&s(m)})}else switch((i!==void 0||o.has(void 0))&&s(o.get(i)),c&&s(o.get(ARRAY_ITERATE_KEY)),t){case"add":l?c&&s(o.get("length")):(s(o.get(ITERATE_KEY)),isMap(e)&&s(o.get(MAP_KEY_ITERATE_KEY)));break;case"delete":l||(s(o.get(ITERATE_KEY)),isMap(e)&&s(o.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&s(o.get(ITERATE_KEY));break}}endBatch()}function reactiveReadArray(e){const t=toRaw(e);return t===e?t:(track(t,"iterate",ARRAY_ITERATE_KEY),isShallow(e)?t:t.map(toReactive))}function shallowReadArray(e){return track(e=toRaw(e),"iterate",ARRAY_ITERATE_KEY),e}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...e){return reactiveReadArray(this).concat(...e.map(t=>isArray(t)?reactiveReadArray(t):t))},entries(){return iterator(this,"entries",e=>(e[1]=toReactive(e[1]),e))},every(e,t){return apply(this,"every",e,t,void 0,arguments)},filter(e,t){return apply(this,"filter",e,t,i=>i.map(toReactive),arguments)},find(e,t){return apply(this,"find",e,t,toReactive,arguments)},findIndex(e,t){return apply(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return apply(this,"findLast",e,t,toReactive,arguments)},findLastIndex(e,t){return apply(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return apply(this,"forEach",e,t,void 0,arguments)},includes(...e){return searchProxy(this,"includes",e)},indexOf(...e){return searchProxy(this,"indexOf",e)},join(e){return reactiveReadArray(this).join(e)},lastIndexOf(...e){return searchProxy(this,"lastIndexOf",e)},map(e,t){return apply(this,"map",e,t,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...e){return noTracking(this,"push",e)},reduce(e,...t){return reduce(this,"reduce",e,t)},reduceRight(e,...t){return reduce(this,"reduceRight",e,t)},shift(){return noTracking(this,"shift")},some(e,t){return apply(this,"some",e,t,void 0,arguments)},splice(...e){return noTracking(this,"splice",e)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(e){return reactiveReadArray(this).toSorted(e)},toSpliced(...e){return reactiveReadArray(this).toSpliced(...e)},unshift(...e){return noTracking(this,"unshift",e)},values(){return iterator(this,"values",toReactive)}};function iterator(e,t,i){const r=shallowReadArray(e),n=r[t]();return r!==e&&!isShallow(e)&&(n._next=n.next,n.next=()=>{const a=n._next();return a.done||(a.value=i(a.value)),a}),n}const arrayProto=Array.prototype;function apply(e,t,i,r,n,a){const o=shallowReadArray(e),s=o!==e&&!isShallow(e),l=o[t];if(l!==arrayProto[t]){const m=l.apply(e,a);return s?toReactive(m):m}let c=i;o!==e&&(s?c=function(m,f){return i.call(this,toReactive(m),f,e)}:i.length>2&&(c=function(m,f){return i.call(this,m,f,e)}));const d=l.call(o,c,r);return s&&n?n(d):d}function reduce(e,t,i,r){const n=shallowReadArray(e);let a=i;return n!==e&&(isShallow(e)?i.length>3&&(a=function(o,s,l){return i.call(this,o,s,l,e)}):a=function(o,s,l){return i.call(this,o,toReactive(s),l,e)}),n[t](a,...r)}function searchProxy(e,t,i){const r=toRaw(e);track(r,"iterate",ARRAY_ITERATE_KEY);const n=r[t](...i);return(n===-1||n===!1)&&isProxy(i[0])?(i[0]=toRaw(i[0]),r[t](...i)):n}function noTracking(e,t,i=[]){pauseTracking(),startBatch();const r=toRaw(e)[t].apply(e,i);return endBatch(),resetTracking(),r}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol));function hasOwnProperty(e){isSymbol(e)||(e=String(e));const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}class BaseReactiveHandler{constructor(t=!1,i=!1){this._isReadonly=t,this._isShallow=i}get(t,i,r){if(i==="__v_skip")return t.__v_skip;const n=this._isReadonly,a=this._isShallow;if(i==="__v_isReactive")return!n;if(i==="__v_isReadonly")return n;if(i==="__v_isShallow")return a;if(i==="__v_raw")return r===(n?a?shallowReadonlyMap:readonlyMap:a?shallowReactiveMap:reactiveMap).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=isArray(t);if(!n){let l;if(o&&(l=arrayInstrumentations[i]))return l;if(i==="hasOwnProperty")return hasOwnProperty}const s=Reflect.get(t,i,isRef(t)?t:r);if((isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(n||track(t,"get",i),a))return s;if(isRef(s)){const l=o&&isIntegerKey(i)?s:s.value;return n&&isObject(l)?readonly(l):l}return isObject(s)?n?readonly(s):reactive(s):s}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!1,t)}set(t,i,r,n){let a=t[i];if(!this._isShallow){const l=isReadonly(a);if(!isShallow(r)&&!isReadonly(r)&&(a=toRaw(a),r=toRaw(r)),!isArray(t)&&isRef(a)&&!isRef(r))return l||(a.value=r),!0}const o=isArray(t)&&isIntegerKey(i)?Number(i)<t.length:hasOwn(t,i),s=Reflect.set(t,i,r,isRef(t)?t:n);return t===toRaw(n)&&(o?hasChanged(r,a)&&trigger(t,"set",i,r):trigger(t,"add",i,r)),s}deleteProperty(t,i){const r=hasOwn(t,i);t[i];const n=Reflect.deleteProperty(t,i);return n&&r&&trigger(t,"delete",i,void 0),n}has(t,i){const r=Reflect.has(t,i);return(!isSymbol(i)||!builtInSymbols.has(i))&&track(t,"has",i),r}ownKeys(t){return track(t,"iterate",isArray(t)?"length":ITERATE_KEY),Reflect.ownKeys(t)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(t=!1){super(!0,t)}set(t,i){return!0}deleteProperty(t,i){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function createIterableMethod(e,t,i){return function(...r){const n=this.__v_raw,a=toRaw(n),o=isMap(a),s=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,c=n[e](...r),d=i?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",l?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:m,done:f}=c.next();return f?{value:m,done:f}:{value:s?[d(m[0]),d(m[1])]:d(m),done:f}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function createInstrumentations(e,t){const i={get(n){const a=this.__v_raw,o=toRaw(a),s=toRaw(n);e||(hasChanged(n,s)&&track(o,"get",n),track(o,"get",s));const{has:l}=getProto(o),c=t?toShallow:e?toReadonly:toReactive;if(l.call(o,n))return c(a.get(n));if(l.call(o,s))return c(a.get(s));a!==o&&a.get(n)},get size(){const n=this.__v_raw;return!e&&track(toRaw(n),"iterate",ITERATE_KEY),n.size},has(n){const a=this.__v_raw,o=toRaw(a),s=toRaw(n);return e||(hasChanged(n,s)&&track(o,"has",n),track(o,"has",s)),n===s?a.has(n):a.has(n)||a.has(s)},forEach(n,a){const o=this,s=o.__v_raw,l=toRaw(s),c=t?toShallow:e?toReadonly:toReactive;return!e&&track(l,"iterate",ITERATE_KEY),s.forEach((d,m)=>n.call(a,c(d),c(m),o))}};return extend(i,e?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(n){!t&&!isShallow(n)&&!isReadonly(n)&&(n=toRaw(n));const a=toRaw(this);return getProto(a).has.call(a,n)||(a.add(n),trigger(a,"add",n,n)),this},set(n,a){!t&&!isShallow(a)&&!isReadonly(a)&&(a=toRaw(a));const o=toRaw(this),{has:s,get:l}=getProto(o);let c=s.call(o,n);c||(n=toRaw(n),c=s.call(o,n));const d=l.call(o,n);return o.set(n,a),c?hasChanged(a,d)&&trigger(o,"set",n,a):trigger(o,"add",n,a),this},delete(n){const a=toRaw(this),{has:o,get:s}=getProto(a);let l=o.call(a,n);l||(n=toRaw(n),l=o.call(a,n)),s&&s.call(a,n);const c=a.delete(n);return l&&trigger(a,"delete",n,void 0),c},clear(){const n=toRaw(this),a=n.size!==0,o=n.clear();return a&&trigger(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{i[n]=createIterableMethod(n,e,t)}),i}function createInstrumentationGetter(e,t){const i=createInstrumentations(e,t);return(r,n,a)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(hasOwn(i,n)&&n in r?i:r,n,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(e){return createReactiveObject(e,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(e,t,i,r,n){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=getTargetType(e);if(a===0)return e;const o=n.get(e);if(o)return o;const s=new Proxy(e,a===2?r:i);return n.set(e,s),s}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return e?!!e.__v_raw:!1}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return!hasOwn(e,"__v_skip")&&Object.isExtensible(e)&&def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function isRef(e){return e?e.__v_isRef===!0:!1}function ref(e){return createRef(e,!1)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,i){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=i?t:toRaw(t),this._value=i?t:toReactive(t),this.__v_isShallow=i}get value(){return this.dep.track(),this._value}set value(t){const i=this._rawValue,r=this.__v_isShallow||isShallow(t)||isReadonly(t);t=r?t:toRaw(t),hasChanged(t,i)&&(this._rawValue=t,this._value=r?t:toReactive(t),this.dep.trigger())}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,i)=>t==="__v_raw"?e:unref(Reflect.get(e,t,i)),set:(e,t,i,r)=>{const n=e[t];return isRef(n)&&!isRef(i)?(n.value=i,!0):Reflect.set(e,t,i,r)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}class ComputedRefImpl{constructor(t,i,r){this.fn=t,this.setter=i,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!i,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const t=this.dep.track();return refreshComputed(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function computed$1(e,t,i=!1){let r,n;return isFunction(e)?r=e:(r=e.get,n=e.set),new ComputedRefImpl(r,n,i)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(e,t=!1,i=activeWatcher){if(i){let r=cleanupMap.get(i);r||cleanupMap.set(i,r=[]),r.push(e)}}function watch$1(e,t,i=EMPTY_OBJ){const{immediate:r,deep:n,once:a,scheduler:o,augmentJob:s,call:l}=i,c=C=>n?C:isShallow(C)||n===!1||n===0?traverse(C,1):traverse(C);let d,m,f,u,b=!1,y=!1;if(isRef(e)?(m=()=>e.value,b=isShallow(e)):isReactive(e)?(m=()=>c(e),b=!0):isArray(e)?(y=!0,b=e.some(C=>isReactive(C)||isShallow(C)),m=()=>e.map(C=>{if(isRef(C))return C.value;if(isReactive(C))return c(C);if(isFunction(C))return l?l(C,2):C()})):isFunction(e)?t?m=l?()=>l(e,2):e:m=()=>{if(f){pauseTracking();try{f()}finally{resetTracking()}}const C=activeWatcher;activeWatcher=d;try{return l?l(e,3,[u]):e(u)}finally{activeWatcher=C}}:m=NOOP,t&&n){const C=m,B=n===!0?1/0:n;m=()=>traverse(C(),B)}const w=getCurrentScope(),T=()=>{d.stop(),w&&w.active&&remove(w.effects,d)};if(a&&t){const C=t;t=(...B)=>{C(...B),T()}}let E=y?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const R=C=>{if(!(!(d.flags&1)||!d.dirty&&!C))if(t){const B=d.run();if(n||b||(y?B.some((D,_)=>hasChanged(D,E[_])):hasChanged(B,E))){f&&f();const D=activeWatcher;activeWatcher=d;try{const _=[B,E===INITIAL_WATCHER_VALUE?void 0:y&&E[0]===INITIAL_WATCHER_VALUE?[]:E,u];E=B,l?l(t,3,_):t(..._)}finally{activeWatcher=D}}}else d.run()};return s&&s(R),d=new ReactiveEffect(m),d.scheduler=o?()=>o(R,!1):R,u=C=>onWatcherCleanup(C,!1,d),f=d.onStop=()=>{const C=cleanupMap.get(d);if(C){if(l)l(C,4);else for(const B of C)B();cleanupMap.delete(d)}},t?r?R(!0):E=d.run():o?o(R.bind(null,!0),!0):d.run(),T.pause=d.pause.bind(d),T.resume=d.resume.bind(d),T.stop=T,T}function traverse(e,t=1/0,i){if(t<=0||!isObject(e)||e.__v_skip||(i=i||new Map,(i.get(e)||0)>=t))return e;if(i.set(e,t),t--,isRef(e))traverse(e.value,t,i);else if(isArray(e))for(let r=0;r<e.length;r++)traverse(e[r],t,i);else if(isSet(e)||isMap(e))e.forEach(r=>{traverse(r,t,i)});else if(isPlainObject(e)){for(const r in e)traverse(e[r],t,i);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&traverse(e[r],t,i)}return e}const stack=[];let isWarning=!1;function warn$1(e,...t){if(isWarning)return;isWarning=!0,pauseTracking();const i=stack.length?stack[stack.length-1].component:null,r=i&&i.appContext.config.warnHandler,n=getComponentTrace();if(r)callWithErrorHandling(r,i,11,[e+t.map(a=>{var o,s;return(s=(o=a.toString)==null?void 0:o.call(a))!=null?s:JSON.stringify(a)}).join(""),i&&i.proxy,n.map(({vnode:a})=>`at <${formatComponentName(i,a.type)}>`).join(`
`),n]);else{const a=[`[Vue warn]: ${e}`,...t];n.length&&a.push(`
`,...formatTrace(n)),console.warn(...a)}resetTracking(),isWarning=!1}function getComponentTrace(){let e=stack[stack.length-1];if(!e)return[];const t=[];for(;e;){const i=t[0];i&&i.vnode===e?i.recurseCount++:t.push({vnode:e,recurseCount:0});const r=e.component&&e.component.parent;e=r&&r.vnode}return t}function formatTrace(e){const t=[];return e.forEach((i,r)=>{t.push(...r===0?[]:[`
`],...formatTraceEntry(i))}),t}function formatTraceEntry({vnode:e,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",r=e.component?e.component.parent==null:!1,n=` at <${formatComponentName(e.component,e.type,r)}`,a=">"+i;return e.props?[n,...formatProps(e.props),a]:[n+a]}function formatProps(e){const t=[],i=Object.keys(e);return i.slice(0,3).forEach(r=>{t.push(...formatProp(r,e[r]))}),i.length>3&&t.push(" ..."),t}function formatProp(e,t,i){return isString(t)?(t=JSON.stringify(t),i?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${e}=${t}`]:isRef(t)?(t=formatProp(e,toRaw(t.value),!0),i?t:[`${e}=Ref<`,t,">"]):isFunction(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=toRaw(t),i?t:[`${e}=`,t])}function callWithErrorHandling(e,t,i,r){try{return r?e(...r):e()}catch(n){handleError(n,t,i)}}function callWithAsyncErrorHandling(e,t,i,r){if(isFunction(e)){const n=callWithErrorHandling(e,t,i,r);return n&&isPromise(n)&&n.catch(a=>{handleError(a,t,i)}),n}if(isArray(e)){const n=[];for(let a=0;a<e.length;a++)n.push(callWithAsyncErrorHandling(e[a],t,i,r));return n}}function handleError(e,t,i,r=!0){const n=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||EMPTY_OBJ;if(t){let s=t.parent;const l=t.proxy,c=`https://vuejs.org/error-reference/#runtime-${i}`;for(;s;){const d=s.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,l,c)===!1)return}s=s.parent}if(a){pauseTracking(),callWithErrorHandling(a,null,10,[e,l,c]),resetTracking();return}}logError(e,i,n,r,o)}function logError(e,t,i,r=!0,n=!1){if(n)throw e;console.error(e)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,i=queue.length;for(;t<i;){const r=t+i>>>1,n=queue[r],a=getId(n);a<e||a===e&&n.flags&2?t=r+1:i=r}return t}function queueJob(e){if(!(e.flags&1)){const t=getId(e),i=queue[queue.length-1];!i||!(e.flags&2)&&t>=getId(i)?queue.push(e):queue.splice(findInsertionIndex(t),0,e),e.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):activePostFlushCbs&&e.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,e):e.flags&1||(pendingPostFlushCbs.push(e),e.flags|=1),queueFlush()}function flushPreFlushCbs(e,t,i=flushIndex+1){for(;i<queue.length;i++){const r=queue[i];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;queue.splice(i,1),i--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)].sort((i,r)=>getId(i)-getId(r));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const i=activePostFlushCbs[postFlushIndex];i.flags&4&&(i.flags&=-2),i.flags&8||i(),i.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?e.flags&2?-1:1/0:e.id;function flushJobs(e){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),callWithErrorHandling(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const t=queue[flushIndex];t&&(t.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,i){if(!t||e._n)return e;const r=(...n)=>{r._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(t);let o;try{o=e(...n)}finally{setCurrentRenderingInstance(a),r._d&&setBlockTracking(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function invokeDirectiveHook(e,t,i,r){const n=e.dirs,a=t&&t.dirs;for(let o=0;o<n.length;o++){const s=n[o];a&&(s.oldValue=a[o].value);let l=s.dir[r];l&&(pauseTracking(),callWithAsyncErrorHandling(l,i,8,[e.el,s,e,t]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=e=>e.__isTeleport,leaveCbKey=Symbol("_leaveCb");function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?(e.transition=t,setTransitionHooks(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function markAsyncBoundary(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const pendingSetRefMap=new WeakMap;function setRef(e,t,i,r,n=!1){if(isArray(e)){e.forEach((b,y)=>setRef(b,t&&(isArray(t)?t[y]:t),i,r,n));return}if(isAsyncWrapper(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&setRef(e,t,i,r.component.subTree);return}const a=r.shapeFlag&4?getComponentPublicInstance(r.component):r.el,o=n?null:a,{i:s,r:l}=e,c=t&&t.r,d=s.refs===EMPTY_OBJ?s.refs={}:s.refs,m=s.setupState,f=toRaw(m),u=m===EMPTY_OBJ?NO:b=>hasOwn(f,b);if(c!=null&&c!==l){if(invalidatePendingSetRef(t),isString(c))d[c]=null,u(c)&&(m[c]=null);else if(isRef(c)){c.value=null;const b=t;b.k&&(d[b.k]=null)}}if(isFunction(l))callWithErrorHandling(l,s,12,[o,d]);else{const b=isString(l),y=isRef(l);if(b||y){const w=()=>{if(e.f){const T=b?u(l)?m[l]:d[l]:l.value;if(n)isArray(T)&&remove(T,a);else if(isArray(T))T.includes(a)||T.push(a);else if(b)d[l]=[a],u(l)&&(m[l]=d[l]);else{const E=[a];l.value=E,e.k&&(d[e.k]=E)}}else b?(d[l]=o,u(l)&&(m[l]=o)):y&&(l.value=o,e.k&&(d[e.k]=o))};if(o){const T=()=>{w(),pendingSetRefMap.delete(e)};T.id=-1,pendingSetRefMap.set(e,T),queuePostRenderEffect(T,i)}else invalidatePendingSetRef(e),w()}}}function invalidatePendingSetRef(e){const t=pendingSetRefMap.get(e);t&&(t.flags|=8,pendingSetRefMap.delete(e))}getGlobalThis().requestIdleCallback;getGlobalThis().cancelIdleCallback;const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,i=currentInstance){const r=e.__wdc||(e.__wdc=()=>{let n=i;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(injectHook(t,r,i),i){let n=i.parent;for(;n&&n.parent;)isKeepAlive(n.parent.vnode)&&injectToKeepAliveRoot(r,t,i,n),n=n.parent}}function injectToKeepAliveRoot(e,t,i,r){const n=injectHook(t,e,r,!0);onUnmounted(()=>{remove(r[t],n)},i)}function injectHook(e,t,i=currentInstance,r=!1){if(i){const n=i[e]||(i[e]=[]),a=t.__weh||(t.__weh=(...o)=>{pauseTracking();const s=setCurrentInstance(i),l=callWithAsyncErrorHandling(t,i,e,o);return s(),resetTracking(),l});return r?n.unshift(a):n.push(a),a}}const createHook=e=>(t,i=currentInstance)=>{(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...r)=>t(...r),i)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc"),getPublicInstance=e=>e?isStatefulComponent(e)?getComponentPublicInstance(e):getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>{queueJob(e.update)}),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:i,setupState:r,data:n,props:a,accessCache:o,type:s,appContext:l}=e;let c;if(t[0]!=="$"){const u=o[t];if(u!==void 0)switch(u){case 1:return r[t];case 2:return n[t];case 4:return i[t];case 3:return a[t]}else{if(hasSetupBinding(r,t))return o[t]=1,r[t];if(n!==EMPTY_OBJ&&hasOwn(n,t))return o[t]=2,n[t];if((c=e.propsOptions[0])&&hasOwn(c,t))return o[t]=3,a[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=4,i[t];shouldCacheAccess&&(o[t]=0)}}const d=publicPropertiesMap[t];let m,f;if(d)return t==="$attrs"&&track(e.attrs,"get",""),d(e);if((m=s.__cssModules)&&(m=m[t]))return m;if(i!==EMPTY_OBJ&&hasOwn(i,t))return o[t]=4,i[t];if(f=l.config.globalProperties,hasOwn(f,t))return f[t]},set({_:e},t,i){const{data:r,setupState:n,ctx:a}=e;return hasSetupBinding(n,t)?(n[t]=i,!0):r!==EMPTY_OBJ&&hasOwn(r,t)?(r[t]=i,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=i,!0)},has({_:{data:e,setupState:t,accessCache:i,ctx:r,appContext:n,propsOptions:a,type:o}},s){let l,c;return!!(i[s]||e!==EMPTY_OBJ&&s[0]!=="$"&&hasOwn(e,s)||hasSetupBinding(t,s)||(l=a[0])&&hasOwn(l,s)||hasOwn(r,s)||hasOwn(publicPropertiesMap,s)||hasOwn(n.config.globalProperties,s)||(c=o.__cssModules)&&c[s])},defineProperty(e,t,i){return i.get!=null?e._.accessCache[t]=0:hasOwn(i,"value")&&this.set(e,t,i.value,null),Reflect.defineProperty(e,t,i)}};function normalizePropsOrEmits(e){return isArray(e)?e.reduce((t,i)=>(t[i]=null,t),{}):e}let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),i=e.proxy,r=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:n,computed:a,methods:o,watch:s,provide:l,inject:c,created:d,beforeMount:m,mounted:f,beforeUpdate:u,updated:b,activated:y,deactivated:w,beforeDestroy:T,beforeUnmount:E,destroyed:R,unmounted:C,render:B,renderTracked:D,renderTriggered:_,errorCaptured:x,serverPrefetch:Z,expose:L,inheritAttrs:z,components:K,directives:G,filters:ae}=t;if(c&&resolveInjections(c,r,null),o)for(const he in o){const Y=o[he];isFunction(Y)&&(r[he]=Y.bind(i))}if(n){const he=n.call(i,i);isObject(he)&&(e.data=reactive(he))}if(shouldCacheAccess=!0,a)for(const he in a){const Y=a[he],fe=isFunction(Y)?Y.bind(i,i):isFunction(Y.get)?Y.get.bind(i,i):NOOP,N=!isFunction(Y)&&isFunction(Y.set)?Y.set.bind(i):NOOP,J=computed({get:fe,set:N});Object.defineProperty(r,he,{enumerable:!0,configurable:!0,get:()=>J.value,set:ne=>J.value=ne})}if(s)for(const he in s)createWatcher(s[he],r,i,he);if(l){const he=isFunction(l)?l.call(i):l;Reflect.ownKeys(he).forEach(Y=>{provide(Y,he[Y])})}d&&callHook(d,e,"c");function ce(he,Y){isArray(Y)?Y.forEach(fe=>he(fe.bind(i))):Y&&he(Y.bind(i))}if(ce(onBeforeMount,m),ce(onMounted,f),ce(onBeforeUpdate,u),ce(onUpdated,b),ce(onActivated,y),ce(onDeactivated,w),ce(onErrorCaptured,x),ce(onRenderTracked,D),ce(onRenderTriggered,_),ce(onBeforeUnmount,E),ce(onUnmounted,C),ce(onServerPrefetch,Z),isArray(L))if(L.length){const he=e.exposed||(e.exposed={});L.forEach(Y=>{Object.defineProperty(he,Y,{get:()=>i[Y],set:fe=>i[Y]=fe,enumerable:!0})})}else e.exposed||(e.exposed={});B&&e.render===NOOP&&(e.render=B),z!=null&&(e.inheritAttrs=z),K&&(e.components=K),G&&(e.directives=G),Z&&markAsyncBoundary(e)}function resolveInjections(e,t,i=NOOP){isArray(e)&&(e=normalizeInject(e));for(const r in e){const n=e[r];let a;isObject(n)?"default"in n?a=inject(n.from||r,n.default,!0):a=inject(n.from||r):a=inject(n),isRef(a)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:o=>a.value=o}):t[r]=a}}function callHook(e,t,i){callWithAsyncErrorHandling(isArray(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,i)}function createWatcher(e,t,i,r){let n=r.includes(".")?createPathGetter(i,r):()=>i[r];if(isString(e)){const a=t[e];isFunction(a)&&watch(n,a)}else if(isFunction(e))watch(n,e.bind(i));else if(isObject(e))if(isArray(e))e.forEach(a=>createWatcher(a,t,i,r));else{const a=isFunction(e.handler)?e.handler.bind(i):t[e.handler];isFunction(a)&&watch(n,a,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:i,extends:r}=t,{mixins:n,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t);let l;return s?l=s:!n.length&&!i&&!r?l=t:(l={},n.length&&n.forEach(c=>mergeOptions(l,c,o,!0)),mergeOptions(l,t,o)),isObject(t)&&a.set(t,l),l}function mergeOptions(e,t,i,r=!1){const{mixins:n,extends:a}=t;a&&mergeOptions(e,a,i,!0),n&&n.forEach(o=>mergeOptions(e,o,i,!0));for(const o in t)if(!(r&&o==="expose")){const s=internalOptionMergeStrats[o]||i&&i[o];e[o]=s?s(e[o],t[o]):t[o]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction(e)?e.call(this,this):e,isFunction(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let i=0;i<e.length;i++)t[e[i]]=e[i];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(Object.create(null),e,t):t}function mergeEmitsOrPropsOptions(e,t){return e?isArray(e)&&isArray(t)?[...new Set([...e,...t])]:extend(Object.create(null),normalizePropsOrEmits(e),normalizePropsOrEmits(t??{})):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const i=extend(Object.create(null),e);for(const r in t)i[r]=mergeAsArray(e[r],t[r]);return i}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(r,n=null){isFunction(r)||(r=extend({},r)),n!=null&&!isObject(n)&&(n=null);const a=createAppContext(),o=new WeakSet,s=[];let l=!1;const c=a.app={_uid:uid$1++,_component:r,_props:n,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(d){},use(d,...m){return o.has(d)||(d&&isFunction(d.install)?(o.add(d),d.install(c,...m)):isFunction(d)&&(o.add(d),d(c,...m))),c},mixin(d){return a.mixins.includes(d)||a.mixins.push(d),c},component(d,m){return m?(a.components[d]=m,c):a.components[d]},directive(d,m){return m?(a.directives[d]=m,c):a.directives[d]},mount(d,m,f){if(!l){const u=c._ceVNode||createVNode(r,n);return u.appContext=a,f===!0?f="svg":f===!1&&(f=void 0),e(u,d,f),l=!0,c._container=d,d.__vue_app__=c,getComponentPublicInstance(u.component)}},onUnmount(d){s.push(d)},unmount(){l&&(callWithAsyncErrorHandling(s,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(d,m){return a.provides[d]=m,c},runWithContext(d){const m=currentApp;currentApp=c;try{return d()}finally{currentApp=m}}};return c}}let currentApp=null;function provide(e,t){if(currentInstance){let i=currentInstance.provides;const r=currentInstance.parent&&currentInstance.parent.provides;r===i&&(i=currentInstance.provides=Object.create(r)),i[e]=t}}function inject(e,t,i=!1){const r=getCurrentInstance();if(r||currentApp){let n=currentApp?currentApp._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return i&&isFunction(t)?t.call(r&&r.proxy):t}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=e=>Object.getPrototypeOf(e)===internalObjectProto;function initProps(e,t,i,r=!1){const n={},a=createInternalObject();e.propsDefaults=Object.create(null),setFullProps(e,t,n,a);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);i?e.props=r?n:shallowReactive(n):e.type.props?e.props=n:e.props=a,e.attrs=a}function updateProps(e,t,i,r){const{props:n,attrs:a,vnode:{patchFlag:o}}=e,s=toRaw(n),[l]=e.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let f=d[m];if(isEmitListener(e.emitsOptions,f))continue;const u=t[f];if(l)if(hasOwn(a,f))u!==a[f]&&(a[f]=u,c=!0);else{const b=camelize(f);n[b]=resolvePropValue(l,s,b,u,e,!1)}else u!==a[f]&&(a[f]=u,c=!0)}}}else{setFullProps(e,t,n,a)&&(c=!0);let d;for(const m in s)(!t||!hasOwn(t,m)&&((d=hyphenate(m))===m||!hasOwn(t,d)))&&(l?i&&(i[m]!==void 0||i[d]!==void 0)&&(n[m]=resolvePropValue(l,s,m,void 0,e,!0)):delete n[m]);if(a!==s)for(const m in a)(!t||!hasOwn(t,m))&&(delete a[m],c=!0)}c&&trigger(e.attrs,"set","")}function setFullProps(e,t,i,r){const[n,a]=e.propsOptions;let o=!1,s;if(t)for(let l in t){if(isReservedProp(l))continue;const c=t[l];let d;n&&hasOwn(n,d=camelize(l))?!a||!a.includes(d)?i[d]=c:(s||(s={}))[d]=c:isEmitListener(e.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(a){const l=toRaw(i),c=s||EMPTY_OBJ;for(let d=0;d<a.length;d++){const m=a[d];i[m]=resolvePropValue(n,l,m,c[m],e,!hasOwn(c,m))}}return o}function resolvePropValue(e,t,i,r,n,a){const o=e[i];if(o!=null){const s=hasOwn(o,"default");if(s&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&isFunction(l)){const{propsDefaults:c}=n;if(i in c)r=c[i];else{const d=setCurrentInstance(n);r=c[i]=l.call(null,t),d()}}else r=l;n.ce&&n.ce._setProp(i,r)}o[0]&&(a&&!s?r=!1:o[1]&&(r===""||r===hyphenate(i))&&(r=!0))}return r}const mixinPropsCache=new WeakMap;function normalizePropsOptions(e,t,i=!1){const r=i?mixinPropsCache:t.propsCache,n=r.get(e);if(n)return n;const a=e.props,o={},s=[];let l=!1;if(!isFunction(e)){const d=m=>{l=!0;const[f,u]=normalizePropsOptions(m,t,!0);extend(o,f),u&&s.push(...u)};!i&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!a&&!l)return isObject(e)&&r.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let d=0;d<a.length;d++){const m=camelize(a[d]);validatePropName(m)&&(o[m]=EMPTY_OBJ)}else if(a)for(const d in a){const m=camelize(d);if(validatePropName(m)){const f=a[d],u=o[m]=isArray(f)||isFunction(f)?{type:f}:extend({},f),b=u.type;let y=!1,w=!0;if(isArray(b))for(let T=0;T<b.length;++T){const E=b[T],R=isFunction(E)&&E.name;if(R==="Boolean"){y=!0;break}else R==="String"&&(w=!1)}else y=isFunction(b)&&b.name==="Boolean";u[0]=y,u[1]=w,(y||hasOwn(u,"default"))&&s.push(m)}}const c=[o,s];return isObject(e)&&r.set(e,c),c}function validatePropName(e){return e[0]!=="$"&&!isReservedProp(e)}const isInternalKey=e=>e==="_"||e==="_ctx"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,i)=>{if(t._n)return t;const r=withCtx((...n)=>normalizeSlotValue(t(...n)),i);return r._c=!1,r},normalizeObjectSlots=(e,t,i)=>{const r=e._ctx;for(const n in e){if(isInternalKey(n))continue;const a=e[n];if(isFunction(a))t[n]=normalizeSlot(n,a,r);else if(a!=null){const o=normalizeSlotValue(a);t[n]=()=>o}}},normalizeVNodeSlots=(e,t)=>{const i=normalizeSlotValue(t);e.slots.default=()=>i},assignSlots=(e,t,i)=>{for(const r in t)(i||!isInternalKey(r))&&(e[r]=t[r])},initSlots=(e,t,i)=>{const r=e.slots=createInternalObject();if(e.vnode.shapeFlag&32){const n=t._;n?(assignSlots(r,t,i),i&&def(r,"_",n,!0)):normalizeObjectSlots(t,r)}else t&&normalizeVNodeSlots(e,t)},updateSlots=(e,t,i)=>{const{vnode:r,slots:n}=e;let a=!0,o=EMPTY_OBJ;if(r.shapeFlag&32){const s=t._;s?i&&s===1?a=!1:assignSlots(n,t,i):(a=!t.$stable,normalizeObjectSlots(t,n)),o=t}else t&&(normalizeVNodeSlots(e,t),o={default:1});if(a)for(const s in n)!isInternalKey(s)&&o[s]==null&&delete n[s]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const i=getGlobalThis();i.__VUE__=!0;const{insert:r,remove:n,patchProp:a,createElement:o,createText:s,createComment:l,setText:c,setElementText:d,parentNode:m,nextSibling:f,setScopeId:u=NOOP,insertStaticContent:b}=e,y=(P,S,I,O=null,V=null,H=null,$=void 0,M=null,U=!!S.dynamicChildren)=>{if(P===S)return;P&&!isSameVNodeType(P,S)&&(O=ye(P),ne(P,V,H,!0),P=null),S.patchFlag===-2&&(U=!1,S.dynamicChildren=null);const{type:j,ref:W,shapeFlag:ie}=S;switch(j){case Text:w(P,S,I,O);break;case Comment:T(P,S,I,O);break;case Static:P==null&&E(S,I,O,$);break;case Fragment:K(P,S,I,O,V,H,$,M,U);break;default:ie&1?B(P,S,I,O,V,H,$,M,U):ie&6?G(P,S,I,O,V,H,$,M,U):(ie&64||ie&128)&&j.process(P,S,I,O,V,H,$,M,U,ue)}W!=null&&V?setRef(W,P&&P.ref,H,S||P,!S):W==null&&P&&P.ref!=null&&setRef(P.ref,null,H,P,!0)},w=(P,S,I,O)=>{if(P==null)r(S.el=s(S.children),I,O);else{const V=S.el=P.el;S.children!==P.children&&c(V,S.children)}},T=(P,S,I,O)=>{P==null?r(S.el=l(S.children||""),I,O):S.el=P.el},E=(P,S,I,O)=>{[P.el,P.anchor]=b(P.children,S,I,O,P.el,P.anchor)},R=({el:P,anchor:S},I,O)=>{let V;for(;P&&P!==S;)V=f(P),r(P,I,O),P=V;r(S,I,O)},C=({el:P,anchor:S})=>{let I;for(;P&&P!==S;)I=f(P),n(P),P=I;n(S)},B=(P,S,I,O,V,H,$,M,U)=>{if(S.type==="svg"?$="svg":S.type==="math"&&($="mathml"),P==null)D(S,I,O,V,H,$,M,U);else{const j=P.el&&P.el._isVueCE?P.el:null;try{j&&j._beginPatch(),Z(P,S,V,H,$,M,U)}finally{j&&j._endPatch()}}},D=(P,S,I,O,V,H,$,M)=>{let U,j;const{props:W,shapeFlag:ie,transition:pe,dirs:se}=P;if(U=P.el=o(P.type,H,W&&W.is,W),ie&8?d(U,P.children):ie&16&&x(P.children,U,null,O,V,resolveChildrenNamespace(P,H),$,M),se&&invokeDirectiveHook(P,null,O,"created"),_(U,P,P.scopeId,$,O),W){for(const v in W)v!=="value"&&!isReservedProp(v)&&a(U,v,null,W[v],H,O);"value"in W&&a(U,"value",null,W.value,H),(j=W.onVnodeBeforeMount)&&invokeVNodeHook(j,O,P)}se&&invokeDirectiveHook(P,null,O,"beforeMount");const we=needTransition(V,pe);we&&pe.beforeEnter(U),r(U,S,I),((j=W&&W.onVnodeMounted)||we||se)&&queuePostRenderEffect(()=>{j&&invokeVNodeHook(j,O,P),we&&pe.enter(U),se&&invokeDirectiveHook(P,null,O,"mounted")},V)},_=(P,S,I,O,V)=>{if(I&&u(P,I),O)for(let H=0;H<O.length;H++)u(P,O[H]);if(V){let H=V.subTree;if(S===H||isSuspense(H.type)&&(H.ssContent===S||H.ssFallback===S)){const $=V.vnode;_(P,$,$.scopeId,$.slotScopeIds,V.parent)}}},x=(P,S,I,O,V,H,$,M,U=0)=>{for(let j=U;j<P.length;j++){const W=P[j]=M?cloneIfMounted(P[j]):normalizeVNode(P[j]);y(null,W,S,I,O,V,H,$,M)}},Z=(P,S,I,O,V,H,$)=>{const M=S.el=P.el;let{patchFlag:U,dynamicChildren:j,dirs:W}=S;U|=P.patchFlag&16;const ie=P.props||EMPTY_OBJ,pe=S.props||EMPTY_OBJ;let se;if(I&&toggleRecurse(I,!1),(se=pe.onVnodeBeforeUpdate)&&invokeVNodeHook(se,I,S,P),W&&invokeDirectiveHook(S,P,I,"beforeUpdate"),I&&toggleRecurse(I,!0),(ie.innerHTML&&pe.innerHTML==null||ie.textContent&&pe.textContent==null)&&d(M,""),j?L(P.dynamicChildren,j,M,I,O,resolveChildrenNamespace(S,V),H):$||Y(P,S,M,null,I,O,resolveChildrenNamespace(S,V),H,!1),U>0){if(U&16)z(M,ie,pe,I,V);else if(U&2&&ie.class!==pe.class&&a(M,"class",null,pe.class,V),U&4&&a(M,"style",ie.style,pe.style,V),U&8){const we=S.dynamicProps;for(let v=0;v<we.length;v++){const h=we[v],g=ie[h],k=pe[h];(k!==g||h==="value")&&a(M,h,g,k,V,I)}}U&1&&P.children!==S.children&&d(M,S.children)}else!$&&j==null&&z(M,ie,pe,I,V);((se=pe.onVnodeUpdated)||W)&&queuePostRenderEffect(()=>{se&&invokeVNodeHook(se,I,S,P),W&&invokeDirectiveHook(S,P,I,"updated")},O)},L=(P,S,I,O,V,H,$)=>{for(let M=0;M<S.length;M++){const U=P[M],j=S[M],W=U.el&&(U.type===Fragment||!isSameVNodeType(U,j)||U.shapeFlag&198)?m(U.el):I;y(U,j,W,null,O,V,H,$,!0)}},z=(P,S,I,O,V)=>{if(S!==I){if(S!==EMPTY_OBJ)for(const H in S)!isReservedProp(H)&&!(H in I)&&a(P,H,S[H],null,V,O);for(const H in I){if(isReservedProp(H))continue;const $=I[H],M=S[H];$!==M&&H!=="value"&&a(P,H,M,$,V,O)}"value"in I&&a(P,"value",S.value,I.value,V)}},K=(P,S,I,O,V,H,$,M,U)=>{const j=S.el=P?P.el:s(""),W=S.anchor=P?P.anchor:s("");let{patchFlag:ie,dynamicChildren:pe,slotScopeIds:se}=S;se&&(M=M?M.concat(se):se),P==null?(r(j,I,O),r(W,I,O),x(S.children||[],I,W,V,H,$,M,U)):ie>0&&ie&64&&pe&&P.dynamicChildren?(L(P.dynamicChildren,pe,I,V,H,$,M),(S.key!=null||V&&S===V.subTree)&&traverseStaticChildren(P,S,!0)):Y(P,S,I,W,V,H,$,M,U)},G=(P,S,I,O,V,H,$,M,U)=>{S.slotScopeIds=M,P==null?S.shapeFlag&512?V.ctx.activate(S,I,O,$,U):ae(S,I,O,V,H,$,U):de(P,S,U)},ae=(P,S,I,O,V,H,$)=>{const M=P.component=createComponentInstance(P,O,V);if(isKeepAlive(P)&&(M.ctx.renderer=ue),setupComponent(M,!1,$),M.asyncDep){if(V&&V.registerDep(M,ce,$),!P.el){const U=M.subTree=createVNode(Comment);T(null,U,S,I),P.placeholder=U.el}}else ce(M,P,S,I,V,H,$)},de=(P,S,I)=>{const O=S.component=P.component;if(shouldUpdateComponent(P,S,I))if(O.asyncDep&&!O.asyncResolved){he(O,S,I);return}else O.next=S,O.update();else S.el=P.el,O.vnode=S},ce=(P,S,I,O,V,H,$)=>{const M=()=>{if(P.isMounted){let{next:ie,bu:pe,u:se,parent:we,vnode:v}=P;{const X=locateNonHydratedAsyncRoot(P);if(X){ie&&(ie.el=v.el,he(P,ie,$)),X.asyncDep.then(()=>{P.isUnmounted||M()});return}}let h=ie,g;toggleRecurse(P,!1),ie?(ie.el=v.el,he(P,ie,$)):ie=v,pe&&invokeArrayFns(pe),(g=ie.props&&ie.props.onVnodeBeforeUpdate)&&invokeVNodeHook(g,we,ie,v),toggleRecurse(P,!0);const k=renderComponentRoot(P),q=P.subTree;P.subTree=k,y(q,k,m(q.el),ye(q),P,V,H),ie.el=k.el,h===null&&updateHOCHostEl(P,k.el),se&&queuePostRenderEffect(se,V),(g=ie.props&&ie.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(g,we,ie,v),V)}else{let ie;const{el:pe,props:se}=S,{bm:we,m:v,parent:h,root:g,type:k}=P,q=isAsyncWrapper(S);toggleRecurse(P,!1),we&&invokeArrayFns(we),!q&&(ie=se&&se.onVnodeBeforeMount)&&invokeVNodeHook(ie,h,S),toggleRecurse(P,!0);{g.ce&&g.ce._def.shadowRoot!==!1&&g.ce._injectChildStyle(k);const X=P.subTree=renderComponentRoot(P);y(null,X,I,O,P,V,H),S.el=X.el}if(v&&queuePostRenderEffect(v,V),!q&&(ie=se&&se.onVnodeMounted)){const X=S;queuePostRenderEffect(()=>invokeVNodeHook(ie,h,X),V)}(S.shapeFlag&256||h&&isAsyncWrapper(h.vnode)&&h.vnode.shapeFlag&256)&&P.a&&queuePostRenderEffect(P.a,V),P.isMounted=!0,S=I=O=null}};P.scope.on();const U=P.effect=new ReactiveEffect(M);P.scope.off();const j=P.update=U.run.bind(U),W=P.job=U.runIfDirty.bind(U);W.i=P,W.id=P.uid,U.scheduler=()=>queueJob(W),toggleRecurse(P,!0),j()},he=(P,S,I)=>{S.component=P;const O=P.vnode.props;P.vnode=S,P.next=null,updateProps(P,S.props,O,I),updateSlots(P,S.children,I),pauseTracking(),flushPreFlushCbs(P),resetTracking()},Y=(P,S,I,O,V,H,$,M,U=!1)=>{const j=P&&P.children,W=P?P.shapeFlag:0,ie=S.children,{patchFlag:pe,shapeFlag:se}=S;if(pe>0){if(pe&128){N(j,ie,I,O,V,H,$,M,U);return}else if(pe&256){fe(j,ie,I,O,V,H,$,M,U);return}}se&8?(W&16&&_e(j,V,H),ie!==j&&d(I,ie)):W&16?se&16?N(j,ie,I,O,V,H,$,M,U):_e(j,V,H,!0):(W&8&&d(I,""),se&16&&x(ie,I,O,V,H,$,M,U))},fe=(P,S,I,O,V,H,$,M,U)=>{P=P||EMPTY_ARR,S=S||EMPTY_ARR;const j=P.length,W=S.length,ie=Math.min(j,W);let pe;for(pe=0;pe<ie;pe++){const se=S[pe]=U?cloneIfMounted(S[pe]):normalizeVNode(S[pe]);y(P[pe],se,I,null,V,H,$,M,U)}j>W?_e(P,V,H,!0,!1,ie):x(S,I,O,V,H,$,M,U,ie)},N=(P,S,I,O,V,H,$,M,U)=>{let j=0;const W=S.length;let ie=P.length-1,pe=W-1;for(;j<=ie&&j<=pe;){const se=P[j],we=S[j]=U?cloneIfMounted(S[j]):normalizeVNode(S[j]);if(isSameVNodeType(se,we))y(se,we,I,null,V,H,$,M,U);else break;j++}for(;j<=ie&&j<=pe;){const se=P[ie],we=S[pe]=U?cloneIfMounted(S[pe]):normalizeVNode(S[pe]);if(isSameVNodeType(se,we))y(se,we,I,null,V,H,$,M,U);else break;ie--,pe--}if(j>ie){if(j<=pe){const se=pe+1,we=se<W?S[se].el:O;for(;j<=pe;)y(null,S[j]=U?cloneIfMounted(S[j]):normalizeVNode(S[j]),I,we,V,H,$,M,U),j++}}else if(j>pe)for(;j<=ie;)ne(P[j],V,H,!0),j++;else{const se=j,we=j,v=new Map;for(j=we;j<=pe;j++){const Se=S[j]=U?cloneIfMounted(S[j]):normalizeVNode(S[j]);Se.key!=null&&v.set(Se.key,j)}let h,g=0;const k=pe-we+1;let q=!1,X=0;const te=new Array(k);for(j=0;j<k;j++)te[j]=0;for(j=se;j<=ie;j++){const Se=P[j];if(g>=k){ne(Se,V,H,!0);continue}let Ee;if(Se.key!=null)Ee=v.get(Se.key);else for(h=we;h<=pe;h++)if(te[h-we]===0&&isSameVNodeType(Se,S[h])){Ee=h;break}Ee===void 0?ne(Se,V,H,!0):(te[Ee-we]=j+1,Ee>=X?X=Ee:q=!0,y(Se,S[Ee],I,null,V,H,$,M,U),g++)}const ve=q?getSequence(te):EMPTY_ARR;for(h=ve.length-1,j=k-1;j>=0;j--){const Se=we+j,Ee=S[Se],Ie=S[Se+1],xe=Se+1<W?Ie.el||Ie.placeholder:O;te[j]===0?y(null,Ee,I,xe,V,H,$,M,U):q&&(h<0||j!==ve[h]?J(Ee,I,xe,2):h--)}}},J=(P,S,I,O,V=null)=>{const{el:H,type:$,transition:M,children:U,shapeFlag:j}=P;if(j&6){J(P.component.subTree,S,I,O);return}if(j&128){P.suspense.move(S,I,O);return}if(j&64){$.move(P,S,I,ue);return}if($===Fragment){r(H,S,I);for(let ie=0;ie<U.length;ie++)J(U[ie],S,I,O);r(P.anchor,S,I);return}if($===Static){R(P,S,I);return}if(O!==2&&j&1&&M)if(O===0)M.beforeEnter(H),r(H,S,I),queuePostRenderEffect(()=>M.enter(H),V);else{const{leave:ie,delayLeave:pe,afterLeave:se}=M,we=()=>{P.ctx.isUnmounted?n(H):r(H,S,I)},v=()=>{H._isLeaving&&H[leaveCbKey](!0),ie(H,()=>{we(),se&&se()})};pe?pe(H,we,v):v()}else r(H,S,I)},ne=(P,S,I,O=!1,V=!1)=>{const{type:H,props:$,ref:M,children:U,dynamicChildren:j,shapeFlag:W,patchFlag:ie,dirs:pe,cacheIndex:se}=P;if(ie===-2&&(V=!1),M!=null&&(pauseTracking(),setRef(M,null,I,P,!0),resetTracking()),se!=null&&(S.renderCache[se]=void 0),W&256){S.ctx.deactivate(P);return}const we=W&1&&pe,v=!isAsyncWrapper(P);let h;if(v&&(h=$&&$.onVnodeBeforeUnmount)&&invokeVNodeHook(h,S,P),W&6)be(P.component,I,O);else{if(W&128){P.suspense.unmount(I,O);return}we&&invokeDirectiveHook(P,null,S,"beforeUnmount"),W&64?P.type.remove(P,S,I,ue,O):j&&!j.hasOnce&&(H!==Fragment||ie>0&&ie&64)?_e(j,S,I,!1,!0):(H===Fragment&&ie&384||!V&&W&16)&&_e(U,S,I),O&&ee(P)}(v&&(h=$&&$.onVnodeUnmounted)||we)&&queuePostRenderEffect(()=>{h&&invokeVNodeHook(h,S,P),we&&invokeDirectiveHook(P,null,S,"unmounted")},I)},ee=P=>{const{type:S,el:I,anchor:O,transition:V}=P;if(S===Fragment){me(I,O);return}if(S===Static){C(P);return}const H=()=>{n(I),V&&!V.persisted&&V.afterLeave&&V.afterLeave()};if(P.shapeFlag&1&&V&&!V.persisted){const{leave:$,delayLeave:M}=V,U=()=>$(I,H);M?M(P.el,H,U):U()}else H()},me=(P,S)=>{let I;for(;P!==S;)I=f(P),n(P),P=I;n(S)},be=(P,S,I)=>{const{bum:O,scope:V,job:H,subTree:$,um:M,m:U,a:j}=P;invalidateMount(U),invalidateMount(j),O&&invokeArrayFns(O),V.stop(),H&&(H.flags|=8,ne($,P,S,I)),M&&queuePostRenderEffect(M,S),queuePostRenderEffect(()=>{P.isUnmounted=!0},S)},_e=(P,S,I,O=!1,V=!1,H=0)=>{for(let $=H;$<P.length;$++)ne(P[$],S,I,O,V)},ye=P=>{if(P.shapeFlag&6)return ye(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const S=f(P.anchor||P.el),I=S&&S[TeleportEndKey];return I?f(I):S};let Q=!1;const re=(P,S,I)=>{P==null?S._vnode&&ne(S._vnode,null,null,!0):y(S._vnode||null,P,S,null,null,null,I),S._vnode=P,Q||(Q=!0,flushPreFlushCbs(),flushPostFlushCbs(),Q=!1)},ue={p:y,um:ne,m:J,r:ee,mt:ae,mc:x,pc:Y,pbc:L,n:ye,o:e};return{render:re,hydrate:void 0,createApp:createAppAPI(re)}}function resolveChildrenNamespace({type:e,props:t},i){return i==="svg"&&e==="foreignObject"||i==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:i}function toggleRecurse({effect:e,job:t},i){i?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function needTransition(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function traverseStaticChildren(e,t,i=!1){const r=e.children,n=t.children;if(isArray(r)&&isArray(n))for(let a=0;a<r.length;a++){const o=r[a];let s=n[a];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=n[a]=cloneIfMounted(n[a]),s.el=o.el),!i&&s.patchFlag!==-2&&traverseStaticChildren(o,s)),s.type===Text&&s.patchFlag!==-1&&(s.el=o.el),s.type===Comment&&!s.el&&(s.el=o.el)}}function getSequence(e){const t=e.slice(),i=[0];let r,n,a,o,s;const l=e.length;for(r=0;r<l;r++){const c=e[r];if(c!==0){if(n=i[i.length-1],e[n]<c){t[r]=n,i.push(r);continue}for(a=0,o=i.length-1;a<o;)s=a+o>>1,e[i[s]]<c?a=s+1:o=s;c<e[i[a]]&&(a>0&&(t[r]=i[a-1]),i[a]=r)}}for(a=i.length,o=i[a-1];a-- >0;)i[a]=o,o=t[o];return i}function locateNonHydratedAsyncRoot(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:locateNonHydratedAsyncRoot(t)}function invalidateMount(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watch(e,t,i){return doWatch(e,t,i)}function doWatch(e,t,i=EMPTY_OBJ){const{immediate:r,deep:n,flush:a,once:o}=i,s=extend({},i),l=t&&r||!t&&a!=="post";let c;if(isInSSRComponentSetup){if(a==="sync"){const u=useSSRContext();c=u.__watcherHandles||(u.__watcherHandles=[])}else if(!l){const u=()=>{};return u.stop=NOOP,u.resume=NOOP,u.pause=NOOP,u}}const d=currentInstance;s.call=(u,b,y)=>callWithAsyncErrorHandling(u,d,b,y);let m=!1;a==="post"?s.scheduler=u=>{queuePostRenderEffect(u,d&&d.suspense)}:a!=="sync"&&(m=!0,s.scheduler=(u,b)=>{b?u():queueJob(u)}),s.augmentJob=u=>{t&&(u.flags|=4),m&&(u.flags|=2,d&&(u.id=d.uid,u.i=d))};const f=watch$1(e,t,s);return isInSSRComponentSetup&&(c?c.push(f):l&&f()),f}function instanceWatch(e,t,i){const r=this.proxy,n=isString(e)?e.includes(".")?createPathGetter(r,e):()=>r[e]:e.bind(r,r);let a;isFunction(t)?a=t:(a=t.handler,i=t);const o=setCurrentInstance(this),s=doWatch(n,a.bind(r),i);return o(),s}function createPathGetter(e,t){const i=t.split(".");return()=>{let r=e;for(let n=0;n<i.length&&r;n++)r=r[i[n]];return r}}const getModelModifiers=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${camelize(t)}Modifiers`]||e[`${hyphenate(t)}Modifiers`];function emit(e,t,...i){if(e.isUnmounted)return;const r=e.vnode.props||EMPTY_OBJ;let n=i;const a=t.startsWith("update:"),o=a&&getModelModifiers(r,t.slice(7));o&&(o.trim&&(n=i.map(d=>isString(d)?d.trim():d)),o.number&&(n=i.map(looseToNumber)));let s,l=r[s=toHandlerKey(t)]||r[s=toHandlerKey(camelize(t))];!l&&a&&(l=r[s=toHandlerKey(hyphenate(t))]),l&&callWithAsyncErrorHandling(l,e,6,n);const c=r[s+"Once"];if(c){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,callWithAsyncErrorHandling(c,e,6,n)}}const mixinEmitsCache=new WeakMap;function normalizeEmitsOptions(e,t,i=!1){const r=i?mixinEmitsCache:t.emitsCache,n=r.get(e);if(n!==void 0)return n;const a=e.emits;let o={},s=!1;if(!isFunction(e)){const l=c=>{const d=normalizeEmitsOptions(c,t,!0);d&&(s=!0,extend(o,d))};!i&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!a&&!s?(isObject(e)&&r.set(e,null),null):(isArray(a)?a.forEach(l=>o[l]=null):extend(o,a),isObject(e)&&r.set(e,o),o)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:i,proxy:r,withProxy:n,propsOptions:[a],slots:o,attrs:s,emit:l,render:c,renderCache:d,props:m,data:f,setupState:u,ctx:b,inheritAttrs:y}=e,w=setCurrentRenderingInstance(e);let T,E;try{if(i.shapeFlag&4){const C=n||r,B=C;T=normalizeVNode(c.call(B,C,d,m,u,f,b)),E=s}else{const C=t;T=normalizeVNode(C.length>1?C(m,{attrs:s,slots:o,emit:l}):C(m,null)),E=t.props?s:getFunctionalFallthrough(s)}}catch(C){blockStack.length=0,handleError(C,e,1),T=createVNode(Comment)}let R=T;if(E&&y!==!1){const C=Object.keys(E),{shapeFlag:B}=R;C.length&&B&7&&(a&&C.some(isModelListener)&&(E=filterModelListeners(E,a)),R=cloneVNode(R,E,!1,!0))}return i.dirs&&(R=cloneVNode(R,null,!1,!0),R.dirs=R.dirs?R.dirs.concat(i.dirs):i.dirs),i.transition&&setTransitionHooks(R,i.transition),T=R,setCurrentRenderingInstance(w),T}const getFunctionalFallthrough=e=>{let t;for(const i in e)(i==="class"||i==="style"||isOn(i))&&((t||(t={}))[i]=e[i]);return t},filterModelListeners=(e,t)=>{const i={};for(const r in e)(!isModelListener(r)||!(r.slice(9)in t))&&(i[r]=e[r]);return i};function shouldUpdateComponent(e,t,i){const{props:r,children:n,component:a}=e,{props:o,children:s,patchFlag:l}=t,c=a.emitsOptions;if(t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?hasPropsChanged(r,o,c):!!o;if(l&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const f=d[m];if(o[f]!==r[f]&&!isEmitListener(c,f))return!0}}}else return(n||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?hasPropsChanged(r,o,c):!0:!!o;return!1}function hasPropsChanged(e,t,i){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const a=r[n];if(t[a]!==e[a]&&!isEmitListener(i,a))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},i){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=i,t=t.parent;else break}}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}const Fragment=Symbol.for("v-fgt"),Text=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e,t=!1){isBlockTreeEnabled+=e,e<0&&currentBlock&&t&&(currentBlock.hasOnce=!0)}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,i,r,n,a){return setupBlock(createBaseVNode(e,t,i,r,n,a,!0))}function createBlock(e,t,i,r,n){return setupBlock(createVNode(e,t,i,r,n,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:i})=>(typeof e=="number"&&(e=""+e),e!=null?isString(e)||isRef(e)||isFunction(e)?{i:currentRenderingInstance,r:e,k:t,f:!!i}:e:null);function createBaseVNode(e,t=null,i=null,r=0,n=null,a=e===Fragment?0:1,o=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return s?(normalizeChildren(l,i),a&128&&e.normalize(l)):i&&(l.shapeFlag|=isString(i)?8:16),isBlockTreeEnabled>0&&!o&&currentBlock&&(l.patchFlag>0||a&6)&&l.patchFlag!==32&&currentBlock.push(l),l}const createVNode=_createVNode;function _createVNode(e,t=null,i=null,r=0,n=null,a=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const s=cloneVNode(e,t,!0);return i&&normalizeChildren(s,i),isBlockTreeEnabled>0&&!a&&currentBlock&&(s.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=s:currentBlock.push(s)),s.patchFlag=-2,s}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:s,style:l}=t;s&&!isString(s)&&(t.class=normalizeClass(s)),isObject(l)&&(isProxy(l)&&!isArray(l)&&(l=extend({},l)),t.style=normalizeStyle(l))}const o=isString(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction(e)?2:0;return createBaseVNode(e,t,i,r,n,o,a,!0)}function guardReactiveProps(e){return e?isProxy(e)||isInternalObject(e)?extend({},e):e:null}function cloneVNode(e,t,i=!1,r=!1){const{props:n,ref:a,patchFlag:o,children:s,transition:l}=e,c=t?mergeProps(n||{},t):n,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:c,key:c&&normalizeKey(c),ref:t&&t.ref?i&&a?isArray(a)?a.concat(normalizeRef(t)):[a,normalizeRef(t)]:normalizeRef(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&setTransitionHooks(d,l.clone(d)),d}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function createStaticVNode(e,t){const i=createVNode(Static,null,e);return i.staticCount=t,i}function createCommentVNode(e="",t=!1){return t?(openBlock(),createBlock(Comment,null,e)):createVNode(Comment,null,e)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):isVNode(e)?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let i=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(isArray(t))i=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),normalizeChildren(e,n()),n._c&&(n._d=!0));return}else{i=32;const n=t._;!n&&!isInternalObject(t)?t._ctx=currentRenderingInstance:n===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction(t)?(t={default:t,_ctx:currentRenderingInstance},i=32):(t=String(t),r&64?(i=16,t=[createTextVNode(t)]):i=8);e.children=t,e.shapeFlag|=i}function mergeProps(...e){const t={};for(let i=0;i<e.length;i++){const r=e[i];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=normalizeClass([t.class,r.class]));else if(n==="style")t.style=normalizeStyle([t.style,r.style]);else if(isOn(n)){const a=t[n],o=r[n];o&&a!==o&&!(isArray(a)&&a.includes(o))&&(t[n]=a?[].concat(a,o):o)}else n!==""&&(t[n]=r[n])}return t}function invokeVNodeHook(e,t,i,r=null){callWithAsyncErrorHandling(e,t,7,[i,r])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,i){const r=e.type,n=(t?t.appContext:e.appContext)||emptyAppContext,a={uid:uid++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(r,n),emitsOptions:normalizeEmitsOptions(r,n),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:r.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=emit.bind(null,a),e.ce&&e.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const e=getGlobalThis(),t=(i,r)=>{let n;return(n=e[i])||(n=e[i]=[]),n.push(r),a=>{n.length>1?n.forEach(o=>o(a)):n[0](a)}};internalSetCurrentInstance=t("__VUE_INSTANCE_SETTERS__",i=>currentInstance=i),setInSSRSetupState=t("__VUE_SSR_SETTERS__",i=>isInSSRComponentSetup=i)}const setCurrentInstance=e=>{const t=currentInstance;return internalSetCurrentInstance(e),e.scope.on(),()=>{e.scope.off(),internalSetCurrentInstance(t)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1,i=!1){t&&setInSSRSetupState(t);const{props:r,children:n}=e.vnode,a=isStatefulComponent(e);initProps(e,r,a,t),initSlots(e,n,i||t);const o=a?setupStatefulComponent(e,t):void 0;return t&&setInSSRSetupState(!1),o}function setupStatefulComponent(e,t){const i=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,PublicInstanceProxyHandlers);const{setup:r}=i;if(r){pauseTracking();const n=e.setupContext=r.length>1?createSetupContext(e):null,a=setCurrentInstance(e),o=callWithErrorHandling(r,e,0,[e.props,n]),s=isPromise(o);if(resetTracking(),a(),(s||e.sp)&&!isAsyncWrapper(e)&&markAsyncBoundary(e),s){if(o.then(unsetCurrentInstance,unsetCurrentInstance),t)return o.then(l=>{handleSetupResult(e,l)}).catch(l=>{handleError(l,e,0)});e.asyncDep=o}else handleSetupResult(e,o)}else finishComponentSetup(e)}function handleSetupResult(e,t,i){isFunction(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e)}function finishComponentSetup(e,t,i){const r=e.type;e.render||(e.render=r.render||NOOP);{const n=setCurrentInstance(e);pauseTracking();try{applyOptions(e)}finally{resetTracking(),n()}}}const attrsProxyHandlers={get(e,t){return track(e,"get",""),e[t]}};function createSetupContext(e){const t=i=>{e.exposed=i||{}};return{attrs:new Proxy(e.attrs,attrsProxyHandlers),slots:e.slots,emit:e.emit,expose:t}}function getComponentPublicInstance(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,i){if(i in t)return t[i];if(i in publicPropertiesMap)return publicPropertiesMap[i](e)},has(t,i){return i in t||i in publicPropertiesMap}})):e.proxy}const classifyRE=/(?:^|[-_])\w/g,classify=e=>e.replace(classifyRE,t=>t.toUpperCase()).replace(/[-_]/g,"");function getComponentName(e,t=!0){return isFunction(e)?e.displayName||e.name:e.name||t&&e.__name}function formatComponentName(e,t,i=!1){let r=getComponentName(t);if(!r&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(r=n[1])}if(!r&&e&&e.parent){const n=a=>{for(const o in a)if(a[o]===t)return o};r=n(e.components||e.parent.type.components)||n(e.appContext.components)}return r?classify(r):i?"App":"Anonymous"}function isClassComponent(e){return isFunction(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),version="3.5.24";let policy;const tt=typeof window<"u"&&window.trustedTypes;if(tt)try{policy=tt.createPolicy("vue",{createHTML:e=>e})}catch{}const unsafeToTrustedHTML=policy?e=>policy.createHTML(e):e=>e,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,i)=>{t.insertBefore(e,i||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,i,r)=>{const n=t==="svg"?doc.createElementNS(svgNS,e):t==="mathml"?doc.createElementNS(mathmlNS,e):i?doc.createElement(e,{is:i}):doc.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,i,r,n,a){const o=i?i.previousSibling:t.lastChild;if(n&&(n===a||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),i),!(n===a||!(n=n.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const s=templateContainer.content;if(r==="svg"||r==="mathml"){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,i)}return[o?o.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}},vtcKey=Symbol("_vtc");function patchClass(e,t,i){const r=e[vtcKey];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):i?e.setAttribute("class",t):e.className=t}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),CSS_VAR_TEXT=Symbol(""),displayRE=/(?:^|;)\s*display\s*:/;function patchStyle(e,t,i){const r=e.style,n=isString(i);let a=!1;if(i&&!n){if(t)if(isString(t))for(const o of t.split(";")){const s=o.slice(0,o.indexOf(":")).trim();i[s]==null&&setStyle(r,s,"")}else for(const o in t)i[o]==null&&setStyle(r,o,"");for(const o in i)o==="display"&&(a=!0),setStyle(r,o,i[o])}else if(n){if(t!==i){const o=r[CSS_VAR_TEXT];o&&(i+=";"+o),r.cssText=i,a=displayRE.test(i)}}else t&&e.removeAttribute("style");vShowOriginalDisplay in e&&(e[vShowOriginalDisplay]=a?r.display:"",e[vShowHidden]&&(r.display="none"))}const importantRE=/\s*!important$/;function setStyle(e,t,i){if(isArray(i))i.forEach(r=>setStyle(e,t,r));else if(i==null&&(i=""),t.startsWith("--"))e.setProperty(t,i);else{const r=autoPrefix(e,t);importantRE.test(i)?e.setProperty(hyphenate(r),i.replace(importantRE,""),"important"):e[r]=i}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const i=prefixCache[t];if(i)return i;let r=camelize(t);if(r!=="filter"&&r in e)return prefixCache[t]=r;r=capitalize(r);for(let n=0;n<prefixes.length;n++){const a=prefixes[n]+r;if(a in e)return prefixCache[t]=a}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,i,r,n,a=isSpecialBooleanAttr(t)){r&&t.startsWith("xlink:")?i==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,i):i==null||a&&!includeBooleanAttr(i)?e.removeAttribute(t):e.setAttribute(t,a?"":isSymbol(i)?String(i):i)}function patchDOMProp(e,t,i,r,n){if(t==="innerHTML"||t==="textContent"){i!=null&&(e[t]=t==="innerHTML"?unsafeToTrustedHTML(i):i);return}const a=e.tagName;if(t==="value"&&a!=="PROGRESS"&&!a.includes("-")){const s=a==="OPTION"?e.getAttribute("value")||"":e.value,l=i==null?e.type==="checkbox"?"on":"":String(i);(s!==l||!("_value"in e))&&(e.value=l),i==null&&e.removeAttribute(t),e._value=i;return}let o=!1;if(i===""||i==null){const s=typeof e[t];s==="boolean"?i=includeBooleanAttr(i):i==null&&s==="string"?(i="",o=!0):s==="number"&&(i=0,o=!0)}try{e[t]=i}catch{}o&&e.removeAttribute(n||t)}function addEventListener(e,t,i,r){e.addEventListener(t,i,r)}function removeEventListener(e,t,i,r){e.removeEventListener(t,i,r)}const veiKey=Symbol("_vei");function patchEvent(e,t,i,r,n=null){const a=e[veiKey]||(e[veiKey]={}),o=a[t];if(r&&o)o.value=r;else{const[s,l]=parseName(t);if(r){const c=a[t]=createInvoker(r,n);addEventListener(e,s,c,l)}else o&&(removeEventListener(e,s,o,l),a[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let r;for(;r=e.match(optionsModifierRE);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(r,i.value),t,5,[r])};return i.value=e,i.attached=getNow(),i}function patchStopImmediatePropagation(e,t){if(isArray(t)){const i=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{i.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const isNativeOn=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,patchProp=(e,t,i,r,n,a)=>{const o=n==="svg";t==="class"?patchClass(e,r,o):t==="style"?patchStyle(e,i,r):isOn(t)?isModelListener(t)||patchEvent(e,t,i,r,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,r,o))?(patchDOMProp(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&patchAttr(e,t,r,o,a,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!isString(r))?patchDOMProp(e,camelize(t),r,a,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),patchAttr(e,t,r,o))};function shouldSetAsProp(e,t,i,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&isNativeOn(t)&&isFunction(i));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return isNativeOn(t)&&isString(i)?!1:t in e}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>systemModifiers.some(i=>e[`${i}Key`]&&!t.includes(i))},withModifiers=(e,t)=>{const i=e._withMods||(e._withMods={}),r=t.join(".");return i[r]||(i[r]=((n,...a)=>{for(let o=0;o<t.length;o++){const s=modifierGuards[t[o]];if(s&&s(n,t))return}return e(n,...a)}))},rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=((...e)=>{const t=ensureRenderer().createApp(...e),{mount:i}=t;return t.mount=r=>{const n=normalizeContainer(r);if(!n)return;const a=t._component;!isFunction(a)&&!a.render&&!a.template&&(a.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=i(n,!1,resolveRootNamespace(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t});function resolveRootNamespace(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function normalizeContainer(e){return isString(e)?document.querySelector(e):e}const _export_sfc=(e,t)=>{const i=e.__vccOpts||e;for(const[r,n]of t)i[r]=n;return i},__default__$1={name:"About",data(){return{}}},_sfc_main$3=Object.assign(__default__$1,{emits:["close"],setup(e,{emit:t}){const i=t;function r(){i("close")}return(n,a)=>(openBlock(),createElementBlock("div",{class:"about-wrapper",onClick:r},[createBaseVNode("div",{class:"about-container",onClick:a[0]||(a[0]=withModifiers(()=>{},["stop"]))},[...a[1]||(a[1]=[createStaticVNode('<p class="about-header" data-v-d230d6f6>about audmdex</p><p data-v-d230d6f6><strong data-v-d230d6f6>audmdex</strong> lets you quickly inspect audio metadata right in your browser. <br data-v-d230d6f6><br data-v-d230d6f6> file uploading is <strong data-v-d230d6f6>client-sided</strong>, so is the processing. no files are uploaded or sent to any server, everything is read directly into your computer&#39;s temporary memory, and disappears the moment you close or refresh the page.<br data-v-d230d6f6><br data-v-d230d6f6> audmdex uses the library <strong data-v-d230d6f6>music-metadata-browser</strong><a href="https://github.com/Borewit/music-metadata-browser" target="_blank" data-v-d230d6f6></a> to extract metadata from files. it&#39;s fast, reliable, and built for safe in-browser analysis. no ads, no tracking, no nonsense. <br data-v-d230d6f6><br data-v-d230d6f6>just a simple tool that works anywhere, <strong data-v-d230d6f6>whenever you need it.</strong></p><br data-v-d230d6f6><br data-v-d230d6f6><br data-v-d230d6f6><p data-v-d230d6f6><a href="https://github.com/ryandufault" target="_blank" data-v-d230d6f6>made with care by ryan dufault</a></p>',6)])])]))}}),About=_export_sfc(_sfc_main$3,[["__scopeId","data-v-d230d6f6"]]);var lib$3={},browser$3={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var e=1e3,t=e*60,i=t*60,r=i*24,n=r*7,a=r*365.25;ms=function(d,m){m=m||{};var f=typeof d;if(f==="string"&&d.length>0)return o(d);if(f==="number"&&isFinite(d))return m.long?l(d):s(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function o(d){if(d=String(d),!(d.length>100)){var m=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(d);if(m){var f=parseFloat(m[1]),u=(m[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return f*a;case"weeks":case"week":case"w":return f*n;case"days":case"day":case"d":return f*r;case"hours":case"hour":case"hrs":case"hr":case"h":return f*i;case"minutes":case"minute":case"mins":case"min":case"m":return f*t;case"seconds":case"second":case"secs":case"sec":case"s":return f*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function s(d){var m=Math.abs(d);return m>=r?Math.round(d/r)+"d":m>=i?Math.round(d/i)+"h":m>=t?Math.round(d/t)+"m":m>=e?Math.round(d/e)+"s":d+"ms"}function l(d){var m=Math.abs(d);return m>=r?c(d,m,r,"day"):m>=i?c(d,m,i,"hour"):m>=t?c(d,m,t,"minute"):m>=e?c(d,m,e,"second"):d+" ms"}function c(d,m,f,u){var b=m>=f*1.5;return Math.round(d/f)+" "+u+(b?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function e(t){r.debug=r,r.default=r,r.coerce=c,r.disable=s,r.enable=a,r.enabled=l,r.humanize=requireMs(),r.destroy=d,Object.keys(t).forEach(m=>{r[m]=t[m]}),r.names=[],r.skips=[],r.formatters={};function i(m){let f=0;for(let u=0;u<m.length;u++)f=(f<<5)-f+m.charCodeAt(u),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=i;function r(m){let f,u=null,b,y;function w(...T){if(!w.enabled)return;const E=w,R=Number(new Date),C=R-(f||R);E.diff=C,E.prev=f,E.curr=R,f=R,T[0]=r.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let B=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(_,x)=>{if(_==="%%")return"%";B++;const Z=r.formatters[x];if(typeof Z=="function"){const L=T[B];_=Z.call(E,L),T.splice(B,1),B--}return _}),r.formatArgs.call(E,T),(E.log||r.log).apply(E,T)}return w.namespace=m,w.useColors=r.useColors(),w.color=r.selectColor(m),w.extend=n,w.destroy=r.destroy,Object.defineProperty(w,"enabled",{enumerable:!0,configurable:!1,get:()=>u!==null?u:(b!==r.namespaces&&(b=r.namespaces,y=r.enabled(m)),y),set:T=>{u=T}}),typeof r.init=="function"&&r.init(w),w}function n(m,f){const u=r(this.namespace+(typeof f>"u"?":":f)+m);return u.log=this.log,u}function a(m){r.save(m),r.namespaces=m,r.names=[],r.skips=[];const f=(typeof m=="string"?m:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const u of f)u[0]==="-"?r.skips.push(u.slice(1)):r.names.push(u)}function o(m,f){let u=0,b=0,y=-1,w=0;for(;u<m.length;)if(b<f.length&&(f[b]===m[u]||f[b]==="*"))f[b]==="*"?(y=b,w=u,b++):(u++,b++);else if(y!==-1)b=y+1,w++,u=w;else return!1;for(;b<f.length&&f[b]==="*";)b++;return b===f.length}function s(){const m=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),m}function l(m){for(const f of r.skips)if(o(m,f))return!1;for(const f of r.names)if(o(m,f))return!0;return!1}function c(m){return m instanceof Error?m.stack||m.message:m}function d(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}return common=e,common}var hasRequiredBrowser$3;function requireBrowser$3(){return hasRequiredBrowser$3||(hasRequiredBrowser$3=1,(function(e,t){var i={};t.formatArgs=n,t.save=a,t.load=o,t.useColors=r,t.storage=s(),t.destroy=(()=>{let c=!1;return()=>{c||(c=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let c;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(c=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(c[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function n(c){if(c[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+c[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const d="color: "+this.color;c.splice(1,0,d,"color: inherit");let m=0,f=0;c[0].replace(/%[a-zA-Z%]/g,u=>{u!=="%%"&&(m++,u==="%c"&&(f=m))}),c.splice(f,0,d)}t.log=console.debug||console.log||(()=>{});function a(c){try{c?t.storage.setItem("debug",c):t.storage.removeItem("debug")}catch{}}function o(){let c;try{c=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!c&&typeof process<"u"&&"env"in process&&(c=i.DEBUG),c}function s(){try{return localStorage}catch{}}e.exports=requireCommon()(t);const{formatters:l}=e.exports;l.j=function(c){try{return JSON.stringify(c)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}}})(browser$3,browser$3.exports)),browser$3.exports}var core$2={},core$1={},ReadStreamTokenizer={},AbstractTokenizer={},lib$2={},EndOfFileStream={},hasRequiredEndOfFileStream;function requireEndOfFileStream(){return hasRequiredEndOfFileStream||(hasRequiredEndOfFileStream=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EndOfStreamError=e.defaultMessages=void 0,e.defaultMessages="End-Of-Stream";class t extends Error{constructor(){super(e.defaultMessages)}}e.EndOfStreamError=t})(EndOfFileStream)),EndOfFileStream}var StreamReader={},Deferred={},hasRequiredDeferred;function requireDeferred(){if(hasRequiredDeferred)return Deferred;hasRequiredDeferred=1,Object.defineProperty(Deferred,"__esModule",{value:!0}),Deferred.Deferred=void 0;let e=class{constructor(){this.resolve=()=>null,this.reject=()=>null,this.promise=new Promise((i,r)=>{this.reject=r,this.resolve=i})}};return Deferred.Deferred=e,Deferred}var hasRequiredStreamReader;function requireStreamReader(){return hasRequiredStreamReader||(hasRequiredStreamReader=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;const t=requireEndOfFileStream(),i=requireDeferred();var r=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});const n=1*1024*1024;class a{constructor(s){if(this.s=s,this.deferred=null,this.endOfStream=!1,this.peekQueue=[],!s.read||!s.once)throw new Error("Expected an instance of stream.Readable");this.s.once("end",()=>this.reject(new t.EndOfStreamError)),this.s.once("error",l=>this.reject(l)),this.s.once("close",()=>this.reject(new Error("Stream closed")))}async peek(s,l,c){const d=await this.read(s,l,c);return this.peekQueue.push(s.subarray(l,l+d)),d}async read(s,l,c){if(c===0)return 0;if(this.peekQueue.length===0&&this.endOfStream)throw new t.EndOfStreamError;let d=c,m=0;for(;this.peekQueue.length>0&&d>0;){const f=this.peekQueue.pop();if(!f)throw new Error("peekData should be defined");const u=Math.min(f.length,d);s.set(f.subarray(0,u),l+m),m+=u,d-=u,u<f.length&&this.peekQueue.push(f.subarray(u))}for(;d>0&&!this.endOfStream;){const f=Math.min(d,n),u=await this.readFromStream(s,l+m,f);if(m+=u,u<f)break;d-=u}return m}async readFromStream(s,l,c){const d=this.s.read(c);if(d)return s.set(d,l),d.length;{const m={buffer:s,offset:l,length:c,deferred:new i.Deferred};return this.deferred=m.deferred,this.s.once("readable",()=>{this.readDeferred(m)}),m.deferred.promise}}readDeferred(s){const l=this.s.read(s.length);l?(s.buffer.set(l,s.offset),s.deferred.resolve(l.length),this.deferred=null):this.s.once("readable",()=>{this.readDeferred(s)})}reject(s){this.endOfStream=!0,this.deferred&&(this.deferred.reject(s),this.deferred=null)}}e.StreamReader=a})(StreamReader)),StreamReader}var hasRequiredLib$3;function requireLib$3(){return hasRequiredLib$3||(hasRequiredLib$3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.StreamReader=e.EndOfStreamError=void 0;var t=requireEndOfFileStream();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return t.EndOfStreamError}});var i=requireStreamReader();Object.defineProperty(e,"StreamReader",{enumerable:!0,get:function(){return i.StreamReader}})})(lib$2)),lib$2}var hasRequiredAbstractTokenizer;function requireAbstractTokenizer(){if(hasRequiredAbstractTokenizer)return AbstractTokenizer;hasRequiredAbstractTokenizer=1,Object.defineProperty(AbstractTokenizer,"__esModule",{value:!0}),AbstractTokenizer.AbstractTokenizer=void 0;const e=requireLib$3();let t=class{constructor(r){this.position=0,this.numBuffer=new Uint8Array(8),this.fileInfo=r||{}}async readToken(r,n=this.position){const a=Buffer.alloc(r.len);if(await this.readBuffer(a,{position:n})<r.len)throw new e.EndOfStreamError;return r.get(a,0)}async peekToken(r,n=this.position){const a=Buffer.alloc(r.len);if(await this.peekBuffer(a,{position:n})<r.len)throw new e.EndOfStreamError;return r.get(a,0)}async readNumber(r){if(await this.readBuffer(this.numBuffer,{length:r.len})<r.len)throw new e.EndOfStreamError;return r.get(this.numBuffer,0)}async peekNumber(r){if(await this.peekBuffer(this.numBuffer,{length:r.len})<r.len)throw new e.EndOfStreamError;return r.get(this.numBuffer,0)}async ignore(r){if(this.fileInfo.size!==void 0){const n=this.fileInfo.size-this.position;if(r>n)return this.position+=n,n}return this.position+=r,r}async close(){}normalizeOptions(r,n){if(n&&n.position!==void 0&&n.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");return n?{mayBeLess:n.mayBeLess===!0,offset:n.offset?n.offset:0,length:n.length?n.length:r.length-(n.offset?n.offset:0),position:n.position?n.position:this.position}:{mayBeLess:!1,offset:0,length:r.length,position:this.position}}};return AbstractTokenizer.AbstractTokenizer=t,AbstractTokenizer}var hasRequiredReadStreamTokenizer;function requireReadStreamTokenizer(){if(hasRequiredReadStreamTokenizer)return ReadStreamTokenizer;hasRequiredReadStreamTokenizer=1,Object.defineProperty(ReadStreamTokenizer,"__esModule",{value:!0}),ReadStreamTokenizer.ReadStreamTokenizer=void 0;const e=requireAbstractTokenizer(),t=requireLib$3(),i=256e3;let r=class extends e.AbstractTokenizer{constructor(a,o){super(o),this.streamReader=new t.StreamReader(a)}async getFileInfo(){return this.fileInfo}async readBuffer(a,o){const s=this.normalizeOptions(a,o),l=s.position-this.position;if(l>0)return await this.ignore(l),this.readBuffer(a,o);if(l<0)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");if(s.length===0)return 0;const c=await this.streamReader.read(a,s.offset,s.length);if(this.position+=c,(!o||!o.mayBeLess)&&c<s.length)throw new t.EndOfStreamError;return c}async peekBuffer(a,o){const s=this.normalizeOptions(a,o);let l=0;if(s.position){const c=s.position-this.position;if(c>0){const d=new Uint8Array(s.length+c);return l=await this.peekBuffer(d,{mayBeLess:s.mayBeLess}),a.set(d.subarray(c),s.offset),l-c}else if(c<0)throw new Error("Cannot peek from a negative offset in a stream")}if(s.length>0){try{l=await this.streamReader.peek(a,s.offset,s.length)}catch(c){if(o&&o.mayBeLess&&c instanceof t.EndOfStreamError)return 0;throw c}if(!s.mayBeLess&&l<s.length)throw new t.EndOfStreamError}return l}async ignore(a){const o=Math.min(i,a),s=new Uint8Array(o);let l=0;for(;l<a;){const c=a-l,d=await this.readBuffer(s,{length:Math.min(o,c)});if(d<0)return d;l+=d}return l}};return ReadStreamTokenizer.ReadStreamTokenizer=r,ReadStreamTokenizer}var BufferTokenizer={},hasRequiredBufferTokenizer;function requireBufferTokenizer(){if(hasRequiredBufferTokenizer)return BufferTokenizer;hasRequiredBufferTokenizer=1,Object.defineProperty(BufferTokenizer,"__esModule",{value:!0}),BufferTokenizer.BufferTokenizer=void 0;const e=requireLib$3(),t=requireAbstractTokenizer();let i=class extends t.AbstractTokenizer{constructor(n,a){super(a),this.uint8Array=n,this.fileInfo.size=this.fileInfo.size?this.fileInfo.size:n.length}async readBuffer(n,a){if(a&&a.position){if(a.position<this.position)throw new Error("`options.position` must be equal or greater than `tokenizer.position`");this.position=a.position}const o=await this.peekBuffer(n,a);return this.position+=o,o}async peekBuffer(n,a){const o=this.normalizeOptions(n,a),s=Math.min(this.uint8Array.length-o.position,o.length);if(!o.mayBeLess&&s<o.length)throw new e.EndOfStreamError;return n.set(this.uint8Array.subarray(o.position,o.position+s),o.offset),s}async close(){}};return BufferTokenizer.BufferTokenizer=i,BufferTokenizer}var hasRequiredCore$2;function requireCore$2(){return hasRequiredCore$2||(hasRequiredCore$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fromBuffer=e.fromStream=e.EndOfStreamError=void 0;const t=requireReadStreamTokenizer(),i=requireBufferTokenizer();var r=requireLib$3();Object.defineProperty(e,"EndOfStreamError",{enumerable:!0,get:function(){return r.EndOfStreamError}});function n(o,s){return s=s||{},new t.ReadStreamTokenizer(o,s)}e.fromStream=n;function a(o,s){return new i.BufferTokenizer(o,s)}e.fromBuffer=a})(core$1)),core$1}var ParserFactory={},lib$1={},ieee754={};var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(e,t,i,r,n){var a,o,s=n*8-r-1,l=(1<<s)-1,c=l>>1,d=-7,m=i?n-1:0,f=i?-1:1,u=e[t+m];for(m+=f,a=u&(1<<-d)-1,u>>=-d,d+=s;d>0;a=a*256+e[t+m],m+=f,d-=8);for(o=a&(1<<-d)-1,a>>=-d,d+=r;d>0;o=o*256+e[t+m],m+=f,d-=8);if(a===0)a=1-c;else{if(a===l)return o?NaN:(u?-1:1)*(1/0);o=o+Math.pow(2,r),a=a-c}return(u?-1:1)*o*Math.pow(2,a-r)},ieee754.write=function(e,t,i,r,n,a){var o,s,l,c=a*8-n-1,d=(1<<c)-1,m=d>>1,f=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,u=r?0:a-1,b=r?1:-1,y=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=d):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+m>=1?t+=f/l:t+=f*Math.pow(2,1-m),t*l>=2&&(o++,l/=2),o+m>=d?(s=0,o=d):o+m>=1?(s=(t*l-1)*Math.pow(2,n),o=o+m):(s=t*Math.pow(2,m-1)*Math.pow(2,n),o=0));n>=8;e[i+u]=s&255,u+=b,s/=256,n-=8);for(o=o<<n|s,c+=n;c>0;e[i+u]=o&255,u+=b,o/=256,c-=8);e[i+u-b]|=y*128}),ieee754}var hasRequiredLib$2;function requireLib$2(){return hasRequiredLib$2||(hasRequiredLib$2=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AnsiStringType=e.StringType=e.BufferType=e.Uint8ArrayType=e.IgnoreType=e.Float80_LE=e.Float80_BE=e.Float64_LE=e.Float64_BE=e.Float32_LE=e.Float32_BE=e.Float16_LE=e.Float16_BE=e.INT64_BE=e.UINT64_BE=e.INT64_LE=e.UINT64_LE=e.INT32_LE=e.INT32_BE=e.INT24_BE=e.INT24_LE=e.INT16_LE=e.INT16_BE=e.INT8=e.UINT32_BE=e.UINT32_LE=e.UINT24_BE=e.UINT24_LE=e.UINT16_BE=e.UINT16_LE=e.UINT8=void 0;const t=requireIeee754();function i(l){return new DataView(l.buffer,l.byteOffset)}e.UINT8={len:1,get(l,c){return i(l).getUint8(c)},put(l,c,d){return i(l).setUint8(c,d),c+1}},e.UINT16_LE={len:2,get(l,c){return i(l).getUint16(c,!0)},put(l,c,d){return i(l).setUint16(c,d,!0),c+2}},e.UINT16_BE={len:2,get(l,c){return i(l).getUint16(c)},put(l,c,d){return i(l).setUint16(c,d),c+2}},e.UINT24_LE={len:3,get(l,c){const d=i(l);return d.getUint8(c)+(d.getUint16(c+1,!0)<<8)},put(l,c,d){const m=i(l);return m.setUint8(c,d&255),m.setUint16(c+1,d>>8,!0),c+3}},e.UINT24_BE={len:3,get(l,c){const d=i(l);return(d.getUint16(c)<<8)+d.getUint8(c+2)},put(l,c,d){const m=i(l);return m.setUint16(c,d>>8),m.setUint8(c+2,d&255),c+3}},e.UINT32_LE={len:4,get(l,c){return i(l).getUint32(c,!0)},put(l,c,d){return i(l).setUint32(c,d,!0),c+4}},e.UINT32_BE={len:4,get(l,c){return i(l).getUint32(c)},put(l,c,d){return i(l).setUint32(c,d),c+4}},e.INT8={len:1,get(l,c){return i(l).getInt8(c)},put(l,c,d){return i(l).setInt8(c,d),c+1}},e.INT16_BE={len:2,get(l,c){return i(l).getInt16(c)},put(l,c,d){return i(l).setInt16(c,d),c+2}},e.INT16_LE={len:2,get(l,c){return i(l).getInt16(c,!0)},put(l,c,d){return i(l).setInt16(c,d,!0),c+2}},e.INT24_LE={len:3,get(l,c){const d=e.UINT24_LE.get(l,c);return d>8388607?d-16777216:d},put(l,c,d){const m=i(l);return m.setUint8(c,d&255),m.setUint16(c+1,d>>8,!0),c+3}},e.INT24_BE={len:3,get(l,c){const d=e.UINT24_BE.get(l,c);return d>8388607?d-16777216:d},put(l,c,d){const m=i(l);return m.setUint16(c,d>>8),m.setUint8(c+2,d&255),c+3}},e.INT32_BE={len:4,get(l,c){return i(l).getInt32(c)},put(l,c,d){return i(l).setInt32(c,d),c+4}},e.INT32_LE={len:4,get(l,c){return i(l).getInt32(c,!0)},put(l,c,d){return i(l).setInt32(c,d,!0),c+4}},e.UINT64_LE={len:8,get(l,c){return i(l).getBigUint64(c,!0)},put(l,c,d){return i(l).setBigUint64(c,d,!0),c+8}},e.INT64_LE={len:8,get(l,c){return i(l).getBigInt64(c,!0)},put(l,c,d){return i(l).setBigInt64(c,d,!0),c+8}},e.UINT64_BE={len:8,get(l,c){return i(l).getBigUint64(c)},put(l,c,d){return i(l).setBigUint64(c,d),c+8}},e.INT64_BE={len:8,get(l,c){return i(l).getBigInt64(c)},put(l,c,d){return i(l).setBigInt64(c,d),c+8}},e.Float16_BE={len:2,get(l,c){return t.read(l,c,!1,10,this.len)},put(l,c,d){return t.write(l,d,c,!1,10,this.len),c+this.len}},e.Float16_LE={len:2,get(l,c){return t.read(l,c,!0,10,this.len)},put(l,c,d){return t.write(l,d,c,!0,10,this.len),c+this.len}},e.Float32_BE={len:4,get(l,c){return i(l).getFloat32(c)},put(l,c,d){return i(l).setFloat32(c,d),c+4}},e.Float32_LE={len:4,get(l,c){return i(l).getFloat32(c,!0)},put(l,c,d){return i(l).setFloat32(c,d,!0),c+4}},e.Float64_BE={len:8,get(l,c){return i(l).getFloat64(c)},put(l,c,d){return i(l).setFloat64(c,d),c+8}},e.Float64_LE={len:8,get(l,c){return i(l).getFloat64(c,!0)},put(l,c,d){return i(l).setFloat64(c,d,!0),c+8}},e.Float80_BE={len:10,get(l,c){return t.read(l,c,!1,63,this.len)},put(l,c,d){return t.write(l,d,c,!1,63,this.len),c+this.len}},e.Float80_LE={len:10,get(l,c){return t.read(l,c,!0,63,this.len)},put(l,c,d){return t.write(l,d,c,!0,63,this.len),c+this.len}};class r{constructor(c){this.len=c}get(c,d){}}e.IgnoreType=r;class n{constructor(c){this.len=c}get(c,d){return c.subarray(d,d+this.len)}}e.Uint8ArrayType=n;class a{constructor(c){this.len=c}get(c,d){return Buffer.from(c.subarray(d,d+this.len))}}e.BufferType=a;class o{constructor(c,d){this.len=c,this.encoding=d}get(c,d){return Buffer.from(c).toString(this.encoding,d,d+this.len)}}e.StringType=o;class s{constructor(c){this.len=c}static decode(c,d,m){let f="";for(let u=d;u<m;++u)f+=s.codePointToString(s.singleByteDecoder(c[u]));return f}static inRange(c,d,m){return d<=c&&c<=m}static codePointToString(c){return c<=65535?String.fromCharCode(c):(c-=65536,String.fromCharCode((c>>10)+55296,(c&1023)+56320))}static singleByteDecoder(c){if(s.inRange(c,0,127))return c;const d=s.windows1252[c-128];if(d===null)throw Error("invaliding encoding");return d}get(c,d=0){return s.decode(c,d,d+this.len)}}e.AnsiStringType=s,s.windows1252=[8364,129,8218,402,8222,8230,8224,8225,710,8240,352,8249,338,141,381,143,144,8216,8217,8220,8221,8226,8211,8212,732,8482,353,8250,339,157,382,376,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223,224,225,226,227,228,229,230,231,232,233,234,235,236,237,238,239,240,241,242,243,244,245,246,247,248,249,250,251,252,253,254,255]})(lib$1)),lib$1}var util$1={},hasRequiredUtil$2;function requireUtil$2(){return hasRequiredUtil$2||(hasRequiredUtil$2=1,util$1.stringToBytes=e=>[...e].map(t=>t.charCodeAt(0)),util$1.tarHeaderChecksumMatches=(e,t=0)=>{const i=parseInt(e.toString("utf8",148,154).replace(/\0.*$/,"").trim(),8);if(isNaN(i))return!1;let r=256;for(let n=t;n<t+148;n++)r+=e[n];for(let n=t+156;n<t+512;n++)r+=e[n];return i===r},util$1.uint32SyncSafeToken={get:(e,t)=>e[t+3]&127|e[t+2]<<7|e[t+1]<<14|e[t]<<21,len:4}),util$1}var supported,hasRequiredSupported;function requireSupported(){return hasRequiredSupported||(hasRequiredSupported=1,supported={extensions:["jpg","png","apng","gif","webp","flif","xcf","cr2","cr3","orf","arw","dng","nef","rw2","raf","tif","bmp","icns","jxr","psd","indd","zip","tar","rar","gz","bz2","7z","dmg","mp4","mid","mkv","webm","mov","avi","mpg","mp2","mp3","m4a","oga","ogg","ogv","opus","flac","wav","spx","amr","pdf","epub","exe","swf","rtf","wasm","woff","woff2","eot","ttf","otf","ico","flv","ps","xz","sqlite","nes","crx","xpi","cab","deb","ar","rpm","Z","lz","cfb","mxf","mts","blend","bpg","docx","pptx","xlsx","3gp","3g2","jp2","jpm","jpx","mj2","aif","qcp","odt","ods","odp","xml","mobi","heic","cur","ktx","ape","wv","dcm","ics","glb","pcap","dsf","lnk","alias","voc","ac3","m4v","m4p","m4b","f4v","f4p","f4b","f4a","mie","asf","ogm","ogx","mpc","arrow","shp","aac","mp1","it","s3m","xm","ai","skp","avif","eps","lzh","pgp","asar","stl","chm","3mf","zst","jxl","vcf"],mimeTypes:["image/jpeg","image/png","image/gif","image/webp","image/flif","image/x-xcf","image/x-canon-cr2","image/x-canon-cr3","image/tiff","image/bmp","image/vnd.ms-photo","image/vnd.adobe.photoshop","application/x-indesign","application/epub+zip","application/x-xpinstall","application/vnd.oasis.opendocument.text","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/zip","application/x-tar","application/x-rar-compressed","application/gzip","application/x-bzip2","application/x-7z-compressed","application/x-apple-diskimage","application/x-apache-arrow","video/mp4","audio/midi","video/x-matroska","video/webm","video/quicktime","video/vnd.avi","audio/vnd.wave","audio/qcelp","audio/x-ms-asf","video/x-ms-asf","application/vnd.ms-asf","video/mpeg","video/3gpp","audio/mpeg","audio/mp4","audio/opus","video/ogg","audio/ogg","application/ogg","audio/x-flac","audio/ape","audio/wavpack","audio/amr","application/pdf","application/x-msdownload","application/x-shockwave-flash","application/rtf","application/wasm","font/woff","font/woff2","application/vnd.ms-fontobject","font/ttf","font/otf","image/x-icon","video/x-flv","application/postscript","application/eps","application/x-xz","application/x-sqlite3","application/x-nintendo-nes-rom","application/x-google-chrome-extension","application/vnd.ms-cab-compressed","application/x-deb","application/x-unix-archive","application/x-rpm","application/x-compress","application/x-lzip","application/x-cfb","application/x-mie","application/mxf","video/mp2t","application/x-blender","image/bpg","image/jp2","image/jpx","image/jpm","image/mj2","audio/aiff","application/xml","application/x-mobipocket-ebook","image/heif","image/heif-sequence","image/heic","image/heic-sequence","image/icns","image/ktx","application/dicom","audio/x-musepack","text/calendar","text/vcard","model/gltf-binary","application/vnd.tcpdump.pcap","audio/x-dsf","application/x.ms.shortcut","application/x.apple.alias","audio/x-voc","audio/vnd.dolby.dd-raw","audio/x-m4a","image/apng","image/x-olympus-orf","image/x-sony-arw","image/x-adobe-dng","image/x-nikon-nef","image/x-panasonic-rw2","image/x-fujifilm-raf","video/x-m4v","video/3gpp2","application/x-esri-shape","audio/aac","audio/x-it","audio/x-s3m","audio/x-xm","video/MP1S","video/MP2P","application/vnd.sketchup.skp","image/avif","application/x-lzh-compressed","application/pgp-encrypted","application/x-asar","model/stl","application/vnd.ms-htmlhelp","model/3mf","image/jxl","application/zstd"]}),supported}var core,hasRequiredCore$1;function requireCore$1(){if(hasRequiredCore$1)return core;hasRequiredCore$1=1;const Token=requireLib$2(),strtok3=requireCore$2(),{stringToBytes,tarHeaderChecksumMatches,uint32SyncSafeToken}=requireUtil$2(),supported=requireSupported(),minimumBytes=4100;async function fromStream(e){const t=await strtok3.fromStream(e);try{return await fromTokenizer(t)}finally{await t.close()}}async function fromBuffer(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||Buffer.isBuffer(e)))throw new TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof e}\``);const t=e instanceof Buffer?e:Buffer.from(e);if(!(t&&t.length>1))return;const i=strtok3.fromBuffer(t);return fromTokenizer(i)}function _check(e,t,i){i={offset:0,...i};for(const[r,n]of t.entries())if(i.mask){if(n!==(i.mask[r]&e[r+i.offset]))return!1}else if(n!==e[r+i.offset])return!1;return!0}async function fromTokenizer(e){try{return _fromTokenizer(e)}catch(t){if(!(t instanceof strtok3.EndOfStreamError))throw t}}async function _fromTokenizer(e){let t=Buffer.alloc(minimumBytes);const i=12,r=(a,o)=>_check(t,a,o),n=(a,o)=>r(stringToBytes(a),o);if(e.fileInfo.size||(e.fileInfo.size=Number.MAX_SAFE_INTEGER),await e.peekBuffer(t,{length:i,mayBeLess:!0}),r([66,77]))return{ext:"bmp",mime:"image/bmp"};if(r([11,119]))return{ext:"ac3",mime:"audio/vnd.dolby.dd-raw"};if(r([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(r([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if(r([37,33]))return await e.peekBuffer(t,{length:24,mayBeLess:!0}),n("PS-Adobe-",{offset:2})&&n(" EPSF-",{offset:14})?{ext:"eps",mime:"application/eps"}:{ext:"ps",mime:"application/postscript"};if(r([31,160])||r([31,157]))return{ext:"Z",mime:"application/x-compress"};if(r([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(r([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(r([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(r([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(n("ID3")){await e.ignore(6);const a=await e.readToken(uint32SyncSafeToken);return e.position+a>e.fileInfo.size?{ext:"mp3",mime:"audio/mpeg"}:(await e.ignore(a),fromTokenizer(e))}if(n("MP+"))return{ext:"mpc",mime:"audio/x-musepack"};if((t[0]===67||t[0]===70)&&r([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(r([71,73,70]))return{ext:"gif",mime:"image/gif"};if(n("FLIF"))return{ext:"flif",mime:"image/flif"};if(n("8BPS"))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(n("WEBP",{offset:8}))return{ext:"webp",mime:"image/webp"};if(n("MPCK"))return{ext:"mpc",mime:"audio/x-musepack"};if(n("FORM"))return{ext:"aif",mime:"audio/aiff"};if(n("icns",{offset:0}))return{ext:"icns",mime:"image/icns"};if(r([80,75,3,4])){try{for(;e.position+30<e.fileInfo.size;){await e.readBuffer(t,{length:30});const a={compressedSize:t.readUInt32LE(18),uncompressedSize:t.readUInt32LE(22),filenameLength:t.readUInt16LE(26),extraFieldLength:t.readUInt16LE(28)};if(a.filename=await e.readToken(new Token.StringType(a.filenameLength,"utf-8")),await e.ignore(a.extraFieldLength),a.filename==="META-INF/mozilla.rsa")return{ext:"xpi",mime:"application/x-xpinstall"};if(a.filename.endsWith(".rels")||a.filename.endsWith(".xml"))switch(a.filename.split("/")[0]){case"_rels":break;case"word":return{ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"};case"ppt":return{ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"};case"xl":return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};default:break}if(a.filename.startsWith("xl/"))return{ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"};if(a.filename.startsWith("3D/")&&a.filename.endsWith(".model"))return{ext:"3mf",mime:"model/3mf"};if(a.filename==="mimetype"&&a.compressedSize===a.uncompressedSize)switch(await e.readToken(new Token.StringType(a.compressedSize,"utf-8"))){case"application/epub+zip":return{ext:"epub",mime:"application/epub+zip"};case"application/vnd.oasis.opendocument.text":return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};case"application/vnd.oasis.opendocument.spreadsheet":return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};case"application/vnd.oasis.opendocument.presentation":return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};default:}if(a.compressedSize===0){let o=-1;for(;o<0&&e.position<e.fileInfo.size;)await e.peekBuffer(t,{mayBeLess:!0}),o=t.indexOf("504B0304",0,"hex"),await e.ignore(o>=0?o:t.length)}else await e.ignore(a.compressedSize)}}catch(a){if(!(a instanceof strtok3.EndOfStreamError))throw a}return{ext:"zip",mime:"application/zip"}}if(n("OggS")){await e.ignore(28);const a=Buffer.alloc(8);return await e.readBuffer(a),_check(a,[79,112,117,115,72,101,97,100])?{ext:"opus",mime:"audio/opus"}:_check(a,[128,116,104,101,111,114,97])?{ext:"ogv",mime:"video/ogg"}:_check(a,[1,118,105,100,101,111,0])?{ext:"ogm",mime:"video/ogg"}:_check(a,[127,70,76,65,67])?{ext:"oga",mime:"audio/ogg"}:_check(a,[83,112,101,101,120,32,32])?{ext:"spx",mime:"audio/ogg"}:_check(a,[1,118,111,114,98,105,115])?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"}}if(r([80,75])&&(t[2]===3||t[2]===5||t[2]===7)&&(t[3]===4||t[3]===6||t[3]===8))return{ext:"zip",mime:"application/zip"};if(n("ftyp",{offset:4})&&(t[8]&96)!==0){const a=t.toString("binary",8,12).replace("\0"," ").trim();switch(a){case"avif":return{ext:"avif",mime:"image/avif"};case"mif1":return{ext:"heic",mime:"image/heif"};case"msf1":return{ext:"heic",mime:"image/heif-sequence"};case"heic":case"heix":return{ext:"heic",mime:"image/heic"};case"hevc":case"hevx":return{ext:"heic",mime:"image/heic-sequence"};case"qt":return{ext:"mov",mime:"video/quicktime"};case"M4V":case"M4VH":case"M4VP":return{ext:"m4v",mime:"video/x-m4v"};case"M4P":return{ext:"m4p",mime:"video/mp4"};case"M4B":return{ext:"m4b",mime:"audio/mp4"};case"M4A":return{ext:"m4a",mime:"audio/x-m4a"};case"F4V":return{ext:"f4v",mime:"video/mp4"};case"F4P":return{ext:"f4p",mime:"video/mp4"};case"F4A":return{ext:"f4a",mime:"audio/mp4"};case"F4B":return{ext:"f4b",mime:"audio/mp4"};case"crx":return{ext:"cr3",mime:"image/x-canon-cr3"};default:return a.startsWith("3g")?a.startsWith("3g2")?{ext:"3g2",mime:"video/3gpp2"}:{ext:"3gp",mime:"video/3gpp"}:{ext:"mp4",mime:"video/mp4"}}}if(n("MThd"))return{ext:"mid",mime:"audio/midi"};if(n("wOFF")&&(r([0,1,0,0],{offset:4})||n("OTTO",{offset:4})))return{ext:"woff",mime:"font/woff"};if(n("wOF2")&&(r([0,1,0,0],{offset:4})||n("OTTO",{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(r([212,195,178,161])||r([161,178,195,212]))return{ext:"pcap",mime:"application/vnd.tcpdump.pcap"};if(n("DSD "))return{ext:"dsf",mime:"audio/x-dsf"};if(n("LZIP"))return{ext:"lz",mime:"application/x-lzip"};if(n("fLaC"))return{ext:"flac",mime:"audio/x-flac"};if(r([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(n("wvpk"))return{ext:"wv",mime:"audio/wavpack"};if(n("%PDF")){await e.ignore(1350);const a=10*1024*1024,o=Buffer.alloc(Math.min(a,e.fileInfo.size));return await e.readBuffer(o,{mayBeLess:!0}),o.includes(Buffer.from("AIPrivateData"))?{ext:"ai",mime:"application/postscript"}:{ext:"pdf",mime:"application/pdf"}}if(r([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(r([73,73,42,0]))return n("CR",{offset:8})?{ext:"cr2",mime:"image/x-canon-cr2"}:r([28,0,254,0],{offset:8})||r([31,0,11,0],{offset:8})?{ext:"nef",mime:"image/x-nikon-nef"}:r([8,0,0,0],{offset:4})&&(r([45,0,254,0],{offset:8})||r([39,0,254,0],{offset:8}))?{ext:"dng",mime:"image/x-adobe-dng"}:(t=Buffer.alloc(24),await e.peekBuffer(t),(r([16,251,134,1],{offset:4})||r([8,0,0,0],{offset:4}))&&r([0,254,0,4,0,1,0,0,0,1,0,0,0,3,1],{offset:9})?{ext:"arw",mime:"image/x-sony-arw"}:{ext:"tif",mime:"image/tiff"});if(r([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(n("MAC "))return{ext:"ape",mime:"audio/ape"};if(r([26,69,223,163])){async function a(){const d=await e.peekNumber(Token.UINT8);let m=128,f=0;for(;(d&m)===0&&m!==0;)++f,m>>=1;const u=Buffer.alloc(f+1);return await e.readBuffer(u),u}async function o(){const d=await a(),m=await a();m[0]^=128>>m.length-1;const f=Math.min(6,m.length);return{id:d.readUIntBE(0,d.length),len:m.readUIntBE(m.length-f,f)}}async function s(d,m){for(;m>0;){const f=await o();if(f.id===17026)return e.readToken(new Token.StringType(f.len,"utf-8"));await e.ignore(f.len),--m}}const l=await o();switch(await s(1,l.len)){case"webm":return{ext:"webm",mime:"video/webm"};case"matroska":return{ext:"mkv",mime:"video/x-matroska"};default:return}}if(r([82,73,70,70])){if(r([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(r([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(r([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(n("SQLi"))return{ext:"sqlite",mime:"application/x-sqlite3"};if(r([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(n("Cr24"))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(n("MSCF")||n("ISc("))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(r([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(r([197,208,211,198]))return{ext:"eps",mime:"application/eps"};if(r([40,181,47,253]))return{ext:"zst",mime:"application/zstd"};if(r([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(n("#!AMR"))return{ext:"amr",mime:"audio/amr"};if(n("{\\rtf"))return{ext:"rtf",mime:"application/rtf"};if(r([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(n("IMPM"))return{ext:"it",mime:"audio/x-it"};if(n("-lh0-",{offset:2})||n("-lh1-",{offset:2})||n("-lh2-",{offset:2})||n("-lh3-",{offset:2})||n("-lh4-",{offset:2})||n("-lh5-",{offset:2})||n("-lh6-",{offset:2})||n("-lh7-",{offset:2})||n("-lzs-",{offset:2})||n("-lz4-",{offset:2})||n("-lz5-",{offset:2})||n("-lhd-",{offset:2}))return{ext:"lzh",mime:"application/x-lzh-compressed"};if(r([0,0,1,186])){if(r([33],{offset:4,mask:[241]}))return{ext:"mpg",mime:"video/MP1S"};if(r([68],{offset:4,mask:[196]}))return{ext:"mpg",mime:"video/MP2P"}}if(n("ITSF"))return{ext:"chm",mime:"application/vnd.ms-htmlhelp"};if(r([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(n("<?xml "))return{ext:"xml",mime:"application/xml"};if(r([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(r([82,97,114,33,26,7])&&(t[6]===0||t[6]===1))return{ext:"rar",mime:"application/x-rar-compressed"};if(n("solid "))return{ext:"stl",mime:"model/stl"};if(n("BLENDER"))return{ext:"blend",mime:"application/x-blender"};if(n("!<arch>"))return await e.ignore(8),await e.readToken(new Token.StringType(13,"ascii"))==="debian-binary"?{ext:"deb",mime:"application/x-deb"}:{ext:"ar",mime:"application/x-unix-archive"};if(r([137,80,78,71,13,10,26,10])){await e.ignore(8);async function a(){return{length:await e.readToken(Token.INT32_BE),type:await e.readToken(new Token.StringType(4,"binary"))}}do{const o=await a();if(o.length<0)return;switch(o.type){case"IDAT":return{ext:"png",mime:"image/png"};case"acTL":return{ext:"apng",mime:"image/apng"};default:await e.ignore(o.length+4)}}while(e.position+8<e.fileInfo.size);return{ext:"png",mime:"image/png"}}if(r([65,82,82,79,87,49,0,0]))return{ext:"arrow",mime:"application/x-apache-arrow"};if(r([103,108,84,70,2,0,0,0]))return{ext:"glb",mime:"model/gltf-binary"};if(r([102,114,101,101],{offset:4})||r([109,100,97,116],{offset:4})||r([109,111,111,118],{offset:4})||r([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(r([73,73,82,79,8,0,0,0,24]))return{ext:"orf",mime:"image/x-olympus-orf"};if(n("gimp xcf "))return{ext:"xcf",mime:"image/x-xcf"};if(r([73,73,85,0,24,0,0,0,136,231,116,216]))return{ext:"rw2",mime:"image/x-panasonic-rw2"};if(r([48,38,178,117,142,102,207,17,166,217])){async function a(){const o=Buffer.alloc(16);return await e.readBuffer(o),{id:o,size:Number(await e.readToken(Token.UINT64_LE))}}for(await e.ignore(30);e.position+24<e.fileInfo.size;){const o=await a();let s=o.size-24;if(_check(o.id,[145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101])){const l=Buffer.alloc(16);if(s-=await e.readBuffer(l),_check(l,[64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"audio/x-ms-asf"};if(_check(l,[192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43]))return{ext:"asf",mime:"video/x-ms-asf"};break}await e.ignore(s)}return{ext:"asf",mime:"application/vnd.ms-asf"}}if(r([171,75,84,88,32,49,49,187,13,10,26,10]))return{ext:"ktx",mime:"image/ktx"};if((r([126,16,4])||r([126,24,4]))&&r([48,77,73,69],{offset:4}))return{ext:"mie",mime:"application/x-mie"};if(r([39,10,0,0,0,0,0,0,0,0,0,0],{offset:2}))return{ext:"shp",mime:"application/x-esri-shape"};if(r([0,0,0,12,106,80,32,32,13,10,135,10]))switch(await e.ignore(20),await e.readToken(new Token.StringType(4,"ascii"))){case"jp2 ":return{ext:"jp2",mime:"image/jp2"};case"jpx ":return{ext:"jpx",mime:"image/jpx"};case"jpm ":return{ext:"jpm",mime:"image/jpm"};case"mjp2":return{ext:"mj2",mime:"image/mj2"};default:return}if(r([255,10])||r([0,0,0,12,74,88,76,32,13,10,135,10]))return{ext:"jxl",mime:"image/jxl"};if(r([0,0,1,186])||r([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(r([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(r([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(r([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(r([208,207,17,224,161,177,26,225]))return{ext:"cfb",mime:"application/x-cfb"};if(await e.peekBuffer(t,{length:Math.min(256,e.fileInfo.size),mayBeLess:!0}),n("BEGIN:")){if(n("VCARD",{offset:6}))return{ext:"vcf",mime:"text/vcard"};if(n("VCALENDAR",{offset:6}))return{ext:"ics",mime:"text/calendar"}}if(n("FUJIFILMCCD-RAW"))return{ext:"raf",mime:"image/x-fujifilm-raf"};if(n("Extended Module:"))return{ext:"xm",mime:"audio/x-xm"};if(n("Creative Voice File"))return{ext:"voc",mime:"audio/x-voc"};if(r([4,0,0,0])&&t.length>=16){const a=t.readUInt32LE(12);if(a>12&&t.length>=a+16)try{const o=t.slice(16,a+16).toString();if(JSON.parse(o).files)return{ext:"asar",mime:"application/x-asar"}}catch{}}if(r([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(n("SCRM",{offset:44}))return{ext:"s3m",mime:"audio/x-s3m"};if(r([71],{offset:4})&&(r([71],{offset:192})||r([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(r([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(r([68,73,67,77],{offset:128}))return{ext:"dcm",mime:"application/dicom"};if(r([76,0,0,0,1,20,2,0,0,0,0,0,192,0,0,0,0,0,0,70]))return{ext:"lnk",mime:"application/x.ms.shortcut"};if(r([98,111,111,107,0,0,0,0,109,97,114,107,0,0,0,0]))return{ext:"alias",mime:"application/x.apple.alias"};if(r([76,80],{offset:34})&&(r([0,0,1],{offset:8})||r([1,0,2],{offset:8})||r([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(r([6,6,237,245,216,29,70,229,189,49,239,231,254,116,183,29]))return{ext:"indd",mime:"application/x-indesign"};if(await e.peekBuffer(t,{length:Math.min(512,e.fileInfo.size),mayBeLess:!0}),tarHeaderChecksumMatches(t))return{ext:"tar",mime:"application/x-tar"};if(r([255,254,255,14,83,0,107,0,101,0,116,0,99,0,104,0,85,0,112,0,32,0,77,0,111,0,100,0,101,0,108,0]))return{ext:"skp",mime:"application/vnd.sketchup.skp"};if(n("-----BEGIN PGP MESSAGE-----"))return{ext:"pgp",mime:"application/pgp-encrypted"};if(t.length>=2&&r([255,224],{offset:0,mask:[255,224]})){if(r([16],{offset:1,mask:[22]}))return r([8],{offset:1,mask:[8]})?{ext:"aac",mime:"audio/aac"}:{ext:"aac",mime:"audio/aac"};if(r([2],{offset:1,mask:[6]}))return{ext:"mp3",mime:"audio/mpeg"};if(r([4],{offset:1,mask:[6]}))return{ext:"mp2",mime:"audio/mpeg"};if(r([6],{offset:1,mask:[6]}))return{ext:"mp1",mime:"audio/mpeg"}}}const stream=readableStream=>new Promise((resolve,reject)=>{const stream=eval("require")("stream");readableStream.on("error",reject),readableStream.once("readable",async()=>{const e=new stream.PassThrough;let t;stream.pipeline?t=stream.pipeline(readableStream,e,()=>{}):t=readableStream.pipe(e);const i=readableStream.read(minimumBytes)||readableStream.read()||Buffer.alloc(0);try{const r=await fromBuffer(i);e.fileType=r}catch(r){reject(r)}resolve(t)})}),fileType={fromStream,fromTokenizer,fromBuffer,stream};return Object.defineProperty(fileType,"extensions",{get(){return new Set(supported.extensions)}}),Object.defineProperty(fileType,"mimeTypes",{get(){return new Set(supported.mimeTypes)}}),core=fileType,core}var contentType={};var hasRequiredContentType;function requireContentType(){if(hasRequiredContentType)return contentType;hasRequiredContentType=1;var e=/; *([!#$%&'*+.^_`|~0-9A-Za-z-]+) *= *("(?:[\u000b\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\u000b\u0020-\u00ff])*"|[!#$%&'*+.^_`|~0-9A-Za-z-]+) */g,t=/^[\u000b\u0020-\u007e\u0080-\u00ff]+$/,i=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+$/,r=/\\([\u000b\u0020-\u00ff])/g,n=/([\\"])/g,a=/^[!#$%&'*+.^_`|~0-9A-Za-z-]+\/[!#$%&'*+.^_`|~0-9A-Za-z-]+$/;contentType.format=o,contentType.parse=s;function o(m){if(!m||typeof m!="object")throw new TypeError("argument obj is required");var f=m.parameters,u=m.type;if(!u||!a.test(u))throw new TypeError("invalid type");var b=u;if(f&&typeof f=="object")for(var y,w=Object.keys(f).sort(),T=0;T<w.length;T++){if(y=w[T],!i.test(y))throw new TypeError("invalid parameter name");b+="; "+y+"="+c(f[y])}return b}function s(m){if(!m)throw new TypeError("argument string is required");var f=typeof m=="object"?l(m):m;if(typeof f!="string")throw new TypeError("argument string is required to be a string");var u=f.indexOf(";"),b=u!==-1?f.slice(0,u).trim():f.trim();if(!a.test(b))throw new TypeError("invalid media type");var y=new d(b.toLowerCase());if(u!==-1){var w,T,E;for(e.lastIndex=u;T=e.exec(f);){if(T.index!==u)throw new TypeError("invalid parameter format");u+=T[0].length,w=T[1].toLowerCase(),E=T[2],E.charCodeAt(0)===34&&(E=E.slice(1,-1),E.indexOf("\\")!==-1&&(E=E.replace(r,"$1"))),y.parameters[w]=E}if(u!==f.length)throw new TypeError("invalid parameter format")}return y}function l(m){var f;if(typeof m.getHeader=="function"?f=m.getHeader("content-type"):typeof m.headers=="object"&&(f=m.headers&&m.headers["content-type"]),typeof f!="string")throw new TypeError("content-type header is missing from object");return f}function c(m){var f=String(m);if(i.test(f))return f;if(f.length>0&&!t.test(f))throw new TypeError("invalid parameter value");return'"'+f.replace(n,"\\$1")+'"'}function d(m){this.parameters=Object.create(null),this.type=m}return contentType}var mediaTyper={};var hasRequiredMediaTyper;function requireMediaTyper(){if(hasRequiredMediaTyper)return mediaTyper;hasRequiredMediaTyper=1;var e=/^[A-Za-z0-9][A-Za-z0-9!#$&^_.-]{0,126}$/,t=/^[A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126}$/,i=/^ *([A-Za-z0-9][A-Za-z0-9!#$&^_-]{0,126})\/([A-Za-z0-9][A-Za-z0-9!#$&^_.+-]{0,126}) *$/;mediaTyper.format=r,mediaTyper.parse=a,mediaTyper.test=n;function r(s){if(!s||typeof s!="object")throw new TypeError("argument obj is required");var l=s.subtype,c=s.suffix,d=s.type;if(!d||!t.test(d))throw new TypeError("invalid type");if(!l||!e.test(l))throw new TypeError("invalid subtype");var m=d+"/"+l;if(c){if(!t.test(c))throw new TypeError("invalid suffix");m+="+"+c}return m}function n(s){if(!s)throw new TypeError("argument string is required");if(typeof s!="string")throw new TypeError("argument string is required to be a string");return i.test(s.toLowerCase())}function a(s){if(!s)throw new TypeError("argument string is required");if(typeof s!="string")throw new TypeError("argument string is required to be a string");var l=i.exec(s.toLowerCase());if(!l)throw new TypeError("invalid media type");var c=l[1],d=l[2],m,f=d.lastIndexOf("+");return f!==-1&&(m=d.substr(f+1),d=d.substr(0,f)),new o(c,d,m)}function o(s,l,c){this.type=s,this.subtype=l,this.suffix=c}return mediaTyper}var MetadataCollector={},type={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=e.TargetType=e.DataType=void 0,(function(t){t[t.string=0]="string",t[t.uint=1]="uint",t[t.uid=2]="uid",t[t.bool=3]="bool",t[t.binary=4]="binary",t[t.float=5]="float"})(e.DataType||(e.DataType={})),(function(t){t[t.shot=10]="shot",t[t.scene=20]="scene",t[t.track=30]="track",t[t.part=40]="part",t[t.album=50]="album",t[t.edition=60]="edition",t[t.collection=70]="collection"})(e.TargetType||(e.TargetType={})),(function(t){t[t.video=1]="video",t[t.audio=2]="audio",t[t.complex=3]="complex",t[t.logo=4]="logo",t[t.subtitle=17]="subtitle",t[t.button=18]="button",t[t.control=32]="control"})(e.TrackType||(e.TrackType={}))})(types)),types}var hasRequiredType;function requireType(){return hasRequiredType||(hasRequiredType=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TrackType=void 0;var t=requireTypes();Object.defineProperty(e,"TrackType",{enumerable:!0,get:function(){return t.TrackType}})})(type)),type}var GenericTagTypes={},hasRequiredGenericTagTypes;function requireGenericTagTypes(){return hasRequiredGenericTagTypes||(hasRequiredGenericTagTypes=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isUnique=e.isSingleton=e.commonTags=void 0,e.commonTags={year:{multiple:!1},track:{multiple:!1},disk:{multiple:!1},title:{multiple:!1},artist:{multiple:!1},artists:{multiple:!0,unique:!0},albumartist:{multiple:!1},album:{multiple:!1},date:{multiple:!1},originaldate:{multiple:!1},originalyear:{multiple:!1},comment:{multiple:!0,unique:!1},genre:{multiple:!0,unique:!0},picture:{multiple:!0,unique:!0},composer:{multiple:!0,unique:!0},lyrics:{multiple:!0,unique:!1},albumsort:{multiple:!1,unique:!0},titlesort:{multiple:!1,unique:!0},work:{multiple:!1,unique:!0},artistsort:{multiple:!1,unique:!0},albumartistsort:{multiple:!1,unique:!0},composersort:{multiple:!1,unique:!0},lyricist:{multiple:!0,unique:!0},writer:{multiple:!0,unique:!0},conductor:{multiple:!0,unique:!0},remixer:{multiple:!0,unique:!0},arranger:{multiple:!0,unique:!0},engineer:{multiple:!0,unique:!0},producer:{multiple:!0,unique:!0},technician:{multiple:!0,unique:!0},djmixer:{multiple:!0,unique:!0},mixer:{multiple:!0,unique:!0},label:{multiple:!0,unique:!0},grouping:{multiple:!1},subtitle:{multiple:!0},discsubtitle:{multiple:!1},totaltracks:{multiple:!1},totaldiscs:{multiple:!1},compilation:{multiple:!1},rating:{multiple:!0},bpm:{multiple:!1},mood:{multiple:!1},media:{multiple:!1},catalognumber:{multiple:!0,unique:!0},tvShow:{multiple:!1},tvShowSort:{multiple:!1},tvSeason:{multiple:!1},tvEpisode:{multiple:!1},tvEpisodeId:{multiple:!1},tvNetwork:{multiple:!1},podcast:{multiple:!1},podcasturl:{multiple:!1},releasestatus:{multiple:!1},releasetype:{multiple:!0},releasecountry:{multiple:!1},script:{multiple:!1},language:{multiple:!1},copyright:{multiple:!1},license:{multiple:!1},encodedby:{multiple:!1},encodersettings:{multiple:!1},gapless:{multiple:!1},barcode:{multiple:!1},isrc:{multiple:!0},asin:{multiple:!1},musicbrainz_recordingid:{multiple:!1},musicbrainz_trackid:{multiple:!1},musicbrainz_albumid:{multiple:!1},musicbrainz_artistid:{multiple:!0},musicbrainz_albumartistid:{multiple:!0},musicbrainz_releasegroupid:{multiple:!1},musicbrainz_workid:{multiple:!1},musicbrainz_trmid:{multiple:!1},musicbrainz_discid:{multiple:!1},acoustid_id:{multiple:!1},acoustid_fingerprint:{multiple:!1},musicip_puid:{multiple:!1},musicip_fingerprint:{multiple:!1},website:{multiple:!1},"performer:instrument":{multiple:!0,unique:!0},averageLevel:{multiple:!1},peakLevel:{multiple:!1},notes:{multiple:!0,unique:!1},key:{multiple:!1},originalalbum:{multiple:!1},originalartist:{multiple:!1},discogs_artist_id:{multiple:!0,unique:!0},discogs_release_id:{multiple:!1},discogs_label_id:{multiple:!1},discogs_master_release_id:{multiple:!1},discogs_votes:{multiple:!1},discogs_rating:{multiple:!1},replaygain_track_peak:{multiple:!1},replaygain_track_gain:{multiple:!1},replaygain_album_peak:{multiple:!1},replaygain_album_gain:{multiple:!1},replaygain_track_minmax:{multiple:!1},replaygain_album_minmax:{multiple:!1},replaygain_undo:{multiple:!1},description:{multiple:!0},longDescription:{multiple:!1},category:{multiple:!0},hdVideo:{multiple:!1},keywords:{multiple:!0},movement:{multiple:!1},movementIndex:{multiple:!1},movementTotal:{multiple:!1},podcastId:{multiple:!1},showMovement:{multiple:!1},stik:{multiple:!1}};function t(r){return e.commonTags.hasOwnProperty(r)&&!e.commonTags[r].multiple}e.isSingleton=t;function i(r){return!e.commonTags[r].multiple||e.commonTags[r].unique}e.isUnique=i})(GenericTagTypes)),GenericTagTypes}var CombinedTagMapper={},ID3v1TagMap={},GenericTagMapper={},hasRequiredGenericTagMapper;function requireGenericTagMapper(){if(hasRequiredGenericTagMapper)return GenericTagMapper;hasRequiredGenericTagMapper=1,Object.defineProperty(GenericTagMapper,"__esModule",{value:!0}),GenericTagMapper.CommonTagMapper=void 0;class e{static toIntOrNull(i){const r=parseInt(i,10);return isNaN(r)?null:r}static normalizeTrack(i){const r=i.toString().split("/");return{no:parseInt(r[0],10)||null,of:parseInt(r[1],10)||null}}constructor(i,r){this.tagTypes=i,this.tagMap=r}mapGenericTag(i,r){i={id:i.id,value:i.value},this.postMap(i,r);const n=this.getCommonName(i.id);return n?{id:n,value:i.value}:null}getCommonName(i){return this.tagMap[i]}postMap(i,r){}}return e.maxRatingScore=1,GenericTagMapper.CommonTagMapper=e,GenericTagMapper}var hasRequiredID3v1TagMap;function requireID3v1TagMap(){if(hasRequiredID3v1TagMap)return ID3v1TagMap;hasRequiredID3v1TagMap=1,Object.defineProperty(ID3v1TagMap,"__esModule",{value:!0}),ID3v1TagMap.ID3v1TagMapper=void 0;const e=requireGenericTagMapper(),t={title:"title",artist:"artist",album:"album",year:"year",comment:"comment",track:"track",genre:"genre"};class i extends e.CommonTagMapper{constructor(){super(["ID3v1"],t)}}return ID3v1TagMap.ID3v1TagMapper=i,ID3v1TagMap}var ID3v24TagMapper={},CaseInsensitiveTagMap={},hasRequiredCaseInsensitiveTagMap;function requireCaseInsensitiveTagMap(){if(hasRequiredCaseInsensitiveTagMap)return CaseInsensitiveTagMap;hasRequiredCaseInsensitiveTagMap=1,Object.defineProperty(CaseInsensitiveTagMap,"__esModule",{value:!0}),CaseInsensitiveTagMap.CaseInsensitiveTagMap=void 0;const e=requireGenericTagMapper();let t=class extends e.CommonTagMapper{constructor(r,n){const a={};for(const o of Object.keys(n))a[o.toUpperCase()]=n[o];super(r,a)}getCommonName(r){return this.tagMap[r.toUpperCase()]}};return CaseInsensitiveTagMap.CaseInsensitiveTagMap=t,CaseInsensitiveTagMap}var Util={},hasRequiredUtil$1;function requireUtil$1(){if(hasRequiredUtil$1)return Util;hasRequiredUtil$1=1,Object.defineProperty(Util,"__esModule",{value:!0}),Util.toRatio=Util.dbToRatio=Util.ratioToDb=Util.a2hex=Util.isBitSet=Util.getBitAllignedNumber=Util.stripNulls=Util.decodeString=Util.trimRightNull=Util.findZero=Util.getBit=void 0;function e(f,u,b){return(f[u]&1<<b)!==0}Util.getBit=e;function t(f,u,b,y){let w=u;if(y==="utf16le"){for(;f[w]!==0||f[w+1]!==0;){if(w>=b)return b;w+=2}return w}else{for(;f[w]!==0;){if(w>=b)return b;w++}return w}}Util.findZero=t;function i(f){const u=f.indexOf("\0");return u===-1?f:f.substr(0,u)}Util.trimRightNull=i;function r(f){const u=f.length;if((u&1)!==0)throw new Error("Buffer length must be even");for(let b=0;b<u;b+=2){const y=f[b];f[b]=f[b+1],f[b+1]=y}return f}function n(f,u){if(f[0]===255&&f[1]===254)return n(f.subarray(2),u);if(u==="utf16le"&&f[0]===254&&f[1]===255){if((f.length&1)!==0)throw new Error("Expected even number of octets for 16-bit unicode string");return n(r(f),u)}return Buffer.from(f).toString(u)}Util.decodeString=n;function a(f){return f=f.replace(/^\x00+/g,""),f=f.replace(/\x00+$/g,""),f}Util.stripNulls=a;function o(f,u,b,y){const w=u+~~(b/8),T=b%8;let E=f[w];E&=255>>T;const R=8-T,C=y-R;return C<0?E>>=8-T-y:C>0&&(E<<=C,E|=o(f,u,b+R,C)),E}Util.getBitAllignedNumber=o;function s(f,u,b){return o(f,u,b,1)===1}Util.isBitSet=s;function l(f){const u=[];for(let b=0,y=f.length;b<y;b++){const w=Number(f.charCodeAt(b)).toString(16);u.push(w.length===1?"0"+w:w)}return u.join(" ")}Util.a2hex=l;function c(f){return 10*Math.log10(f)}Util.ratioToDb=c;function d(f){return Math.pow(10,f/10)}Util.dbToRatio=d;function m(f){const u=f.split(" ").map(b=>b.trim().toLowerCase());if(u.length>=1){const b=parseFloat(u[0]);return u.length===2&&u[1]==="db"?{dB:b,ratio:d(b)}:{dB:c(b),ratio:b}}}return Util.toRatio=m,Util}var hasRequiredID3v24TagMapper;function requireID3v24TagMapper(){if(hasRequiredID3v24TagMapper)return ID3v24TagMapper;hasRequiredID3v24TagMapper=1,Object.defineProperty(ID3v24TagMapper,"__esModule",{value:!0}),ID3v24TagMapper.ID3v24TagMapper=void 0;const e=requireGenericTagMapper(),t=requireCaseInsensitiveTagMap(),i=requireUtil$1(),r={TIT2:"title",TPE1:"artist","TXXX:Artists":"artists",TPE2:"albumartist",TALB:"album",TDRV:"date",TORY:"originalyear",TPOS:"disk",TCON:"genre",APIC:"picture",TCOM:"composer","USLT:description":"lyrics",TSOA:"albumsort",TSOT:"titlesort",TOAL:"originalalbum",TSOP:"artistsort",TSO2:"albumartistsort",TSOC:"composersort",TEXT:"lyricist","TXXX:Writer":"writer",TPE3:"conductor",TPE4:"remixer","IPLS:arranger":"arranger","IPLS:engineer":"engineer","IPLS:producer":"producer","IPLS:DJ-mix":"djmixer","IPLS:mix":"mixer",TPUB:"label",TIT1:"grouping",TIT3:"subtitle",TRCK:"track",TCMP:"compilation",POPM:"rating",TBPM:"bpm",TMED:"media","TXXX:CATALOGNUMBER":"catalognumber","TXXX:MusicBrainz Album Status":"releasestatus","TXXX:MusicBrainz Album Type":"releasetype","TXXX:MusicBrainz Album Release Country":"releasecountry","TXXX:RELEASECOUNTRY":"releasecountry","TXXX:SCRIPT":"script",TLAN:"language",TCOP:"copyright",WCOP:"license",TENC:"encodedby",TSSE:"encodersettings","TXXX:BARCODE":"barcode","TXXX:ISRC":"isrc",TSRC:"isrc","TXXX:ASIN":"asin","TXXX:originalyear":"originalyear","UFID:http://musicbrainz.org":"musicbrainz_recordingid","TXXX:MusicBrainz Release Track Id":"musicbrainz_trackid","TXXX:MusicBrainz Album Id":"musicbrainz_albumid","TXXX:MusicBrainz Artist Id":"musicbrainz_artistid","TXXX:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","TXXX:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","TXXX:MusicBrainz Work Id":"musicbrainz_workid","TXXX:MusicBrainz TRM Id":"musicbrainz_trmid","TXXX:MusicBrainz Disc Id":"musicbrainz_discid","TXXX:ACOUSTID_ID":"acoustid_id","TXXX:Acoustid Id":"acoustid_id","TXXX:Acoustid Fingerprint":"acoustid_fingerprint","TXXX:MusicIP PUID":"musicip_puid","TXXX:MusicMagic Fingerprint":"musicip_fingerprint",WOAR:"website",TDRC:"date",TYER:"year",TDOR:"originaldate","TIPL:arranger":"arranger","TIPL:engineer":"engineer","TIPL:producer":"producer","TIPL:DJ-mix":"djmixer","TIPL:mix":"mixer",TMOO:"mood",SYLT:"lyrics",TSST:"discsubtitle",TKEY:"key",COMM:"comment",TOPE:"originalartist","PRIV:AverageLevel":"averageLevel","PRIV:PeakLevel":"peakLevel","TXXX:DISCOGS_ARTIST_ID":"discogs_artist_id","TXXX:DISCOGS_ARTISTS":"artists","TXXX:DISCOGS_ARTIST_NAME":"artists","TXXX:DISCOGS_ALBUM_ARTISTS":"albumartist","TXXX:DISCOGS_CATALOG":"catalognumber","TXXX:DISCOGS_COUNTRY":"releasecountry","TXXX:DISCOGS_DATE":"originaldate","TXXX:DISCOGS_LABEL":"label","TXXX:DISCOGS_LABEL_ID":"discogs_label_id","TXXX:DISCOGS_MASTER_RELEASE_ID":"discogs_master_release_id","TXXX:DISCOGS_RATING":"discogs_rating","TXXX:DISCOGS_RELEASED":"date","TXXX:DISCOGS_RELEASE_ID":"discogs_release_id","TXXX:DISCOGS_VOTES":"discogs_votes","TXXX:CATALOGID":"catalognumber","TXXX:STYLE":"genre","TXXX:REPLAYGAIN_TRACK_PEAK":"replaygain_track_peak","TXXX:REPLAYGAIN_TRACK_GAIN":"replaygain_track_gain","TXXX:REPLAYGAIN_ALBUM_PEAK":"replaygain_album_peak","TXXX:REPLAYGAIN_ALBUM_GAIN":"replaygain_album_gain","TXXX:MP3GAIN_MINMAX":"replaygain_track_minmax","TXXX:MP3GAIN_ALBUM_MINMAX":"replaygain_album_minmax","TXXX:MP3GAIN_UNDO":"replaygain_undo",MVNM:"movement",MVIN:"movementIndex",PCST:"podcast",TCAT:"category",TDES:"description",TDRL:"date",TGID:"podcastId",TKWD:"keywords",WFED:"podcasturl"};let n=class et extends t.CaseInsensitiveTagMap{static toRating(o){return{source:o.email,rating:o.rating>0?(o.rating-1)/254*e.CommonTagMapper.maxRatingScore:void 0}}constructor(){super(["ID3v2.3","ID3v2.4"],r)}postMap(o,s){switch(o.id){case"UFID":o.value.owner_identifier==="http://musicbrainz.org"&&(o.id+=":"+o.value.owner_identifier,o.value=i.decodeString(o.value.identifier,"latin1"));break;case"PRIV":switch(o.value.owner_identifier){case"AverageLevel":case"PeakValue":o.id+=":"+o.value.owner_identifier,o.value=o.value.data.length===4?o.value.data.readUInt32LE(0):null,o.value===null&&s.addWarning("Failed to parse PRIV:PeakValue");break;default:s.addWarning(`Unknown PRIV owner-identifier: ${o.value.owner_identifier}`)}break;case"COMM":o.value=o.value?o.value.text:null;break;case"POPM":o.value=et.toRating(o.value);break}}};return ID3v24TagMapper.ID3v24TagMapper=n,ID3v24TagMapper}var AsfTagMapper={},hasRequiredAsfTagMapper;function requireAsfTagMapper(){if(hasRequiredAsfTagMapper)return AsfTagMapper;hasRequiredAsfTagMapper=1,Object.defineProperty(AsfTagMapper,"__esModule",{value:!0}),AsfTagMapper.AsfTagMapper=void 0;const e=requireGenericTagMapper(),t={Title:"title",Author:"artist","WM/AlbumArtist":"albumartist","WM/AlbumTitle":"album","WM/Year":"date","WM/OriginalReleaseTime":"originaldate","WM/OriginalReleaseYear":"originalyear",Description:"comment","WM/TrackNumber":"track","WM/PartOfSet":"disk","WM/Genre":"genre","WM/Composer":"composer","WM/Lyrics":"lyrics","WM/AlbumSortOrder":"albumsort","WM/TitleSortOrder":"titlesort","WM/ArtistSortOrder":"artistsort","WM/AlbumArtistSortOrder":"albumartistsort","WM/ComposerSortOrder":"composersort","WM/Writer":"lyricist","WM/Conductor":"conductor","WM/ModifiedBy":"remixer","WM/Engineer":"engineer","WM/Producer":"producer","WM/DJMixer":"djmixer","WM/Mixer":"mixer","WM/Publisher":"label","WM/ContentGroupDescription":"grouping","WM/SubTitle":"subtitle","WM/SetSubTitle":"discsubtitle","WM/IsCompilation":"compilation","WM/SharedUserRating":"rating","WM/BeatsPerMinute":"bpm","WM/Mood":"mood","WM/Media":"media","WM/CatalogNo":"catalognumber","MusicBrainz/Album Status":"releasestatus","MusicBrainz/Album Type":"releasetype","MusicBrainz/Album Release Country":"releasecountry","WM/Script":"script","WM/Language":"language",Copyright:"copyright",LICENSE:"license","WM/EncodedBy":"encodedby","WM/EncodingSettings":"encodersettings","WM/Barcode":"barcode","WM/ISRC":"isrc","MusicBrainz/Track Id":"musicbrainz_recordingid","MusicBrainz/Release Track Id":"musicbrainz_trackid","MusicBrainz/Album Id":"musicbrainz_albumid","MusicBrainz/Artist Id":"musicbrainz_artistid","MusicBrainz/Album Artist Id":"musicbrainz_albumartistid","MusicBrainz/Release Group Id":"musicbrainz_releasegroupid","MusicBrainz/Work Id":"musicbrainz_workid","MusicBrainz/TRM Id":"musicbrainz_trmid","MusicBrainz/Disc Id":"musicbrainz_discid","Acoustid/Id":"acoustid_id","Acoustid/Fingerprint":"acoustid_fingerprint","MusicIP/PUID":"musicip_puid","WM/ARTISTS":"artists","WM/InitialKey":"key",ASIN:"asin","WM/Work":"work","WM/AuthorURL":"website","WM/Picture":"picture"};let i=class rt extends e.CommonTagMapper{static toRating(n){return{rating:parseFloat(n+1)/5}}constructor(){super(["asf"],t)}postMap(n){switch(n.id){case"WM/SharedUserRating":const a=n.id.split(":");n.value=rt.toRating(n.value),n.id=a[0];break}}};return AsfTagMapper.AsfTagMapper=i,AsfTagMapper}var ID3v22TagMapper={},hasRequiredID3v22TagMapper;function requireID3v22TagMapper(){return hasRequiredID3v22TagMapper||(hasRequiredID3v22TagMapper=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ID3v22TagMapper=e.id3v22TagMap=void 0;const t=requireCaseInsensitiveTagMap();e.id3v22TagMap={TT2:"title",TP1:"artist",TP2:"albumartist",TAL:"album",TYE:"year",COM:"comment",TRK:"track",TPA:"disk",TCO:"genre",PIC:"picture",TCM:"composer",TOR:"originaldate",TOT:"originalalbum",TXT:"lyricist",TP3:"conductor",TPB:"label",TT1:"grouping",TT3:"subtitle",TLA:"language",TCR:"copyright",WCP:"license",TEN:"encodedby",TSS:"encodersettings",WAR:"website","COM:iTunPGAP":"gapless",PCS:"podcast",TCP:"compilation",TDR:"date",TS2:"albumartistsort",TSA:"albumsort",TSC:"composersort",TSP:"artistsort",TST:"titlesort",WFD:"podcasturl",TBP:"bpm"};class i extends t.CaseInsensitiveTagMap{constructor(){super(["ID3v2.2"],e.id3v22TagMap)}}e.ID3v22TagMapper=i})(ID3v22TagMapper)),ID3v22TagMapper}var APEv2TagMapper={},hasRequiredAPEv2TagMapper;function requireAPEv2TagMapper(){if(hasRequiredAPEv2TagMapper)return APEv2TagMapper;hasRequiredAPEv2TagMapper=1,Object.defineProperty(APEv2TagMapper,"__esModule",{value:!0}),APEv2TagMapper.APEv2TagMapper=void 0;const e=requireCaseInsensitiveTagMap(),t={Title:"title",Artist:"artist",Artists:"artists","Album Artist":"albumartist",Album:"album",Year:"date",Originalyear:"originalyear",Originaldate:"originaldate",Comment:"comment",Track:"track",Disc:"disk",DISCNUMBER:"disk",Genre:"genre","Cover Art (Front)":"picture","Cover Art (Back)":"picture",Composer:"composer",Lyrics:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",Lyricist:"lyricist",Writer:"writer",Conductor:"conductor",MixArtist:"remixer",Arranger:"arranger",Engineer:"engineer",Producer:"producer",DJMixer:"djmixer",Mixer:"mixer",Label:"label",Grouping:"grouping",Subtitle:"subtitle",DiscSubtitle:"discsubtitle",Compilation:"compilation",BPM:"bpm",Mood:"mood",Media:"media",CatalogNumber:"catalognumber",MUSICBRAINZ_ALBUMSTATUS:"releasestatus",MUSICBRAINZ_ALBUMTYPE:"releasetype",RELEASECOUNTRY:"releasecountry",Script:"script",Language:"language",Copyright:"copyright",LICENSE:"license",EncodedBy:"encodedby",EncoderSettings:"encodersettings",Barcode:"barcode",ISRC:"isrc",ASIN:"asin",musicbrainz_trackid:"musicbrainz_recordingid",musicbrainz_releasetrackid:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",Acoustid_Id:"acoustid_id",ACOUSTID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",Weblink:"website",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",MP3GAIN_MINMAX:"replaygain_track_minmax",MP3GAIN_UNDO:"replaygain_undo"};let i=class extends e.CaseInsensitiveTagMap{constructor(){super(["APEv2"],t)}};return APEv2TagMapper.APEv2TagMapper=i,APEv2TagMapper}var MP4TagMapper={},hasRequiredMP4TagMapper;function requireMP4TagMapper(){return hasRequiredMP4TagMapper||(hasRequiredMP4TagMapper=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4TagMapper=e.tagType=void 0;const t=requireCaseInsensitiveTagMap(),i={"nam":"title","ART":"artist",aART:"albumartist","----:com.apple.iTunes:Band":"albumartist","alb":"album","day":"date","cmt":"comment","com":"comment",trkn:"track",disk:"disk","gen":"genre",covr:"picture","wrt":"composer","lyr":"lyrics",soal:"albumsort",sonm:"titlesort",soar:"artistsort",soaa:"albumartistsort",soco:"composersort","----:com.apple.iTunes:LYRICIST":"lyricist","----:com.apple.iTunes:CONDUCTOR":"conductor","----:com.apple.iTunes:REMIXER":"remixer","----:com.apple.iTunes:ENGINEER":"engineer","----:com.apple.iTunes:PRODUCER":"producer","----:com.apple.iTunes:DJMIXER":"djmixer","----:com.apple.iTunes:MIXER":"mixer","----:com.apple.iTunes:LABEL":"label","grp":"grouping","----:com.apple.iTunes:SUBTITLE":"subtitle","----:com.apple.iTunes:DISCSUBTITLE":"discsubtitle",cpil:"compilation",tmpo:"bpm","----:com.apple.iTunes:MOOD":"mood","----:com.apple.iTunes:MEDIA":"media","----:com.apple.iTunes:CATALOGNUMBER":"catalognumber",tvsh:"tvShow",tvsn:"tvSeason",tves:"tvEpisode",sosn:"tvShowSort",tven:"tvEpisodeId",tvnn:"tvNetwork",pcst:"podcast",purl:"podcasturl","----:com.apple.iTunes:MusicBrainz Album Status":"releasestatus","----:com.apple.iTunes:MusicBrainz Album Type":"releasetype","----:com.apple.iTunes:MusicBrainz Album Release Country":"releasecountry","----:com.apple.iTunes:SCRIPT":"script","----:com.apple.iTunes:LANGUAGE":"language",cprt:"copyright","cpy":"copyright","----:com.apple.iTunes:LICENSE":"license","too":"encodedby",pgap:"gapless","----:com.apple.iTunes:BARCODE":"barcode","----:com.apple.iTunes:ISRC":"isrc","----:com.apple.iTunes:ASIN":"asin","----:com.apple.iTunes:NOTES":"comment","----:com.apple.iTunes:MusicBrainz Track Id":"musicbrainz_recordingid","----:com.apple.iTunes:MusicBrainz Release Track Id":"musicbrainz_trackid","----:com.apple.iTunes:MusicBrainz Album Id":"musicbrainz_albumid","----:com.apple.iTunes:MusicBrainz Artist Id":"musicbrainz_artistid","----:com.apple.iTunes:MusicBrainz Album Artist Id":"musicbrainz_albumartistid","----:com.apple.iTunes:MusicBrainz Release Group Id":"musicbrainz_releasegroupid","----:com.apple.iTunes:MusicBrainz Work Id":"musicbrainz_workid","----:com.apple.iTunes:MusicBrainz TRM Id":"musicbrainz_trmid","----:com.apple.iTunes:MusicBrainz Disc Id":"musicbrainz_discid","----:com.apple.iTunes:Acoustid Id":"acoustid_id","----:com.apple.iTunes:Acoustid Fingerprint":"acoustid_fingerprint","----:com.apple.iTunes:MusicIP PUID":"musicip_puid","----:com.apple.iTunes:fingerprint":"musicip_fingerprint","----:com.apple.iTunes:replaygain_track_gain":"replaygain_track_gain","----:com.apple.iTunes:replaygain_track_peak":"replaygain_track_peak","----:com.apple.iTunes:replaygain_album_gain":"replaygain_album_gain","----:com.apple.iTunes:replaygain_album_peak":"replaygain_album_peak","----:com.apple.iTunes:replaygain_track_minmax":"replaygain_track_minmax","----:com.apple.iTunes:replaygain_album_minmax":"replaygain_album_minmax","----:com.apple.iTunes:replaygain_undo":"replaygain_undo",gnre:"genre","----:com.apple.iTunes:ALBUMARTISTSORT":"albumartistsort","----:com.apple.iTunes:ARTISTS":"artists","----:com.apple.iTunes:ORIGINALDATE":"originaldate","----:com.apple.iTunes:ORIGINALYEAR":"originalyear",desc:"description",ldes:"longDescription","mvn":"movement","mvi":"movementIndex","mvc":"movementTotal","wrk":"work",catg:"category",egid:"podcastId",hdvd:"hdVideo",keyw:"keywords",shwm:"showMovement",stik:"stik",rate:"rating"};e.tagType="iTunes";class r extends t.CaseInsensitiveTagMap{constructor(){super([e.tagType],i)}postMap(a,o){switch(a.id){case"rate":a.value={source:void 0,rating:parseFloat(a.value)/100};break}}}e.MP4TagMapper=r})(MP4TagMapper)),MP4TagMapper}var VorbisTagMapper={},hasRequiredVorbisTagMapper;function requireVorbisTagMapper(){if(hasRequiredVorbisTagMapper)return VorbisTagMapper;hasRequiredVorbisTagMapper=1,Object.defineProperty(VorbisTagMapper,"__esModule",{value:!0}),VorbisTagMapper.VorbisTagMapper=void 0;const e=requireGenericTagMapper(),t={TITLE:"title",ARTIST:"artist",ARTISTS:"artists",ALBUMARTIST:"albumartist","ALBUM ARTIST":"albumartist",ALBUM:"album",DATE:"date",ORIGINALDATE:"originaldate",ORIGINALYEAR:"originalyear",COMMENT:"comment",TRACKNUMBER:"track",DISCNUMBER:"disk",GENRE:"genre",METADATA_BLOCK_PICTURE:"picture",COMPOSER:"composer",LYRICS:"lyrics",ALBUMSORT:"albumsort",TITLESORT:"titlesort",WORK:"work",ARTISTSORT:"artistsort",ALBUMARTISTSORT:"albumartistsort",COMPOSERSORT:"composersort",LYRICIST:"lyricist",WRITER:"writer",CONDUCTOR:"conductor",REMIXER:"remixer",ARRANGER:"arranger",ENGINEER:"engineer",PRODUCER:"producer",DJMIXER:"djmixer",MIXER:"mixer",LABEL:"label",GROUPING:"grouping",SUBTITLE:"subtitle",DISCSUBTITLE:"discsubtitle",TRACKTOTAL:"totaltracks",DISCTOTAL:"totaldiscs",COMPILATION:"compilation",RATING:"rating",BPM:"bpm",KEY:"key",MOOD:"mood",MEDIA:"media",CATALOGNUMBER:"catalognumber",RELEASESTATUS:"releasestatus",RELEASETYPE:"releasetype",RELEASECOUNTRY:"releasecountry",SCRIPT:"script",LANGUAGE:"language",COPYRIGHT:"copyright",LICENSE:"license",ENCODEDBY:"encodedby",ENCODERSETTINGS:"encodersettings",BARCODE:"barcode",ISRC:"isrc",ASIN:"asin",MUSICBRAINZ_TRACKID:"musicbrainz_recordingid",MUSICBRAINZ_RELEASETRACKID:"musicbrainz_trackid",MUSICBRAINZ_ALBUMID:"musicbrainz_albumid",MUSICBRAINZ_ARTISTID:"musicbrainz_artistid",MUSICBRAINZ_ALBUMARTISTID:"musicbrainz_albumartistid",MUSICBRAINZ_RELEASEGROUPID:"musicbrainz_releasegroupid",MUSICBRAINZ_WORKID:"musicbrainz_workid",MUSICBRAINZ_TRMID:"musicbrainz_trmid",MUSICBRAINZ_DISCID:"musicbrainz_discid",ACOUSTID_ID:"acoustid_id",ACOUSTID_ID_FINGERPRINT:"acoustid_fingerprint",MUSICIP_PUID:"musicip_puid",WEBSITE:"website",NOTES:"notes",TOTALTRACKS:"totaltracks",TOTALDISCS:"totaldiscs",DISCOGS_ARTIST_ID:"discogs_artist_id",DISCOGS_ARTISTS:"artists",DISCOGS_ARTIST_NAME:"artists",DISCOGS_ALBUM_ARTISTS:"albumartist",DISCOGS_CATALOG:"catalognumber",DISCOGS_COUNTRY:"releasecountry",DISCOGS_DATE:"originaldate",DISCOGS_LABEL:"label",DISCOGS_LABEL_ID:"discogs_label_id",DISCOGS_MASTER_RELEASE_ID:"discogs_master_release_id",DISCOGS_RATING:"discogs_rating",DISCOGS_RELEASED:"date",DISCOGS_RELEASE_ID:"discogs_release_id",DISCOGS_VOTES:"discogs_votes",CATALOGID:"catalognumber",STYLE:"genre",REPLAYGAIN_TRACK_GAIN:"replaygain_track_gain",REPLAYGAIN_TRACK_PEAK:"replaygain_track_peak",REPLAYGAIN_ALBUM_GAIN:"replaygain_album_gain",REPLAYGAIN_ALBUM_PEAK:"replaygain_album_peak",REPLAYGAIN_MINMAX:"replaygain_track_minmax",REPLAYGAIN_ALBUM_MINMAX:"replaygain_album_minmax",REPLAYGAIN_UNDO:"replaygain_undo"};let i=class He extends e.CommonTagMapper{static toRating(n,a,o){return{source:n&&n.toLowerCase(),rating:parseFloat(a)/o*e.CommonTagMapper.maxRatingScore}}constructor(){super(["vorbis"],t)}postMap(n){if(n.id==="RATING")n.value=He.toRating(void 0,n.value,100);else if(n.id.indexOf("RATING:")===0){const a=n.id.split(":");n.value=He.toRating(a[1],n.value,1),n.id=a[0]}}};return VorbisTagMapper.VorbisTagMapper=i,VorbisTagMapper}var RiffInfoTagMap={},hasRequiredRiffInfoTagMap;function requireRiffInfoTagMap(){return hasRequiredRiffInfoTagMap||(hasRequiredRiffInfoTagMap=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RiffInfoTagMapper=e.riffInfoTagMap=void 0;const t=requireGenericTagMapper();e.riffInfoTagMap={IART:"artist",ICRD:"date",INAM:"title",TITL:"title",IPRD:"album",ITRK:"track",IPRT:"track",COMM:"comment",ICMT:"comment",ICNT:"releasecountry",GNRE:"genre",IWRI:"writer",RATE:"rating",YEAR:"year",ISFT:"encodedby",CODE:"encodedby",TURL:"website",IGNR:"genre",IENG:"engineer",ITCH:"technician",IMED:"media",IRPD:"album"};class i extends t.CommonTagMapper{constructor(){super(["exif"],e.riffInfoTagMap)}}e.RiffInfoTagMapper=i})(RiffInfoTagMap)),RiffInfoTagMap}var MatroskaTagMapper={},hasRequiredMatroskaTagMapper;function requireMatroskaTagMapper(){if(hasRequiredMatroskaTagMapper)return MatroskaTagMapper;hasRequiredMatroskaTagMapper=1,Object.defineProperty(MatroskaTagMapper,"__esModule",{value:!0}),MatroskaTagMapper.MatroskaTagMapper=void 0;const e=requireCaseInsensitiveTagMap(),t={"segment:title":"title","album:ARTIST":"albumartist","album:ARTISTSORT":"albumartistsort","album:TITLE":"album","album:DATE_RECORDED":"originaldate","album:PART_NUMBER":"disk","album:TOTAL_PARTS":"totaltracks","track:ARTIST":"artist","track:ARTISTSORT":"artistsort","track:TITLE":"title","track:PART_NUMBER":"track","track:MUSICBRAINZ_TRACKID":"musicbrainz_recordingid","track:MUSICBRAINZ_ALBUMID":"musicbrainz_albumid","track:MUSICBRAINZ_ARTISTID":"musicbrainz_artistid","track:PUBLISHER":"label","track:GENRE":"genre","track:ENCODER":"encodedby","track:ENCODER_OPTIONS":"encodersettings","edition:TOTAL_PARTS":"totaldiscs",picture:"picture"};let i=class extends e.CaseInsensitiveTagMap{constructor(){super(["matroska"],t)}};return MatroskaTagMapper.MatroskaTagMapper=i,MatroskaTagMapper}var AiffTagMap={},hasRequiredAiffTagMap;function requireAiffTagMap(){if(hasRequiredAiffTagMap)return AiffTagMap;hasRequiredAiffTagMap=1,Object.defineProperty(AiffTagMap,"__esModule",{value:!0}),AiffTagMap.AiffTagMapper=void 0;const e=requireGenericTagMapper(),t={NAME:"title",AUTH:"artist","(c) ":"copyright",ANNO:"comment"};class i extends e.CommonTagMapper{constructor(){super(["AIFF"],t)}}return AiffTagMap.AiffTagMapper=i,AiffTagMap}var hasRequiredCombinedTagMapper;function requireCombinedTagMapper(){if(hasRequiredCombinedTagMapper)return CombinedTagMapper;hasRequiredCombinedTagMapper=1,Object.defineProperty(CombinedTagMapper,"__esModule",{value:!0}),CombinedTagMapper.CombinedTagMapper=void 0;const e=requireID3v1TagMap(),t=requireID3v24TagMapper(),i=requireAsfTagMapper(),r=requireID3v22TagMapper(),n=requireAPEv2TagMapper(),a=requireMP4TagMapper(),o=requireVorbisTagMapper(),s=requireRiffInfoTagMap(),l=requireMatroskaTagMapper(),c=requireAiffTagMap();let d=class{constructor(){this.tagMappers={},[new e.ID3v1TagMapper,new r.ID3v22TagMapper,new t.ID3v24TagMapper,new a.MP4TagMapper,new a.MP4TagMapper,new o.VorbisTagMapper,new n.APEv2TagMapper,new i.AsfTagMapper,new s.RiffInfoTagMapper,new l.MatroskaTagMapper,new c.AiffTagMapper].forEach(f=>{this.registerTagMapper(f)})}mapTag(f,u,b){if(this.tagMappers[f])return this.tagMappers[f].mapGenericTag(u,b);throw new Error("No generic tag mapper defined for tag-format: "+f)}registerTagMapper(f){for(const u of f.tagTypes)this.tagMappers[u]=f}};return CombinedTagMapper.CombinedTagMapper=d,CombinedTagMapper}var hasRequiredMetadataCollector;function requireMetadataCollector(){if(hasRequiredMetadataCollector)return MetadataCollector;hasRequiredMetadataCollector=1,Object.defineProperty(MetadataCollector,"__esModule",{value:!0}),MetadataCollector.joinArtists=MetadataCollector.MetadataCollector=void 0;const e=requireType(),t=requireBrowser$3(),i=requireGenericTagTypes(),r=requireCombinedTagMapper(),n=requireGenericTagMapper(),a=requireUtil$1(),o=requireCore$1(),s=(0,t.default)("music-metadata:collector"),l=["matroska","APEv2","vorbis","ID3v2.4","ID3v2.3","ID3v2.2","exif","asf","iTunes","AIFF","ID3v1"];let c=class{constructor(f){this.opts=f,this.format={tagTypes:[],trackInfo:[]},this.native={},this.common={track:{no:null,of:null},disk:{no:null,of:null},movementIndex:{}},this.quality={warnings:[]},this.commonOrigin={},this.originPriority={},this.tagMapper=new r.CombinedTagMapper;let u=1;for(const b of l)this.originPriority[b]=u++;this.originPriority.artificial=500,this.originPriority.id3v1=600}hasAny(){return Object.keys(this.native).length>0}addStreamInfo(f){s(`streamInfo: type=${e.TrackType[f.type]}, codec=${f.codecName}`),this.format.trackInfo.push(f)}setFormat(f,u){s(`format: ${f} = ${u}`),this.format[f]=u,this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"format",id:f,value:u}})}addTag(f,u,b){s(`tag ${f}.${u} = ${b}`),this.native[f]||(this.format.tagTypes.push(f),this.native[f]=[]),this.native[f].push({id:u,value:b}),this.toCommon(f,u,b)}addWarning(f){this.quality.warnings.push({message:f})}postMap(f,u){switch(u.id){case"artist":if(this.commonOrigin.artist===this.originPriority[f])return this.postMap("artificial",{id:"artists",value:u.value});this.common.artists||this.setGenericTag("artificial",{id:"artists",value:u.value});break;case"artists":if((!this.common.artist||this.commonOrigin.artist===this.originPriority.artificial)&&(!this.common.artists||this.common.artists.indexOf(u.value)===-1)){const T=(this.common.artists||[]).concat([u.value]),R={id:"artist",value:d(T)};this.setGenericTag("artificial",R)}break;case"picture":this.postFixPicture(u.value).then(T=>{T!==null&&(u.value=T,this.setGenericTag(f,u))});return;case"totaltracks":this.common.track.of=n.CommonTagMapper.toIntOrNull(u.value);return;case"totaldiscs":this.common.disk.of=n.CommonTagMapper.toIntOrNull(u.value);return;case"movementTotal":this.common.movementIndex.of=n.CommonTagMapper.toIntOrNull(u.value);return;case"track":case"disk":case"movementIndex":const b=this.common[u.id].of;this.common[u.id]=n.CommonTagMapper.normalizeTrack(u.value),this.common[u.id].of=b??this.common[u.id].of;return;case"bpm":case"year":case"originalyear":u.value=parseInt(u.value,10);break;case"date":const y=parseInt(u.value.substr(0,4),10);isNaN(y)||(this.common.year=y);break;case"discogs_label_id":case"discogs_release_id":case"discogs_master_release_id":case"discogs_artist_id":case"discogs_votes":u.value=typeof u.value=="string"?parseInt(u.value,10):u.value;break;case"replaygain_track_gain":case"replaygain_track_peak":case"replaygain_album_gain":case"replaygain_album_peak":u.value=(0,a.toRatio)(u.value);break;case"replaygain_track_minmax":u.value=u.value.split(",").map(T=>parseInt(T,10));break;case"replaygain_undo":const w=u.value.split(",").map(T=>parseInt(T,10));u.value={leftChannel:w[0],rightChannel:w[1]};break;case"gapless":case"compilation":case"podcast":case"showMovement":u.value=u.value==="1"||u.value===1;break;case"isrc":if(this.common[u.id]&&this.common[u.id].indexOf(u.value)!==-1)return;break}u.value!==null&&this.setGenericTag(f,u)}toCommonMetadata(){return{format:this.format,native:this.native,quality:this.quality,common:this.common}}async postFixPicture(f){if(f.data&&f.data.length>0){if(!f.format){const u=await o.fromBuffer(f.data);if(u)f.format=u.mime;else return null}switch(f.format=f.format.toLocaleLowerCase(),f.format){case"image/jpg":f.format="image/jpeg"}return f}return this.addWarning("Empty picture tag found"),null}toCommon(f,u,b){const y={id:u,value:b},w=this.tagMapper.mapTag(f,y,this);w&&this.postMap(f,w)}setGenericTag(f,u){s(`common.${u.id} = ${u.value}`);const b=this.commonOrigin[u.id]||1e3,y=this.originPriority[f];if((0,i.isSingleton)(u.id))if(y<=b)this.common[u.id]=u.value,this.commonOrigin[u.id]=y;else return s(`Ignore native tag (singleton): ${f}.${u.id} = ${u.value}`);else if(y===b)!(0,i.isUnique)(u.id)||this.common[u.id].indexOf(u.value)===-1?this.common[u.id].push(u.value):s(`Ignore duplicate value: ${f}.${u.id} = ${u.value}`);else if(y<b)this.common[u.id]=[u.value],this.commonOrigin[u.id]=y;else return s(`Ignore native tag (list): ${f}.${u.id} = ${u.value}`);this.opts.observer&&this.opts.observer({metadata:this,tag:{type:"common",id:u.id,value:u.value}})}};MetadataCollector.MetadataCollector=c;function d(m){return m.length>2?m.slice(0,m.length-1).join(", ")+" & "+m[m.length-1]:m.join(" & ")}return MetadataCollector.joinArtists=d,MetadataCollector}var AiffParser={},ID3v2Parser={},FrameParser={},ID3v2Token={},hasRequiredID3v2Token;function requireID3v2Token(){return hasRequiredID3v2Token||(hasRequiredID3v2Token=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TextEncodingToken=e.ExtendedHeader=e.ID3v2Header=e.UINT32SYNCSAFE=e.AttachedPictureType=void 0;const t=requireLib$2(),i=requireUtil$1();(function(r){r[r.Other=0]="Other",r[r["32x32 pixels 'file icon' (PNG only)"]=1]="32x32 pixels 'file icon' (PNG only)",r[r["Other file icon"]=2]="Other file icon",r[r["Cover (front)"]=3]="Cover (front)",r[r["Cover (back)"]=4]="Cover (back)",r[r["Leaflet page"]=5]="Leaflet page",r[r["Media (e.g. label side of CD)"]=6]="Media (e.g. label side of CD)",r[r["Lead artist/lead performer/soloist"]=7]="Lead artist/lead performer/soloist",r[r["Artist/performer"]=8]="Artist/performer",r[r.Conductor=9]="Conductor",r[r["Band/Orchestra"]=10]="Band/Orchestra",r[r.Composer=11]="Composer",r[r["Lyricist/text writer"]=12]="Lyricist/text writer",r[r["Recording Location"]=13]="Recording Location",r[r["During recording"]=14]="During recording",r[r["During performance"]=15]="During performance",r[r["Movie/video screen capture"]=16]="Movie/video screen capture",r[r["A bright coloured fish"]=17]="A bright coloured fish",r[r.Illustration=18]="Illustration",r[r["Band/artist logotype"]=19]="Band/artist logotype",r[r["Publisher/Studio logotype"]=20]="Publisher/Studio logotype"})(e.AttachedPictureType||(e.AttachedPictureType={})),e.UINT32SYNCSAFE={get:(r,n)=>r[n+3]&127|r[n+2]<<7|r[n+1]<<14|r[n]<<21,len:4},e.ID3v2Header={len:10,get:(r,n)=>({fileIdentifier:new t.StringType(3,"ascii").get(r,n),version:{major:t.INT8.get(r,n+3),revision:t.INT8.get(r,n+4)},flags:{unsynchronisation:i.getBit(r,n+5,7),isExtendedHeader:i.getBit(r,n+5,6),expIndicator:i.getBit(r,n+5,5),footer:i.getBit(r,n+5,4)},size:e.UINT32SYNCSAFE.get(r,n+6)})},e.ExtendedHeader={len:10,get:(r,n)=>({size:t.UINT32_BE.get(r,n),extendedFlags:t.UINT16_BE.get(r,n+4),sizeOfPadding:t.UINT32_BE.get(r,n+6),crcDataPresent:i.getBit(r,n+4,31)})},e.TextEncodingToken={len:1,get:(r,n)=>{switch(r[n]){case 0:return{encoding:"latin1"};case 1:return{encoding:"utf16le",bom:!0};case 2:return{encoding:"utf16le",bom:!1};case 3:return{encoding:"utf8",bom:!1};default:return{encoding:"utf8",bom:!1}}}}})(ID3v2Token)),ID3v2Token}var ID3v1Parser={},BasicParser={},hasRequiredBasicParser;function requireBasicParser(){if(hasRequiredBasicParser)return BasicParser;hasRequiredBasicParser=1,Object.defineProperty(BasicParser,"__esModule",{value:!0}),BasicParser.BasicParser=void 0;let e=class{init(i,r,n){return this.metadata=i,this.tokenizer=r,this.options=n,this}};return BasicParser.BasicParser=e,BasicParser}var APEv2Parser={},APEv2Token={},FourCC={},hasRequiredFourCC;function requireFourCC(){return hasRequiredFourCC||(hasRequiredFourCC=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FourCcToken=void 0;const t=requireUtil$1(),i=/^[\x21-\x7e][\x20-\x7e\x00()]{3}/;e.FourCcToken={len:4,get:(r,n)=>{const a=r.toString("binary",n,n+e.FourCcToken.len);if(!a.match(i))throw new Error(`FourCC contains invalid characters: ${t.a2hex(a)} "${a}"`);return a},put:(r,n,a)=>{const o=Buffer.from(a,"binary");if(o.length!==4)throw new Error("Invalid length");return o.copy(r,n)}}})(FourCC)),FourCC}var hasRequiredAPEv2Token;function requireAPEv2Token(){return hasRequiredAPEv2Token||(hasRequiredAPEv2Token=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.isBitSet=e.parseTagFlags=e.TagField=e.TagItemHeader=e.TagFooter=e.Header=e.DescriptorParser=e.DataType=void 0;const t=requireLib$2(),i=requireFourCC();(function(o){o[o.text_utf8=0]="text_utf8",o[o.binary=1]="binary",o[o.external_info=2]="external_info",o[o.reserved=3]="reserved"})(e.DataType||(e.DataType={})),e.DescriptorParser={len:52,get:(o,s)=>({ID:i.FourCcToken.get(o,s),version:t.UINT32_LE.get(o,s+4)/1e3,descriptorBytes:t.UINT32_LE.get(o,s+8),headerBytes:t.UINT32_LE.get(o,s+12),seekTableBytes:t.UINT32_LE.get(o,s+16),headerDataBytes:t.UINT32_LE.get(o,s+20),apeFrameDataBytes:t.UINT32_LE.get(o,s+24),apeFrameDataBytesHigh:t.UINT32_LE.get(o,s+28),terminatingDataBytes:t.UINT32_LE.get(o,s+32),fileMD5:new t.Uint8ArrayType(16).get(o,s+36)})},e.Header={len:24,get:(o,s)=>({compressionLevel:t.UINT16_LE.get(o,s),formatFlags:t.UINT16_LE.get(o,s+2),blocksPerFrame:t.UINT32_LE.get(o,s+4),finalFrameBlocks:t.UINT32_LE.get(o,s+8),totalFrames:t.UINT32_LE.get(o,s+12),bitsPerSample:t.UINT16_LE.get(o,s+16),channel:t.UINT16_LE.get(o,s+18),sampleRate:t.UINT32_LE.get(o,s+20)})},e.TagFooter={len:32,get:(o,s)=>({ID:new t.StringType(8,"ascii").get(o,s),version:t.UINT32_LE.get(o,s+8),size:t.UINT32_LE.get(o,s+12),fields:t.UINT32_LE.get(o,s+16),flags:n(t.UINT32_LE.get(o,s+20))})},e.TagItemHeader={len:8,get:(o,s)=>({size:t.UINT32_LE.get(o,s),flags:n(t.UINT32_LE.get(o,s+4))})};const r=o=>new t.Uint8ArrayType(o.size-e.TagFooter.len);e.TagField=r;function n(o){return{containsHeader:a(o,31),containsFooter:a(o,30),isHeader:a(o,31),readOnly:a(o,0),dataType:(o&6)>>1}}e.parseTagFlags=n;function a(o,s){return(o&1<<s)!==0}e.isBitSet=a})(APEv2Token)),APEv2Token}var hasRequiredAPEv2Parser;function requireAPEv2Parser(){if(hasRequiredAPEv2Parser)return APEv2Parser;hasRequiredAPEv2Parser=1,Object.defineProperty(APEv2Parser,"__esModule",{value:!0}),APEv2Parser.APEv2Parser=void 0;const e=requireBrowser$3(),t=requireCore$2(),i=requireLib$2(),r=requireUtil$1(),n=requireBasicParser(),a=requireAPEv2Token(),o=(0,e.default)("music-metadata:parser:APEv2"),s="APEv2",l="APETAGEX";let c=class Oe extends n.BasicParser{constructor(){super(...arguments),this.ape={}}static tryParseApeHeader(m,f,u){const b=new Oe;return b.init(m,f,u),b.tryParseApeHeader()}static calculateDuration(m){let f=m.totalFrames>1?m.blocksPerFrame*(m.totalFrames-1):0;return f+=m.finalFrameBlocks,f/m.sampleRate}static async findApeFooterOffset(m,f){const u=Buffer.alloc(a.TagFooter.len);await m.randomRead(u,0,a.TagFooter.len,f-a.TagFooter.len);const b=a.TagFooter.get(u,0);if(b.ID==="APETAGEX")return o(`APE footer header at offset=${f}`),{footer:b,offset:f-b.size}}static parseTagFooter(m,f,u){const b=a.TagFooter.get(f,f.length-a.TagFooter.len);if(b.ID!==l)throw new Error("Unexpected APEv2 Footer ID preamble value.");t.fromBuffer(f);const y=new Oe;return y.init(m,t.fromBuffer(f),u),y.parseTags(b)}async tryParseApeHeader(){if(this.tokenizer.fileInfo.size&&this.tokenizer.fileInfo.size-this.tokenizer.position<a.TagFooter.len){o("No APEv2 header found, end-of-file reached");return}const m=await this.tokenizer.peekToken(a.TagFooter);if(m.ID===l)return await this.tokenizer.ignore(a.TagFooter.len),this.parseTags(m);if(o(`APEv2 header not found at offset=${this.tokenizer.position}`),this.tokenizer.fileInfo.size){const f=this.tokenizer.fileInfo.size-this.tokenizer.position,u=Buffer.alloc(f);return await this.tokenizer.readBuffer(u),Oe.parseTagFooter(this.metadata,u,this.options)}}async parse(){const m=await this.tokenizer.readToken(a.DescriptorParser);if(m.ID!=="MAC ")throw new Error("Unexpected descriptor ID");this.ape.descriptor=m;const f=m.descriptorBytes-a.DescriptorParser.len,u=await(f>0?this.parseDescriptorExpansion(f):this.parseHeader());return await this.tokenizer.ignore(u.forwardBytes),this.tryParseApeHeader()}async parseTags(m){const f=Buffer.alloc(256);let u=m.size-a.TagFooter.len;o(`Parse APE tags at offset=${this.tokenizer.position}, size=${u}`);for(let b=0;b<m.fields;b++){if(u<a.TagItemHeader.len){this.metadata.addWarning(`APEv2 Tag-header: ${m.fields-b} items remaining, but no more tag data to read.`);break}const y=await this.tokenizer.readToken(a.TagItemHeader);u-=a.TagItemHeader.len+y.size,await this.tokenizer.peekBuffer(f,{length:Math.min(f.length,u)});let w=r.findZero(f,0,f.length);const T=await this.tokenizer.readToken(new i.StringType(w,"ascii"));switch(await this.tokenizer.ignore(1),u-=T.length+1,y.flags.dataType){case a.DataType.text_utf8:{const R=(await this.tokenizer.readToken(new i.StringType(y.size,"utf8"))).split(/\x00/g);for(const C of R)this.metadata.addTag(s,T,C);break}case a.DataType.binary:if(this.options.skipCovers)await this.tokenizer.ignore(y.size);else{const E=Buffer.alloc(y.size);await this.tokenizer.readBuffer(E),w=r.findZero(E,0,E.length);const R=E.toString("utf8",0,w),C=Buffer.from(E.slice(w+1));this.metadata.addTag(s,T,{description:R,data:C})}break;case a.DataType.external_info:o(`Ignore external info ${T}`),await this.tokenizer.ignore(y.size);break;case a.DataType.reserved:o(`Ignore external info ${T}`),this.metadata.addWarning(`APEv2 header declares a reserved datatype for "${T}"`),await this.tokenizer.ignore(y.size);break}}}async parseDescriptorExpansion(m){return await this.tokenizer.ignore(m),this.parseHeader()}async parseHeader(){const m=await this.tokenizer.readToken(a.Header);return this.metadata.setFormat("lossless",!0),this.metadata.setFormat("container","Monkey's Audio"),this.metadata.setFormat("bitsPerSample",m.bitsPerSample),this.metadata.setFormat("sampleRate",m.sampleRate),this.metadata.setFormat("numberOfChannels",m.channel),this.metadata.setFormat("duration",Oe.calculateDuration(m)),{forwardBytes:this.ape.descriptor.seekTableBytes+this.ape.descriptor.headerDataBytes+this.ape.descriptor.apeFrameDataBytes+this.ape.descriptor.terminatingDataBytes}}};return APEv2Parser.APEv2Parser=c,APEv2Parser}var hasRequiredID3v1Parser;function requireID3v1Parser(){return hasRequiredID3v1Parser||(hasRequiredID3v1Parser=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasID3v1Header=e.ID3v1Parser=e.Genres=void 0;const t=requireBrowser$3(),i=requireLib$2(),r=requireUtil$1(),n=requireBasicParser(),a=requireAPEv2Parser(),o=(0,t.default)("music-metadata:parser:ID3v1");e.Genres=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","Alt. Rock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta Rap","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychedelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock","Folk","Folk/Rock","National Folk","Swing","Fast-Fusion","Bebob","Latin","Revival","Celtic","Bluegrass","Avantgarde","Gothic Rock","Progressive Rock","Psychedelic Rock","Symphonic Rock","Slow Rock","Big Band","Chorus","Easy Listening","Acoustic","Humour","Speech","Chanson","Opera","Chamber Music","Sonata","Symphony","Booty Bass","Primus","Porn Groove","Satire","Slow Jam","Club","Tango","Samba","Folklore","Ballad","Power Ballad","Rhythmic Soul","Freestyle","Duet","Punk Rock","Drum Solo","A Cappella","Euro-House","Dance Hall","Goa","Drum & Bass","Club-House","Hardcore","Terror","Indie","BritPop","Negerpunk","Polsk Punk","Beat","Christian Gangsta Rap","Heavy Metal","Black Metal","Crossover","Contemporary Christian","Christian Rock","Merengue","Salsa","Thrash Metal","Anime","JPop","Synthpop","Abstract","Art Rock","Baroque","Bhangra","Big Beat","Breakbeat","Chillout","Downtempo","Dub","EBM","Eclectic","Electro","Electroclash","Emo","Experimental","Garage","Global","IDM","Illbient","Industro-Goth","Jam Band","Krautrock","Leftfield","Lounge","Math Rock","New Romantic","Nu-Breakz","Post-Punk","Post-Rock","Psytrance","Shoegaze","Space Rock","Trop Rock","World Music","Neoclassical","Audiobook","Audio Theatre","Neue Deutsche Welle","Podcast","Indie Rock","G-Funk","Dubstep","Garage Rock","Psybient"];const s={len:128,get:(m,f)=>{const u=new l(3).get(m,f);return u==="TAG"?{header:u,title:new l(30).get(m,f+3),artist:new l(30).get(m,f+33),album:new l(30).get(m,f+63),year:new l(4).get(m,f+93),comment:new l(28).get(m,f+97),zeroByte:i.UINT8.get(m,f+127),track:i.UINT8.get(m,f+126),genre:i.UINT8.get(m,f+127)}:null}};class l extends i.StringType{constructor(f){super(f,"binary")}get(f,u){let b=super.get(f,u);return b=r.trimRightNull(b),b=b.trim(),b.length>0?b:void 0}}class c extends n.BasicParser{static getGenre(f){if(f<e.Genres.length)return e.Genres[f]}async parse(){if(!this.tokenizer.fileInfo.size){o("Skip checking for ID3v1 because the file-size is unknown");return}if(this.options.apeHeader){this.tokenizer.ignore(this.options.apeHeader.offset-this.tokenizer.position);const b=new a.APEv2Parser;b.init(this.metadata,this.tokenizer,this.options),await b.parseTags(this.options.apeHeader.footer)}const f=this.tokenizer.fileInfo.size-s.len;if(this.tokenizer.position>f){o("Already consumed the last 128 bytes");return}const u=await this.tokenizer.readToken(s,f);if(u){o("ID3v1 header found at: pos=%s",this.tokenizer.fileInfo.size-s.len);for(const y of["title","artist","album","comment","track","year"])u[y]&&u[y]!==""&&this.addTag(y,u[y]);const b=c.getGenre(u.genre);b&&this.addTag("genre",b)}else o("ID3v1 header not found at: pos=%s",this.tokenizer.fileInfo.size-s.len)}addTag(f,u){this.metadata.addTag("ID3v1",f,u)}}e.ID3v1Parser=c;async function d(m){if(m.fileSize>=128){const f=Buffer.alloc(3);return await m.randomRead(f,0,f.length,m.fileSize-128),f.toString("binary")==="TAG"}return!1}e.hasID3v1Header=d})(ID3v1Parser)),ID3v1Parser}var hasRequiredFrameParser;function requireFrameParser(){if(hasRequiredFrameParser)return FrameParser;hasRequiredFrameParser=1,Object.defineProperty(FrameParser,"__esModule",{value:!0}),FrameParser.FrameParser=FrameParser.parseGenre=void 0;const e=requireBrowser$3(),t=requireLib$2(),i=requireUtil$1(),r=requireID3v2Token(),n=requireID3v1Parser(),a=(0,e.default)("music-metadata:id3v2:frame-parser"),o="latin1";function s(d){const m=[];let f,u="";for(const b of d)if(typeof f=="string")if(b==="("&&f==="")u+="(",f=void 0;else if(b===")"){u!==""&&(m.push(u),u="");const y=l(f);y&&m.push(y),f=void 0}else f+=b;else b==="("?f="":u+=b;return u&&(m.length===0&&u.match(/^\d*$/)&&(u=n.Genres[u]),m.push(u)),m}FrameParser.parseGenre=s;function l(d){if(d==="RX")return"Remix";if(d==="CR")return"Cover";if(d.match(/^\d*$/))return n.Genres[d]}let c=class Pe{constructor(m,f){this.major=m,this.warningCollector=f}readData(m,f,u){if(m.length===0){this.warningCollector.addWarning(`id3v2.${this.major} header has empty tag type=${f}`);return}const{encoding:b,bom:y}=r.TextEncodingToken.get(m,0),w=m.length;let T=0,E=[];const R=Pe.getNullTerminatorLength(b);let C;const B={};switch(a(`Parsing tag type=${f}, encoding=${b}, bom=${y}`),f!=="TXXX"&&f[0]==="T"?"T*":f){case"T*":case"IPLS":case"MVIN":case"MVNM":case"PCS":case"PCST":let D;try{D=i.decodeString(m.slice(1),b).replace(/\x00+$/,"")}catch(Z){this.warningCollector.addWarning(`id3v2.${this.major} type=${f} header has invalid string value: ${Z.message}`)}switch(f){case"TMCL":case"TIPL":case"IPLS":E=this.splitValue(f,D),E=Pe.functionList(E);break;case"TRK":case"TRCK":case"TPOS":E=D;break;case"TCOM":case"TEXT":case"TOLY":case"TOPE":case"TPE1":case"TSRC":E=this.splitValue(f,D);break;case"TCO":case"TCON":E=this.splitValue(f,D).map(Z=>s(Z)).reduce((Z,L)=>Z.concat(L),[]);break;case"PCS":case"PCST":E=this.major>=4?this.splitValue(f,D):[D],E=Array.isArray(E)&&E[0]===""?1:0;break;default:E=this.major>=4?this.splitValue(f,D):[D]}break;case"TXXX":E=Pe.readIdentifierAndData(m,T+1,w,b),E={description:E.id,text:this.splitValue(f,i.decodeString(E.data,b).replace(/\x00+$/,""))};break;case"PIC":case"APIC":if(u){const Z={};switch(T+=1,this.major){case 2:Z.format=i.decodeString(m.slice(T,T+3),"latin1"),T+=3;break;case 3:case 4:C=i.findZero(m,T,w,o),Z.format=i.decodeString(m.slice(T,C),o),T=C+1;break;default:throw new Error("Warning: unexpected major versionIndex: "+this.major)}Z.format=Pe.fixPictureMimeType(Z.format),Z.type=r.AttachedPictureType[m[T]],T+=1,C=i.findZero(m,T,w,b),Z.description=i.decodeString(m.slice(T,C),b),T=C+R,Z.data=Buffer.from(m.slice(T,w)),E=Z}break;case"CNT":case"PCNT":E=t.UINT32_BE.get(m,0);break;case"SYLT":for(T+=7,E=[];T<w;){const Z=m.slice(T,T=i.findZero(m,T,w,b));T+=5,E.push(i.decodeString(Z,b))}break;case"ULT":case"USLT":case"COM":case"COMM":T+=1,B.language=i.decodeString(m.slice(T,T+3),o),T+=3,C=i.findZero(m,T,w,b),B.description=i.decodeString(m.slice(T,C),b),T=C+R,B.text=i.decodeString(m.slice(T,w),b).replace(/\x00+$/,""),E=[B];break;case"UFID":E=Pe.readIdentifierAndData(m,T,w,o),E={owner_identifier:E.id,identifier:E.data};break;case"PRIV":E=Pe.readIdentifierAndData(m,T,w,o),E={owner_identifier:E.id,data:E.data};break;case"POPM":C=i.findZero(m,T,w,o);const _=i.decodeString(m.slice(T,C),o);T=C+1;const x=w-T;E={email:_,rating:t.UINT8.get(m,T),counter:x>=5?t.UINT32_BE.get(m,T+1):void 0};break;case"GEOB":{C=i.findZero(m,T+1,w,b);const Z=i.decodeString(m.slice(T+1,C),o);T=C+1,C=i.findZero(m,T,w-T,b);const L=i.decodeString(m.slice(T,C),o);T=C+1,C=i.findZero(m,T,w-T,b);const z=i.decodeString(m.slice(T,C),o);E={type:Z,filename:L,description:z,data:m.slice(T+1,w)};break}case"WCOM":case"WCOP":case"WOAF":case"WOAR":case"WOAS":case"WORS":case"WPAY":case"WPUB":E=i.decodeString(m.slice(T,C),o);break;case"WXXX":{C=i.findZero(m,T+1,w,b);const Z=i.decodeString(m.slice(T+1,C),b);T=C+(b==="utf16le"?2:1),E={description:Z,url:i.decodeString(m.slice(T,w),o)};break}case"WFD":case"WFED":E=i.decodeString(m.slice(T+1,i.findZero(m,T+1,w,b)),b);break;case"MCDI":{E=m.slice(0,w);break}default:a("Warning: unsupported id3v2-tag-type: "+f);break}return E}static fixPictureMimeType(m){switch(m=m.toLocaleLowerCase(),m){case"jpg":return"image/jpeg";case"png":return"image/png"}return m}static functionList(m){const f={};for(let u=0;u+1<m.length;u+=2){const b=m[u+1].split(",");f[m[u]]=f.hasOwnProperty(m[u])?f[m[u]].concat(b):b}return f}splitValue(m,f){let u;return this.major<4?(u=f.split(/\x00/g),u.length>1?this.warningCollector.addWarning(`ID3v2.${this.major} ${m} uses non standard null-separator.`):u=f.split(/\//g)):u=f.split(/\x00/g),Pe.trimArray(u)}static trimArray(m){return m.map(f=>f.replace(/\x00+$/,"").trim())}static readIdentifierAndData(m,f,u,b){const y=i.findZero(m,f,u,b),w=i.decodeString(m.slice(f,y),b);return f=y+Pe.getNullTerminatorLength(b),{id:w,data:m.slice(f,u)}}static getNullTerminatorLength(m){return m==="utf16le"?2:1}};return FrameParser.FrameParser=c,FrameParser}var hasRequiredID3v2Parser;function requireID3v2Parser(){if(hasRequiredID3v2Parser)return ID3v2Parser;hasRequiredID3v2Parser=1,Object.defineProperty(ID3v2Parser,"__esModule",{value:!0}),ID3v2Parser.ID3v2Parser=void 0;const e=requireLib$2(),t=requireUtil$1(),i=requireFrameParser(),r=requireID3v2Token();let n=class Me{static removeUnsyncBytes(o){let s=0,l=0;for(;s<o.length-1;)s!==l&&(o[l]=o[s]),s+=o[s]===255&&o[s+1]===0?2:1,l++;return s<o.length&&(o[l++]=o[s]),o.slice(0,l)}static getFrameHeaderLength(o){switch(o){case 2:return 6;case 3:case 4:return 10;default:throw new Error("header versionIndex is incorrect")}}static readFrameFlags(o){return{status:{tag_alter_preservation:t.getBit(o,0,6),file_alter_preservation:t.getBit(o,0,5),read_only:t.getBit(o,0,4)},format:{grouping_identity:t.getBit(o,1,7),compression:t.getBit(o,1,3),encryption:t.getBit(o,1,2),unsynchronisation:t.getBit(o,1,1),data_length_indicator:t.getBit(o,1,0)}}}static readFrameData(o,s,l,c,d){const m=new i.FrameParser(l,d);switch(l){case 2:return m.readData(o,s.id,c);case 3:case 4:return s.flags.format.unsynchronisation&&(o=Me.removeUnsyncBytes(o)),s.flags.format.data_length_indicator&&(o=o.slice(4,o.length)),m.readData(o,s.id,c);default:throw new Error("Unexpected majorVer: "+l)}}static makeDescriptionTagName(o,s){return o+(s?":"+s:"")}async parse(o,s,l){this.tokenizer=s,this.metadata=o,this.options=l;const c=await this.tokenizer.readToken(r.ID3v2Header);if(c.fileIdentifier!=="ID3")throw new Error("expected ID3-header file-identifier 'ID3' was not found");return this.id3Header=c,this.headerType="ID3v2."+c.version.major,c.flags.isExtendedHeader?this.parseExtendedHeader():this.parseId3Data(c.size)}async parseExtendedHeader(){const o=await this.tokenizer.readToken(r.ExtendedHeader),s=o.size-r.ExtendedHeader.len;return s>0?this.parseExtendedHeaderData(s,o.size):this.parseId3Data(this.id3Header.size-o.size)}async parseExtendedHeaderData(o,s){return await this.tokenizer.ignore(o),this.parseId3Data(this.id3Header.size-s)}async parseId3Data(o){const s=await this.tokenizer.readToken(new e.Uint8ArrayType(o));for(const l of this.parseMetadata(s))if(l.id==="TXXX"){if(l.value)for(const c of l.value.text)this.addTag(Me.makeDescriptionTagName(l.id,l.value.description),c)}else if(l.id==="COM")for(const c of l.value)this.addTag(Me.makeDescriptionTagName(l.id,c.description),c.text);else if(l.id==="COMM")for(const c of l.value)this.addTag(Me.makeDescriptionTagName(l.id,c.description),c);else if(Array.isArray(l.value))for(const c of l.value)this.addTag(l.id,c);else this.addTag(l.id,l.value)}addTag(o,s){this.metadata.addTag(this.headerType,o,s)}parseMetadata(o){let s=0;const l=[];for(;s!==o.length;){const c=Me.getFrameHeaderLength(this.id3Header.version.major);if(s+c>o.length){this.metadata.addWarning("Illegal ID3v2 tag length");break}const d=o.slice(s,s+=c),m=this.readFrameHeader(d,this.id3Header.version.major),f=o.slice(s,s+=m.length),u=Me.readFrameData(f,m,this.id3Header.version.major,!this.options.skipCovers,this.metadata);u&&l.push({id:m.id,value:u})}return l}readFrameHeader(o,s){let l;switch(s){case 2:l={id:Buffer.from(o.slice(0,3)).toString("ascii"),length:e.UINT24_BE.get(o,3)},l.id.match(/[A-Z0-9]{3}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${l.id}`);break;case 3:case 4:l={id:Buffer.from(o.slice(0,4)).toString("ascii"),length:(s===4?r.UINT32SYNCSAFE:e.UINT32_BE).get(o,4),flags:Me.readFrameFlags(o.slice(8,10))},l.id.match(/[A-Z0-9]{4}/g)||this.metadata.addWarning(`Invalid ID3v2.${this.id3Header.version.major} frame-header-ID: ${l.id}`);break;default:throw new Error("Unexpected majorVer: "+s)}return l}};return ID3v2Parser.ID3v2Parser=n,ID3v2Parser}var AiffToken={},hasRequiredAiffToken;function requireAiffToken(){if(hasRequiredAiffToken)return AiffToken;hasRequiredAiffToken=1,Object.defineProperty(AiffToken,"__esModule",{value:!0}),AiffToken.Common=void 0;const e=requireLib$2(),t=requireFourCC();class i{constructor(n,a){this.isAifc=a;const o=a?22:18;if(n.chunkSize<o)throw new Error(`COMMON CHUNK size should always be at least ${o}`);this.len=n.chunkSize}get(n,a){const o=n.readUInt16BE(a+8)-16398,s=n.readUInt16BE(a+8+2),l={numChannels:n.readUInt16BE(a),numSampleFrames:n.readUInt32BE(a+2),sampleSize:n.readUInt16BE(a+6),sampleRate:o<0?s>>Math.abs(o):s<<o};if(this.isAifc){if(l.compressionType=t.FourCcToken.get(n,a+18),this.len>22){const c=n.readInt8(a+22);if(c>0){const d=(c+1)%2;if(23+c+d===this.len)l.compressionName=new e.StringType(c,"binary").get(n,a+23);else throw new Error("Illegal pstring length")}else l.compressionName=void 0}}else l.compressionName="PCM";return l}}return AiffToken.Common=i,AiffToken}var iff={},hasRequiredIff;function requireIff(){if(hasRequiredIff)return iff;hasRequiredIff=1,Object.defineProperty(iff,"__esModule",{value:!0}),iff.Header=void 0;const e=requireLib$2(),t=requireFourCC();return iff.Header={len:8,get:(i,r)=>({chunkID:t.FourCcToken.get(i,r),chunkSize:Number(BigInt(e.UINT32_BE.get(i,r+4)))})},iff}var hasRequiredAiffParser;function requireAiffParser(){if(hasRequiredAiffParser)return AiffParser;hasRequiredAiffParser=1,Object.defineProperty(AiffParser,"__esModule",{value:!0}),AiffParser.AIFFParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireCore$2(),r=requireID3v2Parser(),n=requireFourCC(),a=requireBasicParser(),o=requireAiffToken(),s=requireIff(),l=(0,t.default)("music-metadata:parser:aiff"),c={NONE:"not compressed	PCM	Apple Computer",sowt:"PCM (byte swapped)",fl32:"32-bit floating point IEEE 32-bit float",fl64:"64-bit floating point IEEE 64-bit float	Apple Computer",alaw:"ALaw 2:1	8-bit ITU-T G.711 A-law",ulaw:"Law 2:1	8-bit ITU-T G.711 -law	Apple Computer",ULAW:"CCITT G.711 u-law 8-bit ITU-T G.711 -law",ALAW:"CCITT G.711 A-law 8-bit ITU-T G.711 A-law",FL32:"Float 32	IEEE 32-bit float "};class d extends a.BasicParser{async parse(){if((await this.tokenizer.readToken(s.Header)).chunkID!=="FORM")throw new Error("Invalid Chunk-ID, expected 'FORM'");const u=await this.tokenizer.readToken(n.FourCcToken);switch(u){case"AIFF":this.metadata.setFormat("container",u),this.isCompressed=!1;break;case"AIFC":this.metadata.setFormat("container","AIFF-C"),this.isCompressed=!0;break;default:throw Error("Unsupported AIFF type: "+u)}this.metadata.setFormat("lossless",!this.isCompressed);try{for(;!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=s.Header.len;){l("Reading AIFF chunk at offset="+this.tokenizer.position);const b=await this.tokenizer.readToken(s.Header),y=2*Math.round(b.chunkSize/2),w=await this.readData(b);await this.tokenizer.ignore(y-w)}}catch(b){if(b instanceof i.EndOfStreamError)l("End-of-stream");else throw b}}async readData(f){var u;switch(f.chunkID){case"COMM":const b=await this.tokenizer.readToken(new o.Common(f,this.isCompressed));return this.metadata.setFormat("bitsPerSample",b.sampleSize),this.metadata.setFormat("sampleRate",b.sampleRate),this.metadata.setFormat("numberOfChannels",b.numChannels),this.metadata.setFormat("numberOfSamples",b.numSampleFrames),this.metadata.setFormat("duration",b.numSampleFrames/b.sampleRate),this.metadata.setFormat("codec",(u=b.compressionName)!==null&&u!==void 0?u:c[b.compressionType]),f.chunkSize;case"ID3 ":const y=await this.tokenizer.readToken(new e.Uint8ArrayType(f.chunkSize)),w=i.fromBuffer(y);return await new r.ID3v2Parser().parse(this.metadata,w,this.options),f.chunkSize;case"SSND":return this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*f.chunkSize/this.metadata.format.duration),0;case"NAME":case"AUTH":case"(c) ":case"ANNO":return this.readTextChunk(f);default:return l(`Ignore chunk id=${f.chunkID}, size=${f.chunkSize}`),0}}async readTextChunk(f){return(await this.tokenizer.readToken(new e.StringType(f.chunkSize,"ascii"))).split("\0").map(b=>b.trim()).filter(b=>b&&b.length>0).forEach(b=>{this.metadata.addTag("AIFF",f.chunkID,b.trim())}),f.chunkSize}}return AiffParser.AIFFParser=d,AiffParser}var AsfParser={},GUID={},hasRequiredGUID;function requireGUID(){if(hasRequiredGUID)return GUID;hasRequiredGUID=1,Object.defineProperty(GUID,"__esModule",{value:!0});let e=class Ce{static fromBin(i,r=0){return new Ce(this.decode(i,r))}static decode(i,r=0){return(i.readUInt32LE(r).toString(16)+"-"+i.readUInt16LE(r+4).toString(16)+"-"+i.readUInt16LE(r+6).toString(16)+"-"+i.readUInt16BE(r+8).toString(16)+"-"+i.slice(r+10,r+16).toString("hex")).toUpperCase()}static decodeMediaType(i){switch(i.str){case Ce.AudioMedia.str:return"audio";case Ce.VideoMedia.str:return"video";case Ce.CommandMedia.str:return"command";case Ce.Degradable_JPEG_Media.str:return"degradable-jpeg";case Ce.FileTransferMedia.str:return"file-transfer";case Ce.BinaryMedia.str:return"binary"}}static encode(i){const r=Buffer.alloc(16);return r.writeUInt32LE(parseInt(i.slice(0,8),16),0),r.writeUInt16LE(parseInt(i.slice(9,13),16),4),r.writeUInt16LE(parseInt(i.slice(14,18),16),6),Buffer.from(i.slice(19,23),"hex").copy(r,8),Buffer.from(i.slice(24),"hex").copy(r,10),r}constructor(i){this.str=i}equals(i){return this.str===i.str}toBin(){return Ce.encode(this.str)}};return e.HeaderObject=new e("75B22630-668E-11CF-A6D9-00AA0062CE6C"),e.DataObject=new e("75B22636-668E-11CF-A6D9-00AA0062CE6C"),e.SimpleIndexObject=new e("33000890-E5B1-11CF-89F4-00A0C90349CB"),e.IndexObject=new e("D6E229D3-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexObject=new e("FEB103F8-12AD-4C64-840F-2A1D2F7AD48C"),e.TimecodeIndexObject=new e("3CB73FD0-0C4A-4803-953D-EDF7B6228F0C"),e.FilePropertiesObject=new e("8CABDCA1-A947-11CF-8EE4-00C00C205365"),e.StreamPropertiesObject=new e("B7DC0791-A9B7-11CF-8EE6-00C00C205365"),e.HeaderExtensionObject=new e("5FBF03B5-A92E-11CF-8EE3-00C00C205365"),e.CodecListObject=new e("86D15240-311D-11D0-A3A4-00A0C90348F6"),e.ScriptCommandObject=new e("1EFB1A30-0B62-11D0-A39B-00A0C90348F6"),e.MarkerObject=new e("F487CD01-A951-11CF-8EE6-00C00C205365"),e.BitrateMutualExclusionObject=new e("D6E229DC-35DA-11D1-9034-00A0C90349BE"),e.ErrorCorrectionObject=new e("75B22635-668E-11CF-A6D9-00AA0062CE6C"),e.ContentDescriptionObject=new e("75B22633-668E-11CF-A6D9-00AA0062CE6C"),e.ExtendedContentDescriptionObject=new e("D2D0A440-E307-11D2-97F0-00A0C95EA850"),e.ContentBrandingObject=new e("2211B3FA-BD23-11D2-B4B7-00A0C955FC6E"),e.StreamBitratePropertiesObject=new e("7BF875CE-468D-11D1-8D82-006097C9A2B2"),e.ContentEncryptionObject=new e("2211B3FB-BD23-11D2-B4B7-00A0C955FC6E"),e.ExtendedContentEncryptionObject=new e("298AE614-2622-4C17-B935-DAE07EE9289C"),e.DigitalSignatureObject=new e("2211B3FC-BD23-11D2-B4B7-00A0C955FC6E"),e.PaddingObject=new e("1806D474-CADF-4509-A4BA-9AABCB96AAE8"),e.ExtendedStreamPropertiesObject=new e("14E6A5CB-C672-4332-8399-A96952065B5A"),e.AdvancedMutualExclusionObject=new e("A08649CF-4775-4670-8A16-6E35357566CD"),e.GroupMutualExclusionObject=new e("D1465A40-5A79-4338-B71B-E36B8FD6C249"),e.StreamPrioritizationObject=new e("D4FED15B-88D3-454F-81F0-ED5C45999E24"),e.BandwidthSharingObject=new e("A69609E6-517B-11D2-B6AF-00C04FD908E9"),e.LanguageListObject=new e("7C4346A9-EFE0-4BFC-B229-393EDE415C85"),e.MetadataObject=new e("C5F8CBEA-5BAF-4877-8467-AA8C44FA4CCA"),e.MetadataLibraryObject=new e("44231C94-9498-49D1-A141-1D134E457054"),e.IndexParametersObject=new e("D6E229DF-35DA-11D1-9034-00A0C90349BE"),e.MediaObjectIndexParametersObject=new e("6B203BAD-3F11-48E4-ACA8-D7613DE2CFA7"),e.TimecodeIndexParametersObject=new e("F55E496D-9797-4B5D-8C8B-604DFE9BFB24"),e.CompatibilityObject=new e("26F18B5D-4584-47EC-9F5F-0E651F0452C9"),e.AdvancedContentEncryptionObject=new e("43058533-6981-49E6-9B74-AD12CB86D58C"),e.AudioMedia=new e("F8699E40-5B4D-11CF-A8FD-00805F5C442B"),e.VideoMedia=new e("BC19EFC0-5B4D-11CF-A8FD-00805F5C442B"),e.CommandMedia=new e("59DACFC0-59E6-11D0-A3AC-00A0C90348F6"),e.JFIF_Media=new e("B61BE100-5B4E-11CF-A8FD-00805F5C442B"),e.Degradable_JPEG_Media=new e("35907DE0-E415-11CF-A917-00805F5C442B"),e.FileTransferMedia=new e("91BD222C-F21C-497A-8B6D-5AA86BFC0185"),e.BinaryMedia=new e("3AFB65E2-47EF-40F2-AC2C-70A90D71D343"),e.ASF_Index_Placeholder_Object=new e("D9AADE20-7C17-4F9C-BC28-8555DD98E2A2"),GUID.default=e,GUID}var AsfObject={},AsfUtil={},hasRequiredAsfUtil;function requireAsfUtil(){if(hasRequiredAsfUtil)return AsfUtil;hasRequiredAsfUtil=1,Object.defineProperty(AsfUtil,"__esModule",{value:!0}),AsfUtil.AsfUtil=void 0;const e=requireLib$2(),t=requireUtil$1();let i=class Ve{static getParserForAttr(n){return Ve.attributeParsers[n]}static parseUnicodeAttr(n){return t.stripNulls(t.decodeString(n,"utf16le"))}static parseByteArrayAttr(n){return Buffer.from(n)}static parseBoolAttr(n,a=0){return Ve.parseWordAttr(n,a)===1}static parseDWordAttr(n,a=0){return n.readUInt32LE(a)}static parseQWordAttr(n,a=0){return e.UINT64_LE.get(n,a)}static parseWordAttr(n,a=0){return n.readUInt16LE(a)}};return i.attributeParsers=[i.parseUnicodeAttr,i.parseByteArrayAttr,i.parseBoolAttr,i.parseDWordAttr,i.parseQWordAttr,i.parseWordAttr,i.parseByteArrayAttr],AsfUtil.AsfUtil=i,AsfUtil}var hasRequiredAsfObject;function requireAsfObject(){return hasRequiredAsfObject||(hasRequiredAsfObject=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WmPictureToken=e.MetadataLibraryObjectState=e.MetadataObjectState=e.ExtendedStreamPropertiesObjectState=e.ExtendedContentDescriptionObjectState=e.ContentDescriptionObjectState=e.readCodecEntries=e.HeaderExtensionObject=e.StreamPropertiesObject=e.FilePropertiesObject=e.IgnoreObjectState=e.State=e.HeaderObjectToken=e.TopLevelHeaderObjectToken=e.DataType=void 0;const t=requireUtil$1(),i=requireLib$2(),r=requireGUID(),n=requireAsfUtil(),a=requireID3v2Token();(function(D){D[D.UnicodeString=0]="UnicodeString",D[D.ByteArray=1]="ByteArray",D[D.Bool=2]="Bool",D[D.DWord=3]="DWord",D[D.QWord=4]="QWord",D[D.Word=5]="Word"})(e.DataType||(e.DataType={})),e.TopLevelHeaderObjectToken={len:30,get:(D,_)=>({objectId:r.default.fromBin(new i.BufferType(16).get(D,_)),objectSize:Number(i.UINT64_LE.get(D,_+16)),numberOfHeaderObjects:i.UINT32_LE.get(D,_+24)})},e.HeaderObjectToken={len:24,get:(D,_)=>({objectId:r.default.fromBin(new i.BufferType(16).get(D,_)),objectSize:Number(i.UINT64_LE.get(D,_+16))})};class o{constructor(_){this.len=Number(_.objectSize)-e.HeaderObjectToken.len}postProcessTag(_,x,Z,L){if(x==="WM/Picture")_.push({id:x,value:B.fromBuffer(L)});else{const z=n.AsfUtil.getParserForAttr(Z);if(!z)throw new Error("unexpected value headerType: "+Z);_.push({id:x,value:z(L)})}}}e.State=o;class s extends o{constructor(_){super(_)}get(_,x){return null}}e.IgnoreObjectState=s;class l extends o{constructor(_){super(_)}get(_,x){return{fileId:r.default.fromBin(_,x),fileSize:i.UINT64_LE.get(_,x+16),creationDate:i.UINT64_LE.get(_,x+24),dataPacketsCount:i.UINT64_LE.get(_,x+32),playDuration:i.UINT64_LE.get(_,x+40),sendDuration:i.UINT64_LE.get(_,x+48),preroll:i.UINT64_LE.get(_,x+56),flags:{broadcast:t.getBit(_,x+64,24),seekable:t.getBit(_,x+64,25)},minimumDataPacketSize:i.UINT32_LE.get(_,x+68),maximumDataPacketSize:i.UINT32_LE.get(_,x+72),maximumBitrate:i.UINT32_LE.get(_,x+76)}}}l.guid=r.default.FilePropertiesObject,e.FilePropertiesObject=l;class c extends o{constructor(_){super(_)}get(_,x){return{streamType:r.default.decodeMediaType(r.default.fromBin(_,x)),errorCorrectionType:r.default.fromBin(_,x+8)}}}c.guid=r.default.StreamPropertiesObject,e.StreamPropertiesObject=c;class d{constructor(){this.len=22}get(_,x){return{reserved1:r.default.fromBin(_,x),reserved2:_.readUInt16LE(x+16),extensionDataSize:_.readUInt32LE(x+18)}}}d.guid=r.default.HeaderExtensionObject,e.HeaderExtensionObject=d;const m={len:20,get:(D,_)=>({entryCount:D.readUInt16LE(_+16)})};async function f(D){const _=await D.readNumber(i.UINT16_LE);return(await D.readToken(new i.StringType(_*2,"utf16le"))).replace("\0","")}async function u(D){const _=await D.readToken(m),x=[];for(let Z=0;Z<_.entryCount;++Z)x.push(await y(D));return x}e.readCodecEntries=u;async function b(D){const _=await D.readNumber(i.UINT16_LE),x=Buffer.alloc(_);return await D.readBuffer(x),x}async function y(D){const _=await D.readNumber(i.UINT16_LE);return{type:{videoCodec:(_&1)===1,audioCodec:(_&2)===2},codecName:await f(D),description:await f(D),information:await b(D)}}class w extends o{constructor(_){super(_)}get(_,x){const Z=[];let L=x+10;for(let z=0;z<w.contentDescTags.length;++z){const K=_.readUInt16LE(x+z*2);if(K>0){const G=w.contentDescTags[z],ae=L+K;Z.push({id:G,value:n.AsfUtil.parseUnicodeAttr(_.slice(L,ae))}),L=ae}}return Z}}w.guid=r.default.ContentDescriptionObject,w.contentDescTags=["Title","Author","Copyright","Description","Rating"],e.ContentDescriptionObjectState=w;class T extends o{constructor(_){super(_)}get(_,x){const Z=[],L=_.readUInt16LE(x);let z=x+2;for(let K=0;K<L;K+=1){const G=_.readUInt16LE(z);z+=2;const ae=n.AsfUtil.parseUnicodeAttr(_.slice(z,z+G));z+=G;const de=_.readUInt16LE(z);z+=2;const ce=_.readUInt16LE(z);z+=2;const he=_.slice(z,z+ce);z+=ce,this.postProcessTag(Z,ae,de,he)}return Z}}T.guid=r.default.ExtendedContentDescriptionObject,e.ExtendedContentDescriptionObjectState=T;class E extends o{constructor(_){super(_)}get(_,x){return{startTime:i.UINT64_LE.get(_,x),endTime:i.UINT64_LE.get(_,x+8),dataBitrate:_.readInt32LE(x+12),bufferSize:_.readInt32LE(x+16),initialBufferFullness:_.readInt32LE(x+20),alternateDataBitrate:_.readInt32LE(x+24),alternateBufferSize:_.readInt32LE(x+28),alternateInitialBufferFullness:_.readInt32LE(x+32),maximumObjectSize:_.readInt32LE(x+36),flags:{reliableFlag:t.getBit(_,x+40,0),seekableFlag:t.getBit(_,x+40,1),resendLiveCleanpointsFlag:t.getBit(_,x+40,2)},streamNumber:_.readInt16LE(x+42),streamLanguageId:_.readInt16LE(x+44),averageTimePerFrame:_.readInt32LE(x+52),streamNameCount:_.readInt32LE(x+54),payloadExtensionSystems:_.readInt32LE(x+56),streamNames:[],streamPropertiesObject:null}}}E.guid=r.default.ExtendedStreamPropertiesObject,e.ExtendedStreamPropertiesObjectState=E;class R extends o{constructor(_){super(_)}get(_,x){const Z=[],L=Buffer.from(_),z=L.readUInt16LE(x);let K=x+2;for(let G=0;G<z;G+=1){K+=4;const ae=L.readUInt16LE(K);K+=2;const de=L.readUInt16LE(K);K+=2;const ce=L.readUInt32LE(K);K+=4;const he=n.AsfUtil.parseUnicodeAttr(L.slice(K,K+ae));K+=ae;const Y=L.slice(K,K+ce);K+=ce,this.postProcessTag(Z,he,de,Y)}return Z}}R.guid=r.default.MetadataObject,e.MetadataObjectState=R;class C extends R{constructor(_){super(_)}}C.guid=r.default.MetadataLibraryObject,e.MetadataLibraryObjectState=C;class B{static fromBase64(_){return this.fromBuffer(Buffer.from(_,"base64"))}static fromBuffer(_){return new B(_.length).get(_,0)}constructor(_){this.len=_}get(_,x){const Z=_.readUInt8(x++),L=_.readInt32LE(x);let z=5;for(;_.readUInt16BE(z)!==0;)z+=2;const K=_.slice(5,z).toString("utf16le");for(;_.readUInt16BE(z)!==0;)z+=2;const G=_.slice(5,z).toString("utf16le");return{type:a.AttachedPictureType[Z],format:K,description:G,size:L,data:_.slice(z+4)}}}e.WmPictureToken=B})(AsfObject)),AsfObject}var hasRequiredAsfParser;function requireAsfParser(){if(hasRequiredAsfParser)return AsfParser;hasRequiredAsfParser=1,Object.defineProperty(AsfParser,"__esModule",{value:!0}),AsfParser.AsfParser=void 0;const e=requireBrowser$3(),t=requireType(),i=requireGUID(),r=requireAsfObject(),n=requireBasicParser(),a=(0,e.default)("music-metadata:parser:ASF"),o="asf";let s=class extends n.BasicParser{async parse(){const c=await this.tokenizer.readToken(r.TopLevelHeaderObjectToken);if(!c.objectId.equals(i.default.HeaderObject))throw new Error("expected asf header; but was not found; got: "+c.objectId.str);try{await this.parseObjectHeader(c.numberOfHeaderObjects)}catch(d){a("Error while parsing ASF: %s",d)}}async parseObjectHeader(c){let d;do{const m=await this.tokenizer.readToken(r.HeaderObjectToken);switch(a("header GUID=%s",m.objectId.str),m.objectId.str){case r.FilePropertiesObject.guid.str:const f=await this.tokenizer.readToken(new r.FilePropertiesObject(m));this.metadata.setFormat("duration",Number(f.playDuration/BigInt(1e3))/1e4-Number(f.preroll)/1e3),this.metadata.setFormat("bitrate",f.maximumBitrate);break;case r.StreamPropertiesObject.guid.str:const u=await this.tokenizer.readToken(new r.StreamPropertiesObject(m));this.metadata.setFormat("container","ASF/"+u.streamType);break;case r.HeaderExtensionObject.guid.str:const b=await this.tokenizer.readToken(new r.HeaderExtensionObject);await this.parseExtensionObject(b.extensionDataSize);break;case r.ContentDescriptionObjectState.guid.str:d=await this.tokenizer.readToken(new r.ContentDescriptionObjectState(m)),this.addTags(d);break;case r.ExtendedContentDescriptionObjectState.guid.str:d=await this.tokenizer.readToken(new r.ExtendedContentDescriptionObjectState(m)),this.addTags(d);break;case i.default.CodecListObject.str:const y=await r.readCodecEntries(this.tokenizer);y.forEach(T=>{this.metadata.addStreamInfo({type:T.type.videoCodec?t.TrackType.video:t.TrackType.audio,codecName:T.codecName})});const w=y.filter(T=>T.type.audioCodec).map(T=>T.codecName).join("/");this.metadata.setFormat("codec",w);break;case i.default.StreamBitratePropertiesObject.str:await this.tokenizer.ignore(m.objectSize-r.HeaderObjectToken.len);break;case i.default.PaddingObject.str:a("Padding: %s bytes",m.objectSize-r.HeaderObjectToken.len),await this.tokenizer.ignore(m.objectSize-r.HeaderObjectToken.len);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+m.objectId.str),a("Ignore ASF-Object-GUID: %s",m.objectId.str),await this.tokenizer.readToken(new r.IgnoreObjectState(m))}}while(--c)}addTags(c){c.forEach(d=>{this.metadata.addTag(o,d.id,d.value)})}async parseExtensionObject(c){do{const d=await this.tokenizer.readToken(r.HeaderObjectToken),m=d.objectSize-r.HeaderObjectToken.len;switch(d.objectId.str){case r.ExtendedStreamPropertiesObjectState.guid.str:await this.tokenizer.readToken(new r.ExtendedStreamPropertiesObjectState(d));break;case r.MetadataObjectState.guid.str:const f=await this.tokenizer.readToken(new r.MetadataObjectState(d));this.addTags(f);break;case r.MetadataLibraryObjectState.guid.str:const u=await this.tokenizer.readToken(new r.MetadataLibraryObjectState(d));this.addTags(u);break;case i.default.PaddingObject.str:await this.tokenizer.ignore(m);break;case i.default.CompatibilityObject.str:this.tokenizer.ignore(m);break;case i.default.ASF_Index_Placeholder_Object.str:await this.tokenizer.ignore(m);break;default:this.metadata.addWarning("Ignore ASF-Object-GUID: "+d.objectId.str),await this.tokenizer.readToken(new r.IgnoreObjectState(d));break}c-=d.objectSize}while(c>0)}};return AsfParser.AsfParser=s,AsfParser}var FlacParser={},Vorbis={},hasRequiredVorbis;function requireVorbis(){if(hasRequiredVorbis)return Vorbis;hasRequiredVorbis=1,Object.defineProperty(Vorbis,"__esModule",{value:!0}),Vorbis.IdentificationHeader=Vorbis.CommonHeader=Vorbis.VorbisPictureToken=void 0;const e=requireLib$2(),t=requireID3v2Token();class i{static fromBase64(n){return this.fromBuffer(Buffer.from(n,"base64"))}static fromBuffer(n){return new i(n.length).get(n,0)}constructor(n){this.len=n}get(n,a){const o=t.AttachedPictureType[e.UINT32_BE.get(n,a)],s=e.UINT32_BE.get(n,a+=4),l=n.toString("utf-8",a+=4,a+s),c=e.UINT32_BE.get(n,a+=s),d=n.toString("utf-8",a+=4,a+c),m=e.UINT32_BE.get(n,a+=c),f=e.UINT32_BE.get(n,a+=4),u=e.UINT32_BE.get(n,a+=4),b=e.UINT32_BE.get(n,a+=4),y=e.UINT32_BE.get(n,a+=4),w=Buffer.from(n.slice(a+=4,a+y));return{type:o,format:l,description:d,width:m,height:f,colour_depth:u,indexed_color:b,data:w}}}return Vorbis.VorbisPictureToken=i,Vorbis.CommonHeader={len:7,get:(r,n)=>({packetType:r.readUInt8(n),vorbis:new e.StringType(6,"ascii").get(r,n+1)})},Vorbis.IdentificationHeader={len:23,get:(r,n)=>{const a=new DataView(r.buffer,r.byteOffset);return{version:a.getUint32(n+0,!0),channelMode:a.getUint8(n+4),sampleRate:a.getUint32(n+5,!0),bitrateMax:a.getUint32(n+9,!0),bitrateNominal:a.getUint32(n+13,!0),bitrateMin:a.getUint32(n+17,!0)}}},Vorbis}var AbstractID3Parser={},hasRequiredAbstractID3Parser;function requireAbstractID3Parser(){if(hasRequiredAbstractID3Parser)return AbstractID3Parser;hasRequiredAbstractID3Parser=1,Object.defineProperty(AbstractID3Parser,"__esModule",{value:!0}),AbstractID3Parser.AbstractID3Parser=void 0;const e=requireCore$2(),t=requireBrowser$3(),i=requireID3v2Token(),r=requireID3v2Parser(),n=requireID3v1Parser(),a=requireBasicParser(),o=(0,t.default)("music-metadata:parser:ID3");let s=class extends a.BasicParser{constructor(){super(...arguments),this.id3parser=new r.ID3v2Parser}static async startsWithID3v2Header(c){return(await c.peekToken(i.ID3v2Header)).fileIdentifier==="ID3"}async parse(){try{await this.parseID3v2()}catch(c){if(c instanceof e.EndOfStreamError)o("End-of-stream");else throw c}}finalize(){}async parseID3v2(){await this.tryReadId3v2Headers(),o("End of ID3v2 header, go to MPEG-parser: pos=%s",this.tokenizer.position),await this.postId3v2Parse(),this.options.skipPostHeaders&&this.metadata.hasAny()?this.finalize():(await new n.ID3v1Parser().init(this.metadata,this.tokenizer,this.options).parse(),this.finalize())}async tryReadId3v2Headers(){if((await this.tokenizer.peekToken(i.ID3v2Header)).fileIdentifier==="ID3")return o("Found ID3v2 header, pos=%s",this.tokenizer.position),await this.id3parser.parse(this.metadata,this.tokenizer,this.options),this.tryReadId3v2Headers()}};return AbstractID3Parser.AbstractID3Parser=s,AbstractID3Parser}var VorbisParser={},VorbisDecoder={},hasRequiredVorbisDecoder;function requireVorbisDecoder(){if(hasRequiredVorbisDecoder)return VorbisDecoder;hasRequiredVorbisDecoder=1,Object.defineProperty(VorbisDecoder,"__esModule",{value:!0}),VorbisDecoder.VorbisDecoder=void 0;const e=requireLib$2();let t=class{constructor(r,n){this.data=r,this.offset=n}readInt32(){const r=e.UINT32_LE.get(this.data,this.offset);return this.offset+=4,r}readStringUtf8(){const r=this.readInt32(),n=Buffer.from(this.data).toString("utf-8",this.offset,this.offset+r);return this.offset+=r,n}parseUserComment(){const r=this.offset,n=this.readStringUtf8(),a=n.indexOf("=");return{key:n.slice(0,a).toUpperCase(),value:n.slice(a+1),len:this.offset-r}}};return VorbisDecoder.VorbisDecoder=t,VorbisDecoder}var hasRequiredVorbisParser;function requireVorbisParser(){if(hasRequiredVorbisParser)return VorbisParser;hasRequiredVorbisParser=1,Object.defineProperty(VorbisParser,"__esModule",{value:!0}),VorbisParser.VorbisParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireVorbisDecoder(),r=requireVorbis(),n=(0,t.default)("music-metadata:parser:ogg:vorbis1");let a=class{constructor(s,l){this.metadata=s,this.options=l,this.pageSegments=[]}parsePage(s,l){if(s.headerType.firstPage)this.parseFirstPage(s,l);else{if(s.headerType.continued){if(this.pageSegments.length===0)throw new Error("Cannot continue on previous page");this.pageSegments.push(l)}if(s.headerType.lastPage||!s.headerType.continued){if(this.pageSegments.length>0){const c=Buffer.concat(this.pageSegments);this.parseFullPage(c)}this.pageSegments=s.headerType.lastPage?[]:[l]}}s.headerType.lastPage&&this.calculateDuration(s)}flush(){this.parseFullPage(Buffer.concat(this.pageSegments))}parseUserComment(s,l){const d=new i.VorbisDecoder(s,l).parseUserComment();return this.addTag(d.key,d.value),d.len}addTag(s,l){if(s==="METADATA_BLOCK_PICTURE"&&typeof l=="string"){if(this.options.skipCovers){n("Ignore picture");return}l=r.VorbisPictureToken.fromBase64(l),n(`Push picture: id=${s}, format=${l.format}`)}else n(`Push tag: id=${s}, value=${l}`);this.metadata.addTag("vorbis",s,l)}calculateDuration(s){this.metadata.format.sampleRate&&s.absoluteGranulePosition>=0&&(this.metadata.setFormat("numberOfSamples",s.absoluteGranulePosition),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate))}parseFirstPage(s,l){this.metadata.setFormat("codec","Vorbis I"),n("Parse first page");const c=r.CommonHeader.get(l,0);if(c.vorbis!=="vorbis")throw new Error("Metadata does not look like Vorbis");if(c.packetType===1){const d=r.IdentificationHeader.get(l,r.CommonHeader.len);this.metadata.setFormat("sampleRate",d.sampleRate),this.metadata.setFormat("bitrate",d.bitrateNominal),this.metadata.setFormat("numberOfChannels",d.channelMode),n("sample-rate=%s[hz], bitrate=%s[b/s], channel-mode=%s",d.sampleRate,d.bitrateNominal,d.channelMode)}else throw new Error("First Ogg page should be type 1: the identification header")}parseFullPage(s){const l=r.CommonHeader.get(s,0);switch(n("Parse full page: type=%s, byteLength=%s",l.packetType,s.byteLength),l.packetType){case 3:return this.parseUserCommentList(s,r.CommonHeader.len)}}parseUserCommentList(s,l){const c=e.UINT32_LE.get(s,l);l+=4,l+=c;let d=e.UINT32_LE.get(s,l);for(l+=4;d-- >0;)l+=this.parseUserComment(s,l)}};return VorbisParser.VorbisParser=a,VorbisParser}var hasRequiredFlacParser;function requireFlacParser(){if(hasRequiredFlacParser)return FlacParser;hasRequiredFlacParser=1,Object.defineProperty(FlacParser,"__esModule",{value:!0}),FlacParser.FlacParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireUtil$1(),r=requireVorbis(),n=requireAbstractID3Parser(),a=requireFourCC(),o=requireVorbisParser(),s=requireVorbisDecoder(),l=(0,t.default)("music-metadata:parser:FLAC");var c;(function(f){f[f.STREAMINFO=0]="STREAMINFO",f[f.PADDING=1]="PADDING",f[f.APPLICATION=2]="APPLICATION",f[f.SEEKTABLE=3]="SEEKTABLE",f[f.VORBIS_COMMENT=4]="VORBIS_COMMENT",f[f.CUESHEET=5]="CUESHEET",f[f.PICTURE=6]="PICTURE"})(c||(c={}));let d=class extends n.AbstractID3Parser{constructor(){super(...arguments),this.padding=0}init(u,b,y){return super.init(u,b,y),this.vorbisParser=new o.VorbisParser(u,y),this}async postId3v2Parse(){if((await this.tokenizer.readToken(a.FourCcToken)).toString()!=="fLaC")throw new Error("Invalid FLAC preamble");let b;do b=await this.tokenizer.readToken(m.BlockHeader),await this.parseDataBlock(b);while(!b.lastBlock);if(this.tokenizer.fileInfo.size&&this.metadata.format.duration){const y=this.tokenizer.fileInfo.size-this.tokenizer.position;this.metadata.setFormat("bitrate",8*y/this.metadata.format.duration)}}parseDataBlock(u){switch(l(`blockHeader type=${u.type}, length=${u.length}`),u.type){case c.STREAMINFO:return this.parseBlockStreamInfo(u.length);case c.PADDING:this.padding+=u.length;break;case c.APPLICATION:break;case c.SEEKTABLE:break;case c.VORBIS_COMMENT:return this.parseComment(u.length);case c.CUESHEET:break;case c.PICTURE:return this.parsePicture(u.length).then();default:this.metadata.addWarning("Unknown block type: "+u.type)}return this.tokenizer.ignore(u.length).then()}async parseBlockStreamInfo(u){if(u!==m.BlockStreamInfo.len)throw new Error("Unexpected block-stream-info length");const b=await this.tokenizer.readToken(m.BlockStreamInfo);this.metadata.setFormat("container","FLAC"),this.metadata.setFormat("codec","FLAC"),this.metadata.setFormat("lossless",!0),this.metadata.setFormat("numberOfChannels",b.channels),this.metadata.setFormat("bitsPerSample",b.bitsPerSample),this.metadata.setFormat("sampleRate",b.sampleRate),b.totalSamples>0&&this.metadata.setFormat("duration",b.totalSamples/b.sampleRate)}async parseComment(u){const b=await this.tokenizer.readToken(new e.Uint8ArrayType(u)),y=new s.VorbisDecoder(b,0);y.readStringUtf8();const w=y.readInt32();for(let T=0;T<w;T++){const E=y.parseUserComment();this.vorbisParser.addTag(E.key,E.value)}}async parsePicture(u){if(this.options.skipCovers)return this.tokenizer.ignore(u);{const b=await this.tokenizer.readToken(new r.VorbisPictureToken(u));this.vorbisParser.addTag("METADATA_BLOCK_PICTURE",b)}}};FlacParser.FlacParser=d;class m{}return m.BlockHeader={len:4,get:(f,u)=>({lastBlock:i.getBit(f,u,7),type:i.getBitAllignedNumber(f,u,1,7),length:e.UINT24_BE.get(f,u+1)})},m.BlockStreamInfo={len:34,get:(f,u)=>({minimumBlockSize:e.UINT16_BE.get(f,u),maximumBlockSize:e.UINT16_BE.get(f,u+2)/1e3,minimumFrameSize:e.UINT24_BE.get(f,u+4),maximumFrameSize:e.UINT24_BE.get(f,u+7),sampleRate:e.UINT24_BE.get(f,u+10)>>4,channels:i.getBitAllignedNumber(f,u+12,4,3)+1,bitsPerSample:i.getBitAllignedNumber(f,u+12,7,5)+1,totalSamples:i.getBitAllignedNumber(f,u+13,4,36),fileMD5:new e.Uint8ArrayType(16).get(f,u+18)})},FlacParser}var MP4Parser={},Atom={},AtomToken={},hasRequiredAtomToken;function requireAtomToken(){return hasRequiredAtomToken||(hasRequiredAtomToken=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ChapterText=e.StcoAtom=e.StszAtom=e.StscAtom=e.SampleToChunkToken=e.SttsAtom=e.TimeToSampleToken=e.SoundSampleDescriptionV0=e.SoundSampleDescriptionVersion=e.StsdAtom=e.TrackHeaderAtom=e.NameAtom=e.DataAtom=e.MvhdAtom=e.MdhdAtom=e.FixedLengthAtom=e.mhdr=e.tkhd=e.ftyp=e.ExtendedSize=e.Header=void 0;const t=requireLib$2(),i=requireBrowser$3(),r=requireFourCC(),n=(0,i.default)("music-metadata:parser:MP4:atom");e.Header={len:8,get:(D,_)=>{const x=t.UINT32_BE.get(D,_);if(x<0)throw new Error("Invalid atom header length");return{length:BigInt(x),name:new t.StringType(4,"binary").get(D,_+4)}},put:(D,_,x)=>(t.UINT32_BE.put(D,_,Number(x.length)),r.FourCcToken.put(D,_+4,x.name))},e.ExtendedSize=t.UINT64_BE,e.ftyp={len:4,get:(D,_)=>({type:new t.StringType(4,"ascii").get(D,_)})},e.tkhd={len:4,get:(D,_)=>({type:new t.StringType(4,"ascii").get(D,_)})},e.mhdr={len:8,get:(D,_)=>({version:t.UINT8.get(D,_),flags:t.UINT24_BE.get(D,_+1),nextItemID:t.UINT32_BE.get(D,_+4)})};class a{constructor(_,x,Z){if(this.len=_,_<x)throw new Error(`Atom ${Z} expected to be ${x}, but specifies ${_} bytes long.`);_>x&&n(`Warning: atom ${Z} expected to be ${x}, but was actually ${_} bytes long.`)}}e.FixedLengthAtom=a;const o={len:4,get:(D,_)=>{const x=t.UINT32_BE.get(D,_)-2082844800;return new Date(x*1e3)}};class s extends a{constructor(_){super(_,24,"mdhd"),this.len=_}get(_,x){return{version:t.UINT8.get(_,x+0),flags:t.UINT24_BE.get(_,x+1),creationTime:o.get(_,x+4),modificationTime:o.get(_,x+8),timeScale:t.UINT32_BE.get(_,x+12),duration:t.UINT32_BE.get(_,x+16),language:t.UINT16_BE.get(_,x+20),quality:t.UINT16_BE.get(_,x+22)}}}e.MdhdAtom=s;class l extends a{constructor(_){super(_,100,"mvhd"),this.len=_}get(_,x){return{version:t.UINT8.get(_,x),flags:t.UINT24_BE.get(_,x+1),creationTime:o.get(_,x+4),modificationTime:o.get(_,x+8),timeScale:t.UINT32_BE.get(_,x+12),duration:t.UINT32_BE.get(_,x+16),preferredRate:t.UINT32_BE.get(_,x+20),preferredVolume:t.UINT16_BE.get(_,x+24),previewTime:t.UINT32_BE.get(_,x+72),previewDuration:t.UINT32_BE.get(_,x+76),posterTime:t.UINT32_BE.get(_,x+80),selectionTime:t.UINT32_BE.get(_,x+84),selectionDuration:t.UINT32_BE.get(_,x+88),currentTime:t.UINT32_BE.get(_,x+92),nextTrackID:t.UINT32_BE.get(_,x+96)}}}e.MvhdAtom=l;class c{constructor(_){this.len=_}get(_,x){return{type:{set:t.UINT8.get(_,x+0),type:t.UINT24_BE.get(_,x+1)},locale:t.UINT24_BE.get(_,x+4),value:Buffer.from(new t.Uint8ArrayType(this.len-8).get(_,x+8))}}}e.DataAtom=c;class d{constructor(_){this.len=_}get(_,x){return{version:t.UINT8.get(_,x),flags:t.UINT24_BE.get(_,x+1),name:new t.StringType(this.len-4,"utf-8").get(_,x+4)}}}e.NameAtom=d;class m{constructor(_){this.len=_}get(_,x){return{version:t.UINT8.get(_,x),flags:t.UINT24_BE.get(_,x+1),creationTime:o.get(_,x+4),modificationTime:o.get(_,x+8),trackId:t.UINT32_BE.get(_,x+12),duration:t.UINT32_BE.get(_,x+20),layer:t.UINT16_BE.get(_,x+24),alternateGroup:t.UINT16_BE.get(_,x+26),volume:t.UINT16_BE.get(_,x+28)}}}e.TrackHeaderAtom=m;const f={len:8,get:(D,_)=>({version:t.UINT8.get(D,_),flags:t.UINT24_BE.get(D,_+1),numberOfEntries:t.UINT32_BE.get(D,_+4)})};class u{constructor(_){this.len=_}get(_,x){return{dataFormat:r.FourCcToken.get(_,x),dataReferenceIndex:t.UINT16_BE.get(_,x+10),description:new t.Uint8ArrayType(this.len-12).get(_,x+12)}}}class b{constructor(_){this.len=_}get(_,x){const Z=f.get(_,x);x+=f.len;const L=[];for(let z=0;z<Z.numberOfEntries;++z){const K=t.UINT32_BE.get(_,x);x+=t.UINT32_BE.len,L.push(new u(K).get(_,x)),x+=K}return{header:Z,table:L}}}e.StsdAtom=b,e.SoundSampleDescriptionVersion={len:8,get(D,_){return{version:t.INT16_BE.get(D,_),revision:t.INT16_BE.get(D,_+2),vendor:t.INT32_BE.get(D,_+4)}}},e.SoundSampleDescriptionV0={len:12,get(D,_){return{numAudioChannels:t.INT16_BE.get(D,_+0),sampleSize:t.INT16_BE.get(D,_+2),compressionId:t.INT16_BE.get(D,_+4),packetSize:t.INT16_BE.get(D,_+6),sampleRate:t.UINT16_BE.get(D,_+8)+t.UINT16_BE.get(D,_+10)/1e4}}};class y{constructor(_,x){this.len=_,this.token=x}get(_,x){const Z=t.INT32_BE.get(_,x+4);return{version:t.INT8.get(_,x+0),flags:t.INT24_BE.get(_,x+1),numberOfEntries:Z,entries:B(_,this.token,x+8,this.len-8,Z)}}}e.TimeToSampleToken={len:8,get(D,_){return{count:t.INT32_BE.get(D,_+0),duration:t.INT32_BE.get(D,_+4)}}};class w extends y{constructor(_){super(_,e.TimeToSampleToken),this.len=_}}e.SttsAtom=w,e.SampleToChunkToken={len:12,get(D,_){return{firstChunk:t.INT32_BE.get(D,_),samplesPerChunk:t.INT32_BE.get(D,_+4),sampleDescriptionId:t.INT32_BE.get(D,_+8)}}};class T extends y{constructor(_){super(_,e.SampleToChunkToken),this.len=_}}e.StscAtom=T;class E{constructor(_){this.len=_}get(_,x){const Z=t.INT32_BE.get(_,x+8);return{version:t.INT8.get(_,x),flags:t.INT24_BE.get(_,x+1),sampleSize:t.INT32_BE.get(_,x+4),numberOfEntries:Z,entries:B(_,t.INT32_BE,x+12,this.len-12,Z)}}}e.StszAtom=E;class R extends y{constructor(_){super(_,t.INT32_BE),this.len=_}}e.StcoAtom=R;class C{constructor(_){this.len=_}get(_,x){const Z=t.INT16_BE.get(_,x+0);return new t.StringType(Z,"utf-8").get(_,x+2)}}e.ChapterText=C;function B(D,_,x,Z,L){if(n(`remainingLen=${Z}, numberOfEntries=${L} * token-len=${_.len}`),Z===0)return[];if(Z!==L*_.len)throw new Error("mismatch number-of-entries with remaining atom-length");const z=[];for(let K=0;K<L;++K)z.push(_.get(D,x)),x+=_.len;return z}})(AtomToken)),AtomToken}var hasRequiredAtom;function requireAtom(){if(hasRequiredAtom)return Atom;hasRequiredAtom=1,Object.defineProperty(Atom,"__esModule",{value:!0}),Atom.Atom=void 0;const e=requireBrowser$3(),t=requireAtomToken(),i=(0,e.default)("music-metadata:parser:MP4:Atom");let r=class We{static async readAtom(a,o,s,l){const c=a.position,d=await a.readToken(t.Header);d.length===BigInt(1)&&(d.length=await a.readToken(t.ExtendedSize));const f=new We(d,d.length===BigInt(1),s),u=f.getPayloadLength(l);return i(`parse atom name=${f.atomPath}, extended=${f.extended}, offset=${c}, len=${f.header.length}`),await f.readData(a,o,u),f}constructor(a,o,s){this.header=a,this.extended=o,this.parent=s,this.children=[],this.atomPath=(this.parent?this.parent.atomPath+".":"")+this.header.name}getHeaderLength(){return this.extended?16:8}getPayloadLength(a){return(this.header.length===BigInt(0)?a:Number(this.header.length))-this.getHeaderLength()}async readAtoms(a,o,s){for(;s>0;){const l=await We.readAtom(a,o,this,s);this.children.push(l),s-=l.header.length===BigInt(0)?s:Number(l.header.length)}}async readData(a,o,s){switch(this.header.name){case"moov":case"udta":case"trak":case"mdia":case"minf":case"stbl":case"<id>":case"ilst":case"tref":return this.readAtoms(a,o,this.getPayloadLength(s));case"meta":const c=(await a.peekToken(t.Header)).name==="hdlr"?0:4;return await a.ignore(c),this.readAtoms(a,o,this.getPayloadLength(s)-c);case"mdhd":case"mvhd":case"tkhd":case"stsz":case"mdat":default:return o(this,s)}}};return Atom.Atom=r,Atom}var hasRequiredMP4Parser;function requireMP4Parser(){if(hasRequiredMP4Parser)return MP4Parser;hasRequiredMP4Parser=1,Object.defineProperty(MP4Parser,"__esModule",{value:!0}),MP4Parser.MP4Parser=void 0;const e=requireBrowser$3(),t=requireLib$2(),i=requireBasicParser(),r=requireID3v1Parser(),n=requireType(),a=requireAtom(),o=requireAtomToken(),s=(0,e.default)("music-metadata:parser:MP4"),l="iTunes",c={raw:{lossy:!1,format:"raw"},MAC3:{lossy:!0,format:"MACE 3:1"},MAC6:{lossy:!0,format:"MACE 6:1"},ima4:{lossy:!0,format:"IMA 4:1"},ulaw:{lossy:!0,format:"uLaw 2:1"},alaw:{lossy:!0,format:"uLaw 2:1"},Qclp:{lossy:!0,format:"QUALCOMM PureVoice"},".mp3":{lossy:!0,format:"MPEG-1 layer 3"},alac:{lossy:!1,format:"ALAC"},"ac-3":{lossy:!0,format:"AC-3"},mp4a:{lossy:!0,format:"MPEG-4/AAC"},mp4s:{lossy:!0,format:"MP4S"},c608:{lossy:!0,format:"CEA-608"},c708:{lossy:!0,format:"CEA-708"}};function d(f,u,b){return b.indexOf(f)===u}let m=class Ge extends i.BasicParser{constructor(){super(...arguments),this.atomParsers={mvhd:async u=>{const b=await this.tokenizer.readToken(new o.MvhdAtom(u));this.metadata.setFormat("creationTime",b.creationTime),this.metadata.setFormat("modificationTime",b.modificationTime)},mdhd:async u=>{const b=await this.tokenizer.readToken(new o.MdhdAtom(u)),y=this.getTrackDescription();y.creationTime=b.creationTime,y.modificationTime=b.modificationTime,y.timeScale=b.timeScale,y.duration=b.duration},chap:async u=>{const b=this.getTrackDescription(),y=[];for(;u>=t.UINT32_BE.len;)y.push(await this.tokenizer.readNumber(t.UINT32_BE)),u-=t.UINT32_BE.len;b.chapterList=y},tkhd:async u=>{const b=await this.tokenizer.readToken(new o.TrackHeaderAtom(u));this.tracks.push(b)},mdat:async u=>{if(this.audioLengthInBytes=u,this.calculateBitRate(),this.options.includeChapters){const b=this.tracks.filter(y=>y.chapterList);if(b.length===1){const y=b[0].chapterList,w=this.tracks.filter(T=>y.indexOf(T.trackId)!==-1);if(w.length===1)return this.parseChapterTrack(w[0],b[0],u)}}await this.tokenizer.ignore(u)},ftyp:async u=>{const b=[];for(;u>0;){const w=await this.tokenizer.readToken(o.ftyp);u-=o.ftyp.len;const T=w.type.replace(/\W/g,"");T.length>0&&b.push(T)}s(`ftyp: ${b.join("/")}`);const y=b.filter(d).join("/");this.metadata.setFormat("container",y)},stsd:async u=>{const b=await this.tokenizer.readToken(new o.StsdAtom(u)),y=this.getTrackDescription();y.soundSampleDescription=b.table.map(w=>this.parseSoundSampleDescription(w))},stsc:async u=>{const b=await this.tokenizer.readToken(new o.StscAtom(u));this.getTrackDescription().sampleToChunkTable=b.entries},stts:async u=>{const b=await this.tokenizer.readToken(new o.SttsAtom(u));this.getTrackDescription().timeToSampleTable=b.entries},stsz:async u=>{const b=await this.tokenizer.readToken(new o.StszAtom(u)),y=this.getTrackDescription();y.sampleSize=b.sampleSize,y.sampleSizeTable=b.entries},stco:async u=>{const b=await this.tokenizer.readToken(new o.StcoAtom(u));this.getTrackDescription().chunkOffsetTable=b.entries},date:async u=>{const b=await this.tokenizer.readToken(new t.StringType(u,"utf-8"));this.addTag("date",b)}}}static read_BE_Integer(u,b){const y=(b?"INT":"UINT")+u.length*8+(u.length>1?"_BE":""),w=t[y];if(!w)throw new Error('Token for integer type not found: "'+y+'"');return Number(w.get(u,0))}async parse(){this.tracks=[];let u=this.tokenizer.fileInfo.size;for(;!this.tokenizer.fileInfo.size||u>0;){try{if((await this.tokenizer.peekToken(o.Header)).name==="\0\0\0\0"){const E=`Error at offset=${this.tokenizer.position}: box.id=0`;s(E),this.addWarning(E);break}}catch(T){const E=`Error at offset=${this.tokenizer.position}: ${T.message}`;s(E),this.addWarning(E);break}const w=await a.Atom.readAtom(this.tokenizer,(T,E)=>this.handleAtom(T,E),null,u);u-=w.header.length===BigInt(0)?u:Number(w.header.length)}const b=[];this.tracks.forEach(w=>{const T=[];w.soundSampleDescription.forEach(E=>{const R={},C=c[E.dataFormat];if(C?(T.push(C.format),R.codecName=C.format):R.codecName=`<${E.dataFormat}>`,E.description){const{description:B}=E;B.sampleRate>0&&(R.type=n.TrackType.audio,R.audio={samplingFrequency:B.sampleRate,bitDepth:B.sampleSize,channels:B.numAudioChannels})}this.metadata.addStreamInfo(R)}),T.length>=1&&b.push(T.join("/"))}),b.length>0&&this.metadata.setFormat("codec",b.filter(d).join("+"));const y=this.tracks.filter(w=>w.soundSampleDescription.length>=1&&w.soundSampleDescription[0].description&&w.soundSampleDescription[0].description.numAudioChannels>0);if(y.length>=1){const w=y[0];if(w.timeScale>0){const R=w.duration/w.timeScale;this.metadata.setFormat("duration",R)}const T=w.soundSampleDescription[0];if(T.description&&(this.metadata.setFormat("sampleRate",T.description.sampleRate),this.metadata.setFormat("bitsPerSample",T.description.sampleSize),this.metadata.setFormat("numberOfChannels",T.description.numAudioChannels),w.timeScale===0&&w.timeToSampleTable.length>0)){const C=w.timeToSampleTable.map(B=>B.count*B.duration).reduce((B,D)=>B+D)/T.description.sampleRate;this.metadata.setFormat("duration",C)}const E=c[T.dataFormat];E&&this.metadata.setFormat("lossless",!E.lossy),this.calculateBitRate()}}async handleAtom(u,b){if(u.parent)switch(u.parent.header.name){case"ilst":case"<id>":return this.parseMetadataItemData(u)}if(this.atomParsers[u.header.name])return this.atomParsers[u.header.name](b);s(`No parser for atom path=${u.atomPath}, payload-len=${b}, ignoring atom`),await this.tokenizer.ignore(b)}getTrackDescription(){return this.tracks[this.tracks.length-1]}calculateBitRate(){this.audioLengthInBytes&&this.metadata.format.duration&&this.metadata.setFormat("bitrate",8*this.audioLengthInBytes/this.metadata.format.duration)}addTag(u,b){this.metadata.addTag(l,u,b)}addWarning(u){s("Warning: "+u),this.metadata.addWarning(u)}parseMetadataItemData(u){let b=u.header.name;return u.readAtoms(this.tokenizer,async(y,w)=>{const T=y.getPayloadLength(w);switch(y.header.name){case"data":return this.parseValueAtom(b,y);case"name":case"mean":case"rate":const E=await this.tokenizer.readToken(new o.NameAtom(T));b+=":"+E.name;break;default:const R=await this.tokenizer.readToken(new t.BufferType(T));this.addWarning("Unsupported meta-item: "+b+"["+y.header.name+"] => value="+R.toString("hex")+" ascii="+R.toString("ascii"))}},u.getPayloadLength(0))}async parseValueAtom(u,b){const y=await this.tokenizer.readToken(new o.DataAtom(Number(b.header.length)-o.Header.len));if(y.type.set!==0)throw new Error("Unsupported type-set != 0: "+y.type.set);switch(y.type.type){case 0:switch(u){case"trkn":case"disk":const w=t.UINT8.get(y.value,3),T=t.UINT8.get(y.value,5);this.addTag(u,w+"/"+T);break;case"gnre":const E=t.UINT8.get(y.value,1),R=r.Genres[E-1];this.addTag(u,R);break;case"rate":const C=y.value.toString("ascii");this.addTag(u,C);break;default:s("unknown proprietary value type for: "+b.atomPath)}break;case 1:case 18:this.addTag(u,y.value.toString("utf-8"));break;case 13:if(this.options.skipCovers)break;this.addTag(u,{format:"image/jpeg",data:Buffer.from(y.value)});break;case 14:if(this.options.skipCovers)break;this.addTag(u,{format:"image/png",data:Buffer.from(y.value)});break;case 21:this.addTag(u,Ge.read_BE_Integer(y.value,!0));break;case 22:this.addTag(u,Ge.read_BE_Integer(y.value,!1));break;case 65:this.addTag(u,y.value.readInt8(0));break;case 66:this.addTag(u,y.value.readInt16BE(0));break;case 67:this.addTag(u,y.value.readInt32BE(0));break;default:this.addWarning(`atom key=${u}, has unknown well-known-type (data-type): ${y.type.type}`)}}parseSoundSampleDescription(u){const b={dataFormat:u.dataFormat,dataReferenceIndex:u.dataReferenceIndex};let y=0;const w=o.SoundSampleDescriptionVersion.get(u.description,y);return y+=o.SoundSampleDescriptionVersion.len,w.version===0||w.version===1?b.description=o.SoundSampleDescriptionV0.get(u.description,y):s(`Warning: sound-sample-description ${w} not implemented`),b}async parseChapterTrack(u,b,y){if(!u.sampleSize&&u.chunkOffsetTable.length!==u.sampleSizeTable.length)throw new Error("Expected equal chunk-offset-table & sample-size-table length.");const w=[];for(let T=0;T<u.chunkOffsetTable.length&&y>0;++T){const R=u.chunkOffsetTable[T]-this.tokenizer.position,C=u.sampleSize>0?u.sampleSize:u.sampleSizeTable[T];if(y-=R+C,y<0)throw new Error("Chapter chunk exceeding token length");await this.tokenizer.ignore(R);const B=await this.tokenizer.readToken(new o.ChapterText(C));s(`Chapter ${T+1}: ${B}`);const D={title:B,sampleOffset:this.findSampleOffset(b,this.tokenizer.position)};s(`Chapter title=${D.title}, offset=${D.sampleOffset}/${this.tracks[0].duration}`),w.push(D)}this.metadata.setFormat("chapters",w),await this.tokenizer.ignore(y)}findSampleOffset(u,b){let y=0;u.timeToSampleTable.forEach(T=>{y+=T.count*T.duration}),s(`Total duration=${y}`);let w=0;for(;w<u.chunkOffsetTable.length&&u.chunkOffsetTable[w]<b;)++w;return this.getChunkDuration(w+1,u)}getChunkDuration(u,b){let y=0,w=b.timeToSampleTable[y].count,T=b.timeToSampleTable[y].duration,E=1,R=this.getSamplesPerChunk(E,b.sampleToChunkTable),C=0;for(;E<u;){const B=Math.min(w,R);C+=B*T,w-=B,R-=B,R===0?(++E,R=this.getSamplesPerChunk(E,b.sampleToChunkTable)):(++y,w=b.timeToSampleTable[y].count,T=b.timeToSampleTable[y].duration)}return C}getSamplesPerChunk(u,b){for(let y=0;y<b.length-1;++y)if(u>=b[y].firstChunk&&u<b[y+1].firstChunk)return b[y].samplesPerChunk;return b[b.length-1].samplesPerChunk}};return MP4Parser.MP4Parser=m,MP4Parser}var MpegParser={},XingTag={},ExtendedLameHeader={},ReplayGainDataFormat={},hasRequiredReplayGainDataFormat;function requireReplayGainDataFormat(){if(hasRequiredReplayGainDataFormat)return ReplayGainDataFormat;hasRequiredReplayGainDataFormat=1,Object.defineProperty(ReplayGainDataFormat,"__esModule",{value:!0}),ReplayGainDataFormat.ReplayGain=void 0;const e=requireUtil$1();var t;(function(r){r[r.not_set=0]="not_set",r[r.radio=1]="radio",r[r.audiophile=2]="audiophile"})(t||(t={}));var i;return(function(r){r[r.unspecified=0]="unspecified",r[r.engineer=1]="engineer",r[r.user=2]="user",r[r.automatic=3]="automatic",r[r.rms_average=4]="rms_average"})(i||(i={})),ReplayGainDataFormat.ReplayGain={len:2,get:(r,n)=>{const a=e.getBitAllignedNumber(r,n,0,3),o=e.getBitAllignedNumber(r,n,6,1),s=e.getBitAllignedNumber(r,n,7,9)/10;if(a>0)return{type:e.getBitAllignedNumber(r,n,0,3),origin:e.getBitAllignedNumber(r,n,3,3),adjustment:o?-s:s}}},ReplayGainDataFormat}var hasRequiredExtendedLameHeader;function requireExtendedLameHeader(){if(hasRequiredExtendedLameHeader)return ExtendedLameHeader;hasRequiredExtendedLameHeader=1,Object.defineProperty(ExtendedLameHeader,"__esModule",{value:!0}),ExtendedLameHeader.ExtendedLameHeader=void 0;const e=requireLib$2(),t=requireUtil$1(),i=requireReplayGainDataFormat();return ExtendedLameHeader.ExtendedLameHeader={len:27,get:(r,n)=>{const a=e.UINT32_BE.get(r,n+2);return{revision:t.getBitAllignedNumber(r,n,0,4),vbr_method:t.getBitAllignedNumber(r,n,4,4),lowpass_filter:100*e.UINT8.get(r,n+1),track_peak:a===0?void 0:a/Math.pow(2,23),track_gain:i.ReplayGain.get(r,6),album_gain:i.ReplayGain.get(r,8),music_length:e.UINT32_BE.get(r,n+20),music_crc:e.UINT8.get(r,n+24),header_crc:e.UINT16_BE.get(r,n+24)}}},ExtendedLameHeader}var hasRequiredXingTag;function requireXingTag(){return hasRequiredXingTag||(hasRequiredXingTag=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.readXingHeader=e.XingHeaderFlags=e.LameEncoderVersion=e.InfoTagHeaderTag=void 0;const t=requireLib$2(),i=requireUtil$1(),r=requireExtendedLameHeader();e.InfoTagHeaderTag=new t.StringType(4,"ascii"),e.LameEncoderVersion=new t.StringType(6,"ascii"),e.XingHeaderFlags={len:4,get:(a,o)=>({frames:i.isBitSet(a,o,31),bytes:i.isBitSet(a,o,30),toc:i.isBitSet(a,o,29),vbrScale:i.isBitSet(a,o,28)})};async function n(a){const o=await a.readToken(e.XingHeaderFlags),s={};if(o.frames&&(s.numFrames=await a.readToken(t.UINT32_BE)),o.bytes&&(s.streamSize=await a.readToken(t.UINT32_BE)),o.toc&&(s.toc=Buffer.alloc(100),await a.readBuffer(s.toc)),o.vbrScale&&(s.vbrScale=await a.readToken(t.UINT32_BE)),await a.peekToken(new t.StringType(4,"ascii"))==="LAME"&&(await a.ignore(4),s.lame={version:await a.readToken(new t.StringType(5,"ascii"))},s.lame.version.match(/\d+.\d+/g))){const m=s.lame.version.match(/\d+.\d+/g)[0].split(".").map(f=>parseInt(f,10));m[0]>=3&&m[1]>=90&&(s.lame.extended=await a.readToken(r.ExtendedLameHeader))}return s}e.readXingHeader=n})(XingTag)),XingTag}var hasRequiredMpegParser;function requireMpegParser(){if(hasRequiredMpegParser)return MpegParser;hasRequiredMpegParser=1,Object.defineProperty(MpegParser,"__esModule",{value:!0}),MpegParser.MpegParser=void 0;const e=requireLib$2(),t=requireCore$2(),i=requireBrowser$3(),r=requireUtil$1(),n=requireAbstractID3Parser(),a=requireXingTag(),o=(0,i.default)("music-metadata:parser:mpeg"),s=1024,l={AudioObjectTypes:["AAC Main","AAC LC","AAC SSR","AAC LTP"],SamplingFrequencies:[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350,void 0,void 0,-1]},c=[void 0,["front-center"],["front-left","front-right"],["front-center","front-left","front-right"],["front-center","front-left","front-right","back-center"],["front-center","front-left","front-right","back-left","back-right"],["front-center","front-left","front-right","back-left","back-right","LFE-channel"],["front-center","front-left","front-right","side-left","side-right","back-left","back-right","LFE-channel"]];class d{constructor(y,w){this.versionIndex=r.getBitAllignedNumber(y,w+1,3,2),this.layer=d.LayerDescription[r.getBitAllignedNumber(y,w+1,5,2)],this.versionIndex>1&&this.layer===0?this.parseAdtsHeader(y,w):this.parseMpegHeader(y,w),this.isProtectedByCRC=!r.isBitSet(y,w+1,7)}calcDuration(y){return y*this.calcSamplesPerFrame()/this.samplingRate}calcSamplesPerFrame(){return d.samplesInFrameTable[this.version===1?0:1][this.layer]}calculateSideInfoLength(){if(this.layer!==3)return 2;if(this.channelModeIndex===3){if(this.version===1)return 17;if(this.version===2||this.version===2.5)return 9}else{if(this.version===1)return 32;if(this.version===2||this.version===2.5)return 17}}calcSlotSize(){return[null,4,1,1][this.layer]}parseMpegHeader(y,w){this.container="MPEG",this.bitrateIndex=r.getBitAllignedNumber(y,w+2,0,4),this.sampRateFreqIndex=r.getBitAllignedNumber(y,w+2,4,2),this.padding=r.isBitSet(y,w+2,6),this.privateBit=r.isBitSet(y,w+2,7),this.channelModeIndex=r.getBitAllignedNumber(y,w+3,0,2),this.modeExtension=r.getBitAllignedNumber(y,w+3,2,2),this.isCopyrighted=r.isBitSet(y,w+3,4),this.isOriginalMedia=r.isBitSet(y,w+3,5),this.emphasis=r.getBitAllignedNumber(y,w+3,7,2),this.version=d.VersionID[this.versionIndex],this.channelMode=d.ChannelMode[this.channelModeIndex],this.codec=`MPEG ${this.version} Layer ${this.layer}`;const T=this.calcBitrate();if(!T)throw new Error("Cannot determine bit-rate");if(this.bitrate=T*1e3,this.samplingRate=this.calcSamplingRate(),this.samplingRate==null)throw new Error("Cannot determine sampling-rate")}parseAdtsHeader(y,w){o("layer=0 => ADTS"),this.version=this.versionIndex===2?4:2,this.container="ADTS/MPEG-"+this.version;const T=r.getBitAllignedNumber(y,w+2,0,2);this.codec="AAC",this.codecProfile=l.AudioObjectTypes[T],o(`MPEG-4 audio-codec=${this.codec}`);const E=r.getBitAllignedNumber(y,w+2,2,4);this.samplingRate=l.SamplingFrequencies[E],o(`sampling-rate=${this.samplingRate}`);const R=r.getBitAllignedNumber(y,w+2,7,3);this.mp4ChannelConfig=c[R],o(`channel-config=${this.mp4ChannelConfig.join("+")}`),this.frameLength=r.getBitAllignedNumber(y,w+3,6,2)<<11}calcBitrate(){if(this.bitrateIndex===0||this.bitrateIndex===15)return;const y=`${Math.floor(this.version)}${this.layer}`;return d.bitrate_index[this.bitrateIndex][y]}calcSamplingRate(){return this.sampRateFreqIndex===3?null:d.sampling_rate_freq_index[this.version][this.sampRateFreqIndex]}}d.SyncByte1=255,d.SyncByte2=224,d.VersionID=[2.5,null,2,1],d.LayerDescription=[0,3,2,1],d.ChannelMode=["stereo","joint_stereo","dual_channel","mono"],d.bitrate_index={1:{11:32,12:32,13:32,21:32,22:8,23:8},2:{11:64,12:48,13:40,21:48,22:16,23:16},3:{11:96,12:56,13:48,21:56,22:24,23:24},4:{11:128,12:64,13:56,21:64,22:32,23:32},5:{11:160,12:80,13:64,21:80,22:40,23:40},6:{11:192,12:96,13:80,21:96,22:48,23:48},7:{11:224,12:112,13:96,21:112,22:56,23:56},8:{11:256,12:128,13:112,21:128,22:64,23:64},9:{11:288,12:160,13:128,21:144,22:80,23:80},10:{11:320,12:192,13:160,21:160,22:96,23:96},11:{11:352,12:224,13:192,21:176,22:112,23:112},12:{11:384,12:256,13:224,21:192,22:128,23:128},13:{11:416,12:320,13:256,21:224,22:144,23:144},14:{11:448,12:384,13:320,21:256,22:160,23:160}},d.sampling_rate_freq_index={1:{0:44100,1:48e3,2:32e3},2:{0:22050,1:24e3,2:16e3},2.5:{0:11025,1:12e3,2:8e3}},d.samplesInFrameTable=[[0,384,1152,1152],[0,384,1152,576]];const m={len:4,get:(b,y)=>new d(b,y)};function f(b){return"V"+Math.floor((100-b)/10)}let u=class extends n.AbstractID3Parser{constructor(){super(...arguments),this.frameCount=0,this.syncFrameCount=-1,this.countSkipFrameData=0,this.totalDataLength=0,this.bitrates=[],this.calculateEofDuration=!1,this.buf_frame_header=Buffer.alloc(4),this.syncPeek={buf:Buffer.alloc(s),len:0}}async postId3v2Parse(){this.metadata.setFormat("lossless",!1);try{let y=!1;for(;!y;)await this.sync(),y=await this.parseCommonMpegHeader()}catch(y){if(y instanceof t.EndOfStreamError){if(o("End-of-stream"),this.calculateEofDuration){const w=this.frameCount*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",w);const T=w/this.metadata.format.sampleRate;o(`Calculate duration at EOF: ${T} sec.`,T),this.metadata.setFormat("duration",T)}}else throw y}}finalize(){const y=this.metadata.format,w=this.metadata.native.hasOwnProperty("ID3v1");if(y.duration&&this.tokenizer.fileInfo.size){const T=this.tokenizer.fileInfo.size-this.mpegOffset-(w?128:0);y.codecProfile&&y.codecProfile[0]==="V"&&this.metadata.setFormat("bitrate",T*8/y.duration)}else if(this.tokenizer.fileInfo.size&&y.codecProfile==="CBR"){const T=this.tokenizer.fileInfo.size-this.mpegOffset-(w?128:0),E=Math.round(T/this.frame_size)*this.samplesPerFrame;this.metadata.setFormat("numberOfSamples",E);const R=E/y.sampleRate;o("Calculate CBR duration based on file size: %s",R),this.metadata.setFormat("duration",R)}}async sync(){let y=!1;for(;;){let w=0;if(this.syncPeek.len=await this.tokenizer.peekBuffer(this.syncPeek.buf,{length:s,mayBeLess:!0}),this.syncPeek.len<=163)throw new t.EndOfStreamError;for(;;)if(y&&(this.syncPeek.buf[w]&224)===224){this.buf_frame_header[0]=d.SyncByte1,this.buf_frame_header[1]=this.syncPeek.buf[w],await this.tokenizer.ignore(w),o(`Sync at offset=${this.tokenizer.position-1}, frameCount=${this.frameCount}`),this.syncFrameCount===this.frameCount&&(o(`Re-synced MPEG stream, frameCount=${this.frameCount}`),this.frameCount=0,this.frame_size=0),this.syncFrameCount=this.frameCount;return}else if(y=!1,w=this.syncPeek.buf.indexOf(d.SyncByte1,w),w===-1){if(this.syncPeek.len<this.syncPeek.buf.length)throw new t.EndOfStreamError;await this.tokenizer.ignore(this.syncPeek.len);break}else++w,y=!0}}async parseCommonMpegHeader(){this.frameCount===0&&(this.mpegOffset=this.tokenizer.position-1),await this.tokenizer.peekBuffer(this.buf_frame_header,{offset:1,length:3});let y;try{y=m.get(this.buf_frame_header,0)}catch(w){return await this.tokenizer.ignore(1),this.metadata.addWarning("Parse error: "+w.message),!1}return await this.tokenizer.ignore(3),this.metadata.setFormat("container",y.container),this.metadata.setFormat("codec",y.codec),this.metadata.setFormat("lossless",!1),this.metadata.setFormat("sampleRate",y.samplingRate),this.frameCount++,y.version>=2&&y.layer===0?this.parseAdts(y):this.parseAudioFrameHeader(y)}async parseAudioFrameHeader(y){this.metadata.setFormat("numberOfChannels",y.channelMode==="mono"?1:2),this.metadata.setFormat("bitrate",y.bitrate),this.frameCount<20*1e4&&o("offset=%s MP%s bitrate=%s sample-rate=%s",this.tokenizer.position-4,y.layer,y.bitrate,y.samplingRate);const w=y.calcSlotSize();if(w===null)throw new Error("invalid slot_size");const T=y.calcSamplesPerFrame();o(`samples_per_frame=${T}`);const R=T/8*y.bitrate/y.samplingRate+(y.padding?w:0);if(this.frame_size=Math.floor(R),this.audioFrameHeader=y,this.bitrates.push(y.bitrate),this.frameCount===1)return this.offset=m.len,await this.skipSideInformation(),!1;if(this.frameCount===3){if(this.areAllSame(this.bitrates)){if(this.samplesPerFrame=T,this.metadata.setFormat("codecProfile","CBR"),this.tokenizer.fileInfo.size)return!0}else if(this.metadata.format.duration)return!0;if(!this.options.duration)return!0}return this.options.duration&&this.frameCount===4&&(this.samplesPerFrame=T,this.calculateEofDuration=!0),this.offset=4,y.isProtectedByCRC?(await this.parseCrc(),!1):(await this.skipSideInformation(),!1)}async parseAdts(y){const w=Buffer.alloc(3);await this.tokenizer.readBuffer(w),y.frameLength+=r.getBitAllignedNumber(w,0,0,11),this.totalDataLength+=y.frameLength,this.samplesPerFrame=1024;const T=y.samplingRate/this.samplesPerFrame,R=8*(this.frameCount===0?0:this.totalDataLength/this.frameCount)*T+.5;if(this.metadata.setFormat("bitrate",R),o(`frame-count=${this.frameCount}, size=${y.frameLength} bytes, bit-rate=${R}`),await this.tokenizer.ignore(y.frameLength>7?y.frameLength-7:1),this.frameCount===3)if(this.metadata.setFormat("codecProfile",y.codecProfile),y.mp4ChannelConfig&&this.metadata.setFormat("numberOfChannels",y.mp4ChannelConfig.length),this.options.duration)this.calculateEofDuration=!0;else return!0;return!1}async parseCrc(){return this.crc=await this.tokenizer.readNumber(e.INT16_BE),this.offset+=2,this.skipSideInformation()}async skipSideInformation(){const y=this.audioFrameHeader.calculateSideInfoLength();await this.tokenizer.readToken(new e.Uint8ArrayType(y)),this.offset+=y,await this.readXtraInfoHeader()}async readXtraInfoHeader(){const y=await this.tokenizer.readToken(a.InfoTagHeaderTag);switch(this.offset+=a.InfoTagHeaderTag.len,y){case"Info":return this.metadata.setFormat("codecProfile","CBR"),this.readXingInfoHeader();case"Xing":const T=await this.readXingInfoHeader(),E=f(T.vbrScale);return this.metadata.setFormat("codecProfile",E),null;case"Xtra":break;case"LAME":const R=await this.tokenizer.readToken(a.LameEncoderVersion);if(this.frame_size>=this.offset+a.LameEncoderVersion.len)return this.offset+=a.LameEncoderVersion.len,this.metadata.setFormat("tool","LAME "+R),await this.skipFrameData(this.frame_size-this.offset),null;this.metadata.addWarning("Corrupt LAME header");break}const w=this.frame_size-this.offset;return w<0?this.metadata.addWarning("Frame "+this.frameCount+"corrupt: negative frameDataLeft"):await this.skipFrameData(w),null}async readXingInfoHeader(){const y=this.tokenizer.position,w=await(0,a.readXingHeader)(this.tokenizer);if(this.offset+=this.tokenizer.position-y,w.lame&&(this.metadata.setFormat("tool","LAME "+r.stripNulls(w.lame.version)),w.lame.extended&&(this.metadata.setFormat("trackPeakLevel",w.lame.extended.track_peak),w.lame.extended.track_gain&&this.metadata.setFormat("trackGain",w.lame.extended.track_gain.adjustment),w.lame.extended.album_gain&&this.metadata.setFormat("albumGain",w.lame.extended.album_gain.adjustment),this.metadata.setFormat("duration",w.lame.extended.music_length/1e3))),w.streamSize){const E=this.audioFrameHeader.calcDuration(w.numFrames);return this.metadata.setFormat("duration",E),o("Get duration from Xing header: %s",this.metadata.format.duration),w}const T=this.frame_size-this.offset;return await this.skipFrameData(T),w}async skipFrameData(y){if(y<0)throw new Error("frame-data-left cannot be negative");await this.tokenizer.ignore(y),this.countSkipFrameData+=y}areAllSame(y){const w=y[0];return y.every(T=>T===w)}};return MpegParser.MpegParser=u,MpegParser}var musepack={},MpcSv8Parser={},StreamVersion8={},hasRequiredStreamVersion8;function requireStreamVersion8(){if(hasRequiredStreamVersion8)return StreamVersion8;hasRequiredStreamVersion8=1,Object.defineProperty(StreamVersion8,"__esModule",{value:!0}),StreamVersion8.StreamReader=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireUtil$1(),r=(0,t.default)("music-metadata:parser:musepack:sv8"),n=new e.StringType(2,"binary"),a={len:5,get:(l,c)=>({crc:e.UINT32_LE.get(l,c),streamVersion:e.UINT8.get(l,c+4)})},o={len:2,get:(l,c)=>({sampleFrequency:[44100,48e3,37800,32e3][i.getBitAllignedNumber(l,c,0,3)],maxUsedBands:i.getBitAllignedNumber(l,c,3,5),channelCount:i.getBitAllignedNumber(l,c+1,0,4)+1,msUsed:i.isBitSet(l,c+1,4),audioBlockFrames:i.getBitAllignedNumber(l,c+1,5,3)})};class s{constructor(c){this.tokenizer=c}async readPacketHeader(){const c=await this.tokenizer.readToken(n),d=await this.readVariableSizeField();return{key:c,payloadLength:d.value-2-d.len}}async readStreamHeader(c){const d={};r(`Reading SH at offset=${this.tokenizer.position}`);const m=await this.tokenizer.readToken(a);c-=a.len,Object.assign(d,m),r(`SH.streamVersion = ${m.streamVersion}`);const f=await this.readVariableSizeField();c-=f.len,d.sampleCount=f.value;const u=await this.readVariableSizeField();c-=u.len,d.beginningOfSilence=u.value;const b=await this.tokenizer.readToken(o);return c-=o.len,Object.assign(d,b),await this.tokenizer.ignore(c),d}async readVariableSizeField(c=1,d=0){let m=await this.tokenizer.readNumber(e.UINT8);return(m&128)===0?{len:c,value:d+m}:(m&=127,m+=d,this.readVariableSizeField(c+1,m<<7))}}return StreamVersion8.StreamReader=s,StreamVersion8}var hasRequiredMpcSv8Parser;function requireMpcSv8Parser(){if(hasRequiredMpcSv8Parser)return MpcSv8Parser;hasRequiredMpcSv8Parser=1,Object.defineProperty(MpcSv8Parser,"__esModule",{value:!0}),MpcSv8Parser.MpcSv8Parser=void 0;const e=requireBrowser$3(),t=requireBasicParser(),i=requireAPEv2Parser(),r=requireFourCC(),n=requireStreamVersion8(),a=(0,e.default)("music-metadata:parser:musepack");let o=class extends t.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){if(await this.tokenizer.readToken(r.FourCcToken)!=="MPCK")throw new Error("Invalid Magic number");return this.metadata.setFormat("container","Musepack, SV8"),this.parsePacket()}async parsePacket(){const l=new n.StreamReader(this.tokenizer);do{const c=await l.readPacketHeader();switch(a(`packet-header key=${c.key}, payloadLength=${c.payloadLength}`),c.key){case"SH":const d=await l.readStreamHeader(c.payloadLength);this.metadata.setFormat("numberOfSamples",d.sampleCount),this.metadata.setFormat("sampleRate",d.sampleFrequency),this.metadata.setFormat("duration",d.sampleCount/d.sampleFrequency),this.metadata.setFormat("numberOfChannels",d.channelCount);break;case"AP":this.audioLength+=c.payloadLength,await this.tokenizer.ignore(c.payloadLength);break;case"RG":case"EI":case"SO":case"ST":case"CT":await this.tokenizer.ignore(c.payloadLength);break;case"SE":return this.metadata.setFormat("bitrate",this.audioLength*8/this.metadata.format.duration),i.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options);default:throw new Error(`Unexpected header: ${c.key}`)}}while(!0)}};return MpcSv8Parser.MpcSv8Parser=o,MpcSv8Parser}var MpcSv7Parser={},BitReader={},hasRequiredBitReader;function requireBitReader(){if(hasRequiredBitReader)return BitReader;hasRequiredBitReader=1,Object.defineProperty(BitReader,"__esModule",{value:!0}),BitReader.BitReader=void 0;const e=requireLib$2();let t=class{constructor(r){this.tokenizer=r,this.pos=0,this.dword=void 0}async read(r){for(;this.dword===void 0;)this.dword=await this.tokenizer.readToken(e.UINT32_LE);let n=this.dword;return this.pos+=r,this.pos<32?(n>>>=32-this.pos,n&(1<<r)-1):(this.pos-=32,this.pos===0?(this.dword=void 0,n&(1<<r)-1):(this.dword=await this.tokenizer.readToken(e.UINT32_LE),this.pos&&(n<<=this.pos,n|=this.dword>>>32-this.pos),n&(1<<r)-1))}async ignore(r){if(this.pos>0){const o=32-this.pos;this.dword=void 0,r-=o,this.pos=0}const n=r%32,a=(r-n)/32;return await this.tokenizer.ignore(a*4),this.read(n)}};return BitReader.BitReader=t,BitReader}var StreamVersion7={},hasRequiredStreamVersion7;function requireStreamVersion7(){if(hasRequiredStreamVersion7)return StreamVersion7;hasRequiredStreamVersion7=1,Object.defineProperty(StreamVersion7,"__esModule",{value:!0}),StreamVersion7.Header=void 0;const e=requireLib$2(),t=requireUtil$1();return StreamVersion7.Header={len:24,get:(i,r)=>{const n={signature:Buffer.from(i).toString("latin1",r,r+3),streamMinorVersion:t.getBitAllignedNumber(i,r+3,0,4),streamMajorVersion:t.getBitAllignedNumber(i,r+3,4,4),frameCount:e.UINT32_LE.get(i,r+4),maxLevel:e.UINT16_LE.get(i,r+8),sampleFrequency:[44100,48e3,37800,32e3][t.getBitAllignedNumber(i,r+10,0,2)],link:t.getBitAllignedNumber(i,r+10,2,2),profile:t.getBitAllignedNumber(i,r+10,4,4),maxBand:t.getBitAllignedNumber(i,r+11,0,6),intensityStereo:t.isBitSet(i,r+11,6),midSideStereo:t.isBitSet(i,r+11,7),titlePeak:e.UINT16_LE.get(i,r+12),titleGain:e.UINT16_LE.get(i,r+14),albumPeak:e.UINT16_LE.get(i,r+16),albumGain:e.UINT16_LE.get(i,r+18),lastFrameLength:e.UINT32_LE.get(i,r+20)>>>20&2047,trueGapless:t.isBitSet(i,r+23,0)};return n.lastFrameLength=n.trueGapless?e.UINT32_LE.get(i,20)>>>20&2047:0,n}},StreamVersion7}var hasRequiredMpcSv7Parser;function requireMpcSv7Parser(){if(hasRequiredMpcSv7Parser)return MpcSv7Parser;hasRequiredMpcSv7Parser=1,Object.defineProperty(MpcSv7Parser,"__esModule",{value:!0}),MpcSv7Parser.MpcSv7Parser=void 0;const e=requireBrowser$3(),t=requireBasicParser(),i=requireAPEv2Parser(),r=requireBitReader(),n=requireStreamVersion7(),a=(0,e.default)("music-metadata:parser:musepack");let o=class extends t.BasicParser{constructor(){super(...arguments),this.audioLength=0}async parse(){const l=await this.tokenizer.readToken(n.Header);if(l.signature!=="MP+")throw new Error("Unexpected magic number");a(`stream-version=${l.streamMajorVersion}.${l.streamMinorVersion}`),this.metadata.setFormat("container","Musepack, SV7"),this.metadata.setFormat("sampleRate",l.sampleFrequency);const c=1152*(l.frameCount-1)+l.lastFrameLength;this.metadata.setFormat("numberOfSamples",c),this.duration=c/l.sampleFrequency,this.metadata.setFormat("duration",this.duration),this.bitreader=new r.BitReader(this.tokenizer),this.metadata.setFormat("numberOfChannels",l.midSideStereo||l.intensityStereo?2:1);const d=await this.bitreader.read(8);return this.metadata.setFormat("codec",(d/100).toFixed(2)),await this.skipAudioData(l.frameCount),a(`End of audio stream, switching to APEv2, offset=${this.tokenizer.position}`),i.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async skipAudioData(l){for(;l-- >0;){const d=await this.bitreader.read(20);this.audioLength+=20+d,await this.bitreader.ignore(d)}const c=await this.bitreader.read(11);this.audioLength+=c,this.metadata.setFormat("bitrate",this.audioLength/this.duration)}};return MpcSv7Parser.MpcSv7Parser=o,MpcSv7Parser}var hasRequiredMusepack;function requireMusepack(){if(hasRequiredMusepack)return musepack;hasRequiredMusepack=1,Object.defineProperty(musepack,"__esModule",{value:!0});const e=requireBrowser$3(),t=requireLib$2(),i=requireAbstractID3Parser(),r=requireMpcSv8Parser(),n=requireMpcSv7Parser(),a=(0,e.default)("music-metadata:parser:musepack");class o extends i.AbstractID3Parser{async postId3v2Parse(){const l=await this.tokenizer.peekToken(new t.StringType(3,"binary"));let c;switch(l){case"MP+":{a("Musepack stream-version 7"),c=new n.MpcSv7Parser;break}case"MPC":{a("Musepack stream-version 8"),c=new r.MpcSv8Parser;break}default:throw new Error("Invalid Musepack signature prefix")}return c.init(this.metadata,this.tokenizer,this.options),c.parse()}}return musepack.default=o,musepack}var OggParser={},OpusParser={},Opus={},hasRequiredOpus;function requireOpus(){if(hasRequiredOpus)return Opus;hasRequiredOpus=1,Object.defineProperty(Opus,"__esModule",{value:!0}),Opus.IdHeader=void 0;const e=requireLib$2();class t{constructor(r){if(this.len=r,r<19)throw new Error("ID-header-page 0 should be at least 19 bytes long")}get(r,n){return{magicSignature:new e.StringType(8,"ascii").get(r,n+0),version:r.readUInt8(n+8),channelCount:r.readUInt8(n+9),preSkip:r.readInt16LE(n+10),inputSampleRate:r.readInt32LE(n+12),outputGain:r.readInt16LE(n+16),channelMapping:r.readUInt8(n+18)}}}return Opus.IdHeader=t,Opus}var hasRequiredOpusParser;function requireOpusParser(){if(hasRequiredOpusParser)return OpusParser;hasRequiredOpusParser=1,Object.defineProperty(OpusParser,"__esModule",{value:!0}),OpusParser.OpusParser=void 0;const e=requireLib$2(),t=requireVorbisParser(),i=requireOpus();let r=class extends t.VorbisParser{constructor(a,o,s){super(a,o),this.tokenizer=s,this.lastPos=-1}parseFirstPage(a,o){if(this.metadata.setFormat("codec","Opus"),this.idHeader=new i.IdHeader(o.length).get(o,0),this.idHeader.magicSignature!=="OpusHead")throw new Error("Illegal ogg/Opus magic-signature");this.metadata.setFormat("sampleRate",this.idHeader.inputSampleRate),this.metadata.setFormat("numberOfChannels",this.idHeader.channelCount)}parseFullPage(a){switch(new e.StringType(8,"ascii").get(a,0)){case"OpusTags":this.parseUserCommentList(a,8),this.lastPos=this.tokenizer.position-a.length;break}}calculateDuration(a){if(this.metadata.format.sampleRate&&a.absoluteGranulePosition>=0){const o=a.absoluteGranulePosition-this.idHeader.preSkip;if(this.metadata.setFormat("numberOfSamples",o),this.metadata.setFormat("duration",o/48e3),this.lastPos!==-1&&this.tokenizer.fileInfo.size&&this.metadata.format.duration){const s=this.tokenizer.fileInfo.size-this.lastPos;this.metadata.setFormat("bitrate",8*s/this.metadata.format.duration)}}}};return OpusParser.OpusParser=r,OpusParser}var SpeexParser={},Speex={},hasRequiredSpeex;function requireSpeex(){if(hasRequiredSpeex)return Speex;hasRequiredSpeex=1,Object.defineProperty(Speex,"__esModule",{value:!0}),Speex.Header=void 0;const e=requireLib$2(),t=requireUtil$1();return Speex.Header={len:80,get:(i,r)=>({speex:new e.StringType(8,"ascii").get(i,r+0),version:t.trimRightNull(new e.StringType(20,"ascii").get(i,r+8)),version_id:i.readInt32LE(r+28),header_size:i.readInt32LE(r+32),rate:i.readInt32LE(r+36),mode:i.readInt32LE(r+40),mode_bitstream_version:i.readInt32LE(r+44),nb_channels:i.readInt32LE(r+48),bitrate:i.readInt32LE(r+52),frame_size:i.readInt32LE(r+56),vbr:i.readInt32LE(r+60),frames_per_packet:i.readInt32LE(r+64),extra_headers:i.readInt32LE(r+68),reserved1:i.readInt32LE(r+72),reserved2:i.readInt32LE(r+76)})},Speex}var hasRequiredSpeexParser;function requireSpeexParser(){if(hasRequiredSpeexParser)return SpeexParser;hasRequiredSpeexParser=1,Object.defineProperty(SpeexParser,"__esModule",{value:!0}),SpeexParser.SpeexParser=void 0;const e=requireBrowser$3(),t=requireVorbisParser(),i=requireSpeex(),r=(0,e.default)("music-metadata:parser:ogg:speex");let n=class extends t.VorbisParser{constructor(o,s,l){super(o,s),this.tokenizer=l}parseFirstPage(o,s){r("First Ogg/Speex page");const l=i.Header.get(s,0);this.metadata.setFormat("codec",`Speex ${l.version}`),this.metadata.setFormat("numberOfChannels",l.nb_channels),this.metadata.setFormat("sampleRate",l.rate),l.bitrate!==-1&&this.metadata.setFormat("bitrate",l.bitrate)}};return SpeexParser.SpeexParser=n,SpeexParser}var TheoraParser={},Theora={},hasRequiredTheora;function requireTheora(){if(hasRequiredTheora)return Theora;hasRequiredTheora=1,Object.defineProperty(Theora,"__esModule",{value:!0}),Theora.IdentificationHeader=void 0;const e=requireLib$2();return Theora.IdentificationHeader={len:42,get:(t,i)=>({id:new e.StringType(7,"ascii").get(t,i),vmaj:t.readUInt8(i+7),vmin:t.readUInt8(i+8),vrev:t.readUInt8(i+9),vmbw:t.readUInt16BE(i+10),vmbh:t.readUInt16BE(i+17),nombr:e.UINT24_BE.get(t,i+37),nqual:t.readUInt8(i+40)})},Theora}var hasRequiredTheoraParser;function requireTheoraParser(){if(hasRequiredTheoraParser)return TheoraParser;hasRequiredTheoraParser=1,Object.defineProperty(TheoraParser,"__esModule",{value:!0}),TheoraParser.TheoraParser=void 0;const e=requireBrowser$3(),t=requireTheora(),i=(0,e.default)("music-metadata:parser:ogg:theora");let r=class{constructor(a,o,s){this.metadata=a,this.tokenizer=s}parsePage(a,o){a.headerType.firstPage&&this.parseFirstPage(a,o)}flush(){i("flush")}calculateDuration(a){i("duration calculation not implemented")}parseFirstPage(a,o){i("First Ogg/Theora page"),this.metadata.setFormat("codec","Theora");const s=t.IdentificationHeader.get(o,0);this.metadata.setFormat("bitrate",s.nombr)}};return TheoraParser.TheoraParser=r,TheoraParser}var hasRequiredOggParser;function requireOggParser(){if(hasRequiredOggParser)return OggParser;hasRequiredOggParser=1,Object.defineProperty(OggParser,"__esModule",{value:!0}),OggParser.OggParser=OggParser.SegmentTable=void 0;const e=requireLib$2(),t=requireCore$2(),i=requireBrowser$3(),r=requireUtil$1(),n=requireFourCC(),a=requireBasicParser(),o=requireVorbisParser(),s=requireOpusParser(),l=requireSpeexParser(),c=requireTheoraParser(),d=(0,i.default)("music-metadata:parser:ogg");class m{static sum(b,y,w){let T=0;for(let E=y;E<y+w;++E)T+=b[E];return T}constructor(b){this.len=b.page_segments}get(b,y){return{totalPageSize:m.sum(b,y,this.len)}}}OggParser.SegmentTable=m;let f=class it extends a.BasicParser{async parse(){d("pos=%s, parsePage()",this.tokenizer.position);try{let b;do{if(b=await this.tokenizer.readToken(it.Header),b.capturePattern!=="OggS")throw new Error("Invalid Ogg capture pattern");this.metadata.setFormat("container","Ogg"),this.header=b,this.pageNumber=b.pageSequenceNo,d("page#=%s, Ogg.id=%s",b.pageSequenceNo,b.capturePattern);const y=await this.tokenizer.readToken(new m(b));d("totalPageSize=%s",y.totalPageSize);const w=await this.tokenizer.readToken(new e.Uint8ArrayType(y.totalPageSize));if(d("firstPage=%s, lastPage=%s, continued=%s",b.headerType.firstPage,b.headerType.lastPage,b.headerType.continued),b.headerType.firstPage){const T=new e.StringType(7,"ascii").get(Buffer.from(w),0);switch(T){case"vorbis":d("Set page consumer to Ogg/Vorbis"),this.pageConsumer=new o.VorbisParser(this.metadata,this.options);break;case"OpusHea":d("Set page consumer to Ogg/Opus"),this.pageConsumer=new s.OpusParser(this.metadata,this.options,this.tokenizer);break;case"Speex  ":d("Set page consumer to Ogg/Speex"),this.pageConsumer=new l.SpeexParser(this.metadata,this.options,this.tokenizer);break;case"fishead":case"\0theora":d("Set page consumer to Ogg/Theora"),this.pageConsumer=new c.TheoraParser(this.metadata,this.options,this.tokenizer);break;default:throw new Error("gg audio-codec not recognized (id="+T+")")}}this.pageConsumer.parsePage(b,w)}while(!b.headerType.lastPage)}catch(b){if(b instanceof t.EndOfStreamError)this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),d("End-of-stream"),this.metadata.addWarning("Last OGG-page is not marked with last-page flag"),this.header&&this.pageConsumer.calculateDuration(this.header);else if(b.message.startsWith("FourCC"))this.pageNumber>0&&(this.metadata.addWarning("Invalid FourCC ID, maybe last OGG-page is not marked with last-page flag"),this.pageConsumer.flush());else throw b}}};return f.Header={len:27,get:(u,b)=>({capturePattern:n.FourCcToken.get(u,b),version:e.UINT8.get(u,b+4),headerType:{continued:r.getBit(u,b+5,0),firstPage:r.getBit(u,b+5,1),lastPage:r.getBit(u,b+5,2)},absoluteGranulePosition:Number(e.UINT64_LE.get(u,b+6)),streamSerialNumber:e.UINT32_LE.get(u,b+14),pageSequenceNo:e.UINT32_LE.get(u,b+18),pageChecksum:e.UINT32_LE.get(u,b+22),page_segments:e.UINT8.get(u,b+26)})},OggParser.OggParser=f,OggParser}var WaveParser={},RiffChunk={},hasRequiredRiffChunk;function requireRiffChunk(){if(hasRequiredRiffChunk)return RiffChunk;hasRequiredRiffChunk=1,Object.defineProperty(RiffChunk,"__esModule",{value:!0}),RiffChunk.ListInfoTagValue=RiffChunk.Header=void 0;const e=requireLib$2();RiffChunk.Header={len:8,get:(i,r)=>({chunkID:i.toString("binary",r,r+4),chunkSize:e.UINT32_LE.get(i,4)})};class t{constructor(r){this.tagHeader=r,this.len=r.chunkSize,this.len+=this.len&1}get(r,n){return new e.StringType(this.tagHeader.chunkSize,"ascii").get(r,n)}}return RiffChunk.ListInfoTagValue=t,RiffChunk}var WaveChunk={},hasRequiredWaveChunk;function requireWaveChunk(){return hasRequiredWaveChunk||(hasRequiredWaveChunk=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FactChunk=e.Format=e.WaveFormat=void 0,(function(r){r[r.PCM=1]="PCM",r[r.ADPCM=2]="ADPCM",r[r.IEEE_FLOAT=3]="IEEE_FLOAT",r[r.MPEG_ADTS_AAC=5632]="MPEG_ADTS_AAC",r[r.MPEG_LOAS=5634]="MPEG_LOAS",r[r.RAW_AAC1=255]="RAW_AAC1",r[r.DOLBY_AC3_SPDIF=146]="DOLBY_AC3_SPDIF",r[r.DVM=8192]="DVM",r[r.RAW_SPORT=576]="RAW_SPORT",r[r.ESST_AC3=577]="ESST_AC3",r[r.DRM=9]="DRM",r[r.DTS2=8193]="DTS2",r[r.MPEG=80]="MPEG"})(e.WaveFormat||(e.WaveFormat={}));class t{constructor(n){if(n.chunkSize<16)throw new Error("Invalid chunk size");this.len=n.chunkSize}get(n,a){return{wFormatTag:n.readUInt16LE(a),nChannels:n.readUInt16LE(a+2),nSamplesPerSec:n.readUInt32LE(a+4),nAvgBytesPerSec:n.readUInt32LE(a+8),nBlockAlign:n.readUInt16LE(a+12),wBitsPerSample:n.readUInt16LE(a+14)}}}e.Format=t;class i{constructor(n){if(n.chunkSize<4)throw new Error("Invalid fact chunk size.");this.len=n.chunkSize}get(n,a){return{dwSampleLength:n.readUInt32LE(a)}}}e.FactChunk=i})(WaveChunk)),WaveChunk}var BwfChunk={},hasRequiredBwfChunk;function requireBwfChunk(){if(hasRequiredBwfChunk)return BwfChunk;hasRequiredBwfChunk=1,Object.defineProperty(BwfChunk,"__esModule",{value:!0}),BwfChunk.BroadcastAudioExtensionChunk=void 0;const e=requireLib$2(),t=requireUtil$1();return BwfChunk.BroadcastAudioExtensionChunk={len:420,get:(i,r)=>({description:(0,t.stripNulls)(new e.StringType(256,"ascii").get(i,r)).trim(),originator:(0,t.stripNulls)(new e.StringType(32,"ascii").get(i,r+256)).trim(),originatorReference:(0,t.stripNulls)(new e.StringType(32,"ascii").get(i,r+288)).trim(),originationDate:(0,t.stripNulls)(new e.StringType(10,"ascii").get(i,r+320)).trim(),originationTime:(0,t.stripNulls)(new e.StringType(8,"ascii").get(i,r+330)).trim(),timeReferenceLow:e.UINT32_LE.get(i,r+338),timeReferenceHigh:e.UINT32_LE.get(i,r+342),version:e.UINT16_LE.get(i,r+346),umid:new e.Uint8ArrayType(64).get(i,r+348),loudnessValue:e.UINT16_LE.get(i,r+412),maxTruePeakLevel:e.UINT16_LE.get(i,r+414),maxMomentaryLoudness:e.UINT16_LE.get(i,r+416),maxShortTermLoudness:e.UINT16_LE.get(i,r+418)})},BwfChunk}var hasRequiredWaveParser;function requireWaveParser(){if(hasRequiredWaveParser)return WaveParser;hasRequiredWaveParser=1,Object.defineProperty(WaveParser,"__esModule",{value:!0}),WaveParser.WaveParser=void 0;const e=requireCore$2(),t=requireLib$2(),i=requireBrowser$3(),r=requireRiffChunk(),n=requireWaveChunk(),a=requireID3v2Parser(),o=requireUtil$1(),s=requireFourCC(),l=requireBasicParser(),c=requireBwfChunk(),d=(0,i.default)("music-metadata:parser:RIFF");let m=class extends l.BasicParser{async parse(){const u=await this.tokenizer.readToken(r.Header);if(d(`pos=${this.tokenizer.position}, parse: chunkID=${u.chunkID}`),u.chunkID==="RIFF")return this.parseRiffChunk(u.chunkSize).catch(b=>{if(!(b instanceof e.EndOfStreamError))throw b})}async parseRiffChunk(u){const b=await this.tokenizer.readToken(s.FourCcToken);switch(this.metadata.setFormat("container",b),b){case"WAVE":return this.readWaveChunk(u-s.FourCcToken.len);default:throw new Error(`Unsupported RIFF format: RIFF/${b}`)}}async readWaveChunk(u){for(;u>=r.Header.len;){const b=await this.tokenizer.readToken(r.Header);switch(u-=r.Header.len+b.chunkSize,b.chunkSize>u&&this.metadata.addWarning("Data chunk size exceeds file size"),this.header=b,d(`pos=${this.tokenizer.position}, readChunk: chunkID=RIFF/WAVE/${b.chunkID}`),b.chunkID){case"LIST":await this.parseListTag(b);break;case"fact":this.metadata.setFormat("lossless",!1),this.fact=await this.tokenizer.readToken(new n.FactChunk(b));break;case"fmt ":const y=await this.tokenizer.readToken(new n.Format(b));let w=n.WaveFormat[y.wFormatTag];w||(d("WAVE/non-PCM format="+y.wFormatTag),w="non-PCM ("+y.wFormatTag+")"),this.metadata.setFormat("codec",w),this.metadata.setFormat("bitsPerSample",y.wBitsPerSample),this.metadata.setFormat("sampleRate",y.nSamplesPerSec),this.metadata.setFormat("numberOfChannels",y.nChannels),this.metadata.setFormat("bitrate",y.nBlockAlign*y.nSamplesPerSec*8),this.blockAlign=y.nBlockAlign;break;case"id3 ":case"ID3 ":const T=await this.tokenizer.readToken(new t.Uint8ArrayType(b.chunkSize)),E=e.fromBuffer(T);await new a.ID3v2Parser().parse(this.metadata,E,this.options);break;case"data":this.metadata.format.lossless!==!1&&this.metadata.setFormat("lossless",!0);let R=b.chunkSize;if(this.tokenizer.fileInfo.size){const _=this.tokenizer.fileInfo.size-this.tokenizer.position;_<R&&(this.metadata.addWarning("data chunk length exceeding file length"),R=_)}const C=this.fact?this.fact.dwSampleLength:R===4294967295?void 0:R/this.blockAlign;C&&(this.metadata.setFormat("numberOfSamples",C),this.metadata.setFormat("duration",C/this.metadata.format.sampleRate)),this.metadata.format.codec==="ADPCM"?this.metadata.setFormat("bitrate",352e3):this.metadata.setFormat("bitrate",this.blockAlign*this.metadata.format.sampleRate*8),await this.tokenizer.ignore(b.chunkSize);break;case"bext":const B=await this.tokenizer.readToken(c.BroadcastAudioExtensionChunk);Object.keys(B).forEach(_=>{this.metadata.addTag("exif","bext."+_,B[_])});const D=b.chunkSize-c.BroadcastAudioExtensionChunk.len;await this.tokenizer.ignore(D);break;case"\0\0\0\0":d(`Ignore padding chunk: RIFF/${b.chunkID} of ${b.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+b.chunkID),await this.tokenizer.ignore(b.chunkSize);break;default:d(`Ignore chunk: RIFF/${b.chunkID} of ${b.chunkSize} bytes`),this.metadata.addWarning("Ignore chunk: RIFF/"+b.chunkID),await this.tokenizer.ignore(b.chunkSize)}this.header.chunkSize%2===1&&(d("Read odd padding byte"),await this.tokenizer.ignore(1))}}async parseListTag(u){const b=await this.tokenizer.readToken(new t.StringType(4,"binary"));switch(d("pos=%s, parseListTag: chunkID=RIFF/WAVE/LIST/%s",this.tokenizer.position,b),b){case"INFO":return this.parseRiffInfoTags(u.chunkSize-4);case"adtl":default:return this.metadata.addWarning("Ignore chunk: RIFF/WAVE/LIST/"+b),d("Ignoring chunkID=RIFF/WAVE/LIST/"+b),this.tokenizer.ignore(u.chunkSize-4).then()}}async parseRiffInfoTags(u){for(;u>=8;){const b=await this.tokenizer.readToken(r.Header),y=new r.ListInfoTagValue(b),w=await this.tokenizer.readToken(y);this.addTag(b.chunkID,o.stripNulls(w)),u-=8+y.len}if(u!==0)throw Error("Illegal remaining size: "+u)}addTag(u,b){this.metadata.addTag("exif",u,b)}};return WaveParser.WaveParser=m,WaveParser}var WavPackParser={},WavPackToken={},hasRequiredWavPackToken;function requireWavPackToken(){if(hasRequiredWavPackToken)return WavPackToken;hasRequiredWavPackToken=1,Object.defineProperty(WavPackToken,"__esModule",{value:!0}),WavPackToken.WavPack=void 0;const e=requireLib$2(),t=requireFourCC(),i=[6e3,8e3,9600,11025,12e3,16e3,22050,24e3,32e3,44100,48e3,64e3,88200,96e3,192e3,-1];class r{static isBitSet(a,o){return r.getBitAllignedNumber(a,o,1)===1}static getBitAllignedNumber(a,o,s){return a>>>o&4294967295>>>32-s}}return r.BlockHeaderToken={len:32,get:(n,a)=>{const o=e.UINT32_LE.get(n,a+24),s={BlockID:t.FourCcToken.get(n,a),blockSize:e.UINT32_LE.get(n,a+4),version:e.UINT16_LE.get(n,a+8),totalSamples:e.UINT32_LE.get(n,a+12),blockIndex:e.UINT32_LE.get(n,a+16),blockSamples:e.UINT32_LE.get(n,a+20),flags:{bitsPerSample:(1+r.getBitAllignedNumber(o,0,2))*8,isMono:r.isBitSet(o,2),isHybrid:r.isBitSet(o,3),isJointStereo:r.isBitSet(o,4),crossChannel:r.isBitSet(o,5),hybridNoiseShaping:r.isBitSet(o,6),floatingPoint:r.isBitSet(o,7),samplingRate:i[r.getBitAllignedNumber(o,23,4)],isDSD:r.isBitSet(o,31)},crc:new e.Uint8ArrayType(4).get(n,a+28)};return s.flags.isDSD&&(s.totalSamples*=8),s}},r.MetadataIdToken={len:1,get:(n,a)=>({functionId:r.getBitAllignedNumber(n[a],0,6),isOptional:r.isBitSet(n[a],5),isOddSize:r.isBitSet(n[a],6),largeBlock:r.isBitSet(n[a],7)})},WavPackToken.WavPack=r,WavPackToken}var hasRequiredWavPackParser;function requireWavPackParser(){if(hasRequiredWavPackParser)return WavPackParser;hasRequiredWavPackParser=1,Object.defineProperty(WavPackParser,"__esModule",{value:!0}),WavPackParser.WavPackParser=void 0;const e=requireLib$2(),t=requireAPEv2Parser(),i=requireFourCC(),r=requireBasicParser(),n=requireWavPackToken(),o=(0,requireBrowser$3().default)("music-metadata:parser:WavPack");let s=class extends r.BasicParser{async parse(){return this.audioDataSize=0,await this.parseWavPackBlocks(),t.APEv2Parser.tryParseApeHeader(this.metadata,this.tokenizer,this.options)}async parseWavPackBlocks(){do{if(await this.tokenizer.peekToken(i.FourCcToken)!=="wvpk")break;const d=await this.tokenizer.readToken(n.WavPack.BlockHeaderToken);if(d.BlockID!=="wvpk")throw new Error("Invalid WavPack Block-ID");o(`WavPack header blockIndex=${d.blockIndex}, len=${n.WavPack.BlockHeaderToken.len}`),d.blockIndex===0&&!this.metadata.format.container&&(this.metadata.setFormat("container","WavPack"),this.metadata.setFormat("lossless",!d.flags.isHybrid),this.metadata.setFormat("bitsPerSample",d.flags.bitsPerSample),d.flags.isDSD||(this.metadata.setFormat("sampleRate",d.flags.samplingRate),this.metadata.setFormat("duration",d.totalSamples/d.flags.samplingRate)),this.metadata.setFormat("numberOfChannels",d.flags.isMono?1:2),this.metadata.setFormat("numberOfSamples",d.totalSamples),this.metadata.setFormat("codec",d.flags.isDSD?"DSD":"PCM"));const m=d.blockSize-(n.WavPack.BlockHeaderToken.len-8);await(d.blockIndex===0?this.parseMetadataSubBlock(d,m):this.tokenizer.ignore(m)),d.blockSamples>0&&(this.audioDataSize+=d.blockSize)}while(!this.tokenizer.fileInfo.size||this.tokenizer.fileInfo.size-this.tokenizer.position>=n.WavPack.BlockHeaderToken.len);this.metadata.setFormat("bitrate",this.audioDataSize*8/this.metadata.format.duration)}async parseMetadataSubBlock(c,d){for(;d>n.WavPack.MetadataIdToken.len;){const m=await this.tokenizer.readToken(n.WavPack.MetadataIdToken),f=await this.tokenizer.readNumber(m.largeBlock?e.UINT24_LE:e.UINT8),u=Buffer.alloc(f*2-(m.isOddSize?1:0));switch(await this.tokenizer.readBuffer(u),o(`Metadata Sub-Blocks functionId=0x${m.functionId.toString(16)}, id.largeBlock=${m.largeBlock},data-size=${u.length}`),m.functionId){case 0:break;case 14:o("ID_DSD_BLOCK");const b=1<<u.readUInt8(0),y=c.flags.samplingRate*b*8;if(!c.flags.isDSD)throw new Error("Only expect DSD block if DSD-flag is set");this.metadata.setFormat("sampleRate",y),this.metadata.setFormat("duration",c.totalSamples/y);break;case 36:o("ID_ALT_TRAILER: trailer for non-wav files");break;case 38:this.metadata.setFormat("audioMD5",u);break;case 47:o(`ID_BLOCK_CHECKSUM: checksum=${u.toString("hex")}`);break;default:o(`Ignore unsupported meta-sub-block-id functionId=0x${m.functionId.toString(16)}`);break}d-=n.WavPack.MetadataIdToken.len+(m.largeBlock?e.UINT24_LE.len:e.UINT8.len)+f*2,o(`remainingLength=${d}`),m.isOddSize&&this.tokenizer.ignore(1)}if(d!==0)throw new Error("metadata-sub-block should fit it remaining length")}};return WavPackParser.WavPackParser=s,WavPackParser}var DsfParser={},DsfChunk={},hasRequiredDsfChunk;function requireDsfChunk(){return hasRequiredDsfChunk||(hasRequiredDsfChunk=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FormatChunk=e.ChannelType=e.DsdChunk=e.ChunkHeader=void 0;const t=requireLib$2(),i=requireFourCC();e.ChunkHeader={len:12,get:(r,n)=>({id:i.FourCcToken.get(r,n),size:t.UINT64_LE.get(r,n+4)})},e.DsdChunk={len:16,get:(r,n)=>({fileSize:t.INT64_LE.get(r,n),metadataPointer:t.INT64_LE.get(r,n+8)})},(function(r){r[r.mono=1]="mono",r[r.stereo=2]="stereo",r[r.channels=3]="channels",r[r.quad=4]="quad",r[r["4 channels"]=5]="4 channels",r[r["5 channels"]=6]="5 channels",r[r["5.1 channels"]=7]="5.1 channels"})(e.ChannelType||(e.ChannelType={})),e.FormatChunk={len:40,get:(r,n)=>({formatVersion:t.INT32_LE.get(r,n),formatID:t.INT32_LE.get(r,n+4),channelType:t.INT32_LE.get(r,n+8),channelNum:t.INT32_LE.get(r,n+12),samplingFrequency:t.INT32_LE.get(r,n+16),bitsPerSample:t.INT32_LE.get(r,n+20),sampleCount:t.INT64_LE.get(r,n+24),blockSizePerChannel:t.INT32_LE.get(r,n+32)})}})(DsfChunk)),DsfChunk}var hasRequiredDsfParser;function requireDsfParser(){if(hasRequiredDsfParser)return DsfParser;hasRequiredDsfParser=1,Object.defineProperty(DsfParser,"__esModule",{value:!0}),DsfParser.DsfParser=void 0;const e=requireBrowser$3(),t=requireAbstractID3Parser(),i=requireDsfChunk(),r=requireID3v2Parser(),n=(0,e.default)("music-metadata:parser:DSF");let a=class extends t.AbstractID3Parser{async postId3v2Parse(){const s=this.tokenizer.position,l=await this.tokenizer.readToken(i.ChunkHeader);if(l.id!=="DSD ")throw new Error("Invalid chunk signature");this.metadata.setFormat("container","DSF"),this.metadata.setFormat("lossless",!0);const c=await this.tokenizer.readToken(i.DsdChunk);if(c.metadataPointer===BigInt(0))n("No ID3v2 tag present");else return n(`expect ID3v2 at offset=${c.metadataPointer}`),await this.parseChunks(c.fileSize-l.size),await this.tokenizer.ignore(Number(c.metadataPointer)-this.tokenizer.position-s),new r.ID3v2Parser().parse(this.metadata,this.tokenizer,this.options)}async parseChunks(s){for(;s>=i.ChunkHeader.len;){const l=await this.tokenizer.readToken(i.ChunkHeader);switch(n(`Parsing chunk name=${l.id} size=${l.size}`),l.id){case"fmt ":const c=await this.tokenizer.readToken(i.FormatChunk);this.metadata.setFormat("numberOfChannels",c.channelNum),this.metadata.setFormat("sampleRate",c.samplingFrequency),this.metadata.setFormat("bitsPerSample",c.bitsPerSample),this.metadata.setFormat("numberOfSamples",c.sampleCount),this.metadata.setFormat("duration",Number(c.sampleCount)/c.samplingFrequency);const d=c.bitsPerSample*c.samplingFrequency*c.channelNum;this.metadata.setFormat("bitrate",d);return;default:this.tokenizer.ignore(Number(l.size)-i.ChunkHeader.len);break}s-=l.size}}};return DsfParser.DsfParser=a,DsfParser}var DsdiffParser={},DsdiffToken={},hasRequiredDsdiffToken;function requireDsdiffToken(){if(hasRequiredDsdiffToken)return DsdiffToken;hasRequiredDsdiffToken=1,Object.defineProperty(DsdiffToken,"__esModule",{value:!0}),DsdiffToken.ChunkHeader64=void 0;const e=requireLib$2(),t=requireFourCC();return DsdiffToken.ChunkHeader64={len:12,get:(i,r)=>({chunkID:t.FourCcToken.get(i,r),chunkSize:e.INT64_BE.get(i,r+4)})},DsdiffToken}var hasRequiredDsdiffParser;function requireDsdiffParser(){if(hasRequiredDsdiffParser)return DsdiffParser;hasRequiredDsdiffParser=1,Object.defineProperty(DsdiffParser,"__esModule",{value:!0}),DsdiffParser.DsdiffParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireCore$2(),r=requireFourCC(),n=requireBasicParser(),a=requireID3v2Parser(),o=requireDsdiffToken(),s=(0,t.default)("music-metadata:parser:aiff");let l=class extends n.BasicParser{async parse(){const d=await this.tokenizer.readToken(o.ChunkHeader64);if(d.chunkID!=="FRM8")throw new Error("Unexpected chunk-ID");const m=(await this.tokenizer.readToken(r.FourCcToken)).trim();switch(m){case"DSD":return this.metadata.setFormat("container",`DSDIFF/${m}`),this.metadata.setFormat("lossless",!0),this.readFmt8Chunks(d.chunkSize-BigInt(r.FourCcToken.len));default:throw Error(`Unsupported DSDIFF type: ${m}`)}}async readFmt8Chunks(d){for(;d>=o.ChunkHeader64.len;){const m=await this.tokenizer.readToken(o.ChunkHeader64);s(`Chunk id=${m.chunkID}`),await this.readData(m),d-=BigInt(o.ChunkHeader64.len)+m.chunkSize}}async readData(d){s(`Reading data of chunk[ID=${d.chunkID}, size=${d.chunkSize}]`);const m=this.tokenizer.position;switch(d.chunkID.trim()){case"FVER":const u=await this.tokenizer.readToken(e.UINT32_LE);s(`DSDIFF version=${u}`);break;case"PROP":if(await this.tokenizer.readToken(r.FourCcToken)!=="SND ")throw new Error("Unexpected PROP-chunk ID");await this.handleSoundPropertyChunks(d.chunkSize-BigInt(r.FourCcToken.len));break;case"ID3":const y=await this.tokenizer.readToken(new e.Uint8ArrayType(Number(d.chunkSize))),w=i.fromBuffer(y);await new a.ID3v2Parser().parse(this.metadata,w,this.options);break;default:s(`Ignore chunk[ID=${d.chunkID}, size=${d.chunkSize}]`);break;case"DSD":this.metadata.setFormat("numberOfSamples",Number(d.chunkSize*BigInt(8)/BigInt(this.metadata.format.numberOfChannels))),this.metadata.setFormat("duration",this.metadata.format.numberOfSamples/this.metadata.format.sampleRate);break}const f=d.chunkSize-BigInt(this.tokenizer.position-m);f>0&&(s(`After Parsing chunk, remaining ${f} bytes`),await this.tokenizer.ignore(Number(f)))}async handleSoundPropertyChunks(d){for(s(`Parsing sound-property-chunks, remainingSize=${d}`);d>0;){const m=await this.tokenizer.readToken(o.ChunkHeader64);s(`Sound-property-chunk[ID=${m.chunkID}, size=${m.chunkSize}]`);const f=this.tokenizer.position;switch(m.chunkID.trim()){case"FS":const b=await this.tokenizer.readToken(e.UINT32_BE);this.metadata.setFormat("sampleRate",b);break;case"CHNL":const y=await this.tokenizer.readToken(e.UINT16_BE);this.metadata.setFormat("numberOfChannels",y),await this.handleChannelChunks(m.chunkSize-BigInt(e.UINT16_BE.len));break;case"CMPR":const w=(await this.tokenizer.readToken(r.FourCcToken)).trim(),T=await this.tokenizer.readToken(e.UINT8),E=await this.tokenizer.readToken(new e.StringType(T,"ascii"));w==="DSD"&&(this.metadata.setFormat("lossless",!0),this.metadata.setFormat("bitsPerSample",1)),this.metadata.setFormat("codec",`${w} (${E})`);break;case"ABSS":const R=await this.tokenizer.readToken(e.UINT16_BE),C=await this.tokenizer.readToken(e.UINT8),B=await this.tokenizer.readToken(e.UINT8),D=await this.tokenizer.readToken(e.UINT32_BE);s(`ABSS ${R}:${C}:${B}.${D}`);break;case"LSCO":const _=await this.tokenizer.readToken(e.UINT16_BE);s(`LSCO lsConfig=${_}`);break;case"COMT":default:s(`Unknown sound-property-chunk[ID=${m.chunkID}, size=${m.chunkSize}]`),await this.tokenizer.ignore(Number(m.chunkSize))}const u=m.chunkSize-BigInt(this.tokenizer.position-f);u>0&&(s(`After Parsing sound-property-chunk ${m.chunkSize}, remaining ${u} bytes`),await this.tokenizer.ignore(Number(u))),d-=BigInt(o.ChunkHeader64.len)+m.chunkSize,s(`Parsing sound-property-chunks, remainingSize=${d}`)}if(this.metadata.format.lossless&&this.metadata.format.sampleRate&&this.metadata.format.numberOfChannels&&this.metadata.format.bitsPerSample){const m=this.metadata.format.sampleRate*this.metadata.format.numberOfChannels*this.metadata.format.bitsPerSample;this.metadata.setFormat("bitrate",m)}}async handleChannelChunks(d){s(`Parsing channel-chunks, remainingSize=${d}`);const m=[];for(;d>=r.FourCcToken.len;){const f=await this.tokenizer.readToken(r.FourCcToken);s(`Channel[ID=${f}]`),m.push(f),d-=BigInt(r.FourCcToken.len)}return s(`Channels: ${m.join(", ")}`),m}};return DsdiffParser.DsdiffParser=l,DsdiffParser}var MatroskaParser={},MatroskaDtd={},hasRequiredMatroskaDtd;function requireMatroskaDtd(){if(hasRequiredMatroskaDtd)return MatroskaDtd;hasRequiredMatroskaDtd=1,Object.defineProperty(MatroskaDtd,"__esModule",{value:!0}),MatroskaDtd.elements=void 0;const e=requireTypes();return MatroskaDtd.elements={440786851:{name:"ebml",container:{17030:{name:"ebmlVersion",value:e.DataType.uint},17143:{name:"ebmlReadVersion",value:e.DataType.uint},17138:{name:"ebmlMaxIDWidth",value:e.DataType.uint},17139:{name:"ebmlMaxSizeWidth",value:e.DataType.uint},17026:{name:"docType",value:e.DataType.string},17031:{name:"docTypeVersion",value:e.DataType.uint},17029:{name:"docTypeReadVersion",value:e.DataType.uint}}},408125543:{name:"segment",container:{290298740:{name:"seekHead",container:{19899:{name:"seek",container:{21419:{name:"seekId",value:e.DataType.binary},21420:{name:"seekPosition",value:e.DataType.uint}}}}},357149030:{name:"info",container:{29604:{name:"uid",value:e.DataType.uid},29572:{name:"filename",value:e.DataType.string},3979555:{name:"prevUID",value:e.DataType.uid},3965867:{name:"prevFilename",value:e.DataType.string},4110627:{name:"nextUID",value:e.DataType.uid},4096955:{name:"nextFilename",value:e.DataType.string},2807729:{name:"timecodeScale",value:e.DataType.uint},17545:{name:"duration",value:e.DataType.float},17505:{name:"dateUTC",value:e.DataType.uint},31657:{name:"title",value:e.DataType.string},19840:{name:"muxingApp",value:e.DataType.string},22337:{name:"writingApp",value:e.DataType.string}}},524531317:{name:"cluster",multiple:!0,container:{231:{name:"timecode",value:e.DataType.uid},163:{name:"unknown",value:e.DataType.binary},167:{name:"position",value:e.DataType.uid},171:{name:"prevSize",value:e.DataType.uid}}},374648427:{name:"tracks",container:{174:{name:"entries",multiple:!0,container:{215:{name:"trackNumber",value:e.DataType.uint},29637:{name:"uid",value:e.DataType.uid},131:{name:"trackType",value:e.DataType.uint},185:{name:"flagEnabled",value:e.DataType.bool},136:{name:"flagDefault",value:e.DataType.bool},21930:{name:"flagForced",value:e.DataType.bool},156:{name:"flagLacing",value:e.DataType.bool},28135:{name:"minCache",value:e.DataType.uint},28136:{name:"maxCache",value:e.DataType.uint},2352003:{name:"defaultDuration",value:e.DataType.uint},2306383:{name:"timecodeScale",value:e.DataType.float},21358:{name:"name",value:e.DataType.string},2274716:{name:"language",value:e.DataType.string},134:{name:"codecID",value:e.DataType.string},25506:{name:"codecPrivate",value:e.DataType.binary},2459272:{name:"codecName",value:e.DataType.string},3839639:{name:"codecSettings",value:e.DataType.string},3883072:{name:"codecInfoUrl",value:e.DataType.string},2536e3:{name:"codecDownloadUrl",value:e.DataType.string},170:{name:"codecDecodeAll",value:e.DataType.bool},28587:{name:"trackOverlay",value:e.DataType.uint},224:{name:"video",container:{154:{name:"flagInterlaced",value:e.DataType.bool},21432:{name:"stereoMode",value:e.DataType.uint},176:{name:"pixelWidth",value:e.DataType.uint},186:{name:"pixelHeight",value:e.DataType.uint},21680:{name:"displayWidth",value:e.DataType.uint},21690:{name:"displayHeight",value:e.DataType.uint},21683:{name:"aspectRatioType",value:e.DataType.uint},3061028:{name:"colourSpace",value:e.DataType.uint},3126563:{name:"gammaValue",value:e.DataType.float}}},225:{name:"audio",container:{181:{name:"samplingFrequency",value:e.DataType.float},30901:{name:"outputSamplingFrequency",value:e.DataType.float},159:{name:"channels",value:e.DataType.uint},148:{name:"channels",value:e.DataType.uint},32123:{name:"channelPositions",value:e.DataType.binary},25188:{name:"bitDepth",value:e.DataType.uint}}},28032:{name:"contentEncodings",container:{25152:{name:"contentEncoding",container:{20529:{name:"order",value:e.DataType.uint},20530:{name:"scope",value:e.DataType.bool},20531:{name:"type",value:e.DataType.uint},20532:{name:"contentEncoding",container:{16980:{name:"contentCompAlgo",value:e.DataType.uint},16981:{name:"contentCompSettings",value:e.DataType.binary}}},20533:{name:"contentEncoding",container:{18401:{name:"contentEncAlgo",value:e.DataType.uint},18402:{name:"contentEncKeyID",value:e.DataType.binary},18403:{name:"contentSignature ",value:e.DataType.binary},18404:{name:"ContentSigKeyID  ",value:e.DataType.binary},18405:{name:"contentSigAlgo ",value:e.DataType.uint},18406:{name:"contentSigHashAlgo ",value:e.DataType.uint}}},25188:{name:"bitDepth",value:e.DataType.uint}}}}}}}}},475249515:{name:"cues",container:{187:{name:"cuePoint",container:{179:{name:"cueTime",value:e.DataType.uid},183:{name:"positions",container:{247:{name:"track",value:e.DataType.uint},241:{name:"clusterPosition",value:e.DataType.uint},21368:{name:"blockNumber",value:e.DataType.uint},234:{name:"codecState",value:e.DataType.uint},219:{name:"reference",container:{150:{name:"time",value:e.DataType.uint},151:{name:"cluster",value:e.DataType.uint},21343:{name:"number",value:e.DataType.uint},235:{name:"codecState",value:e.DataType.uint}}},240:{name:"relativePosition",value:e.DataType.uint}}}}}}},423732329:{name:"attachments",container:{24999:{name:"attachedFiles",multiple:!0,container:{18046:{name:"description",value:e.DataType.string},18030:{name:"name",value:e.DataType.string},18016:{name:"mimeType",value:e.DataType.string},18012:{name:"data",value:e.DataType.binary},18094:{name:"uid",value:e.DataType.uid}}}}},272869232:{name:"chapters",container:{17849:{name:"editionEntry",container:{182:{name:"chapterAtom",container:{29636:{name:"uid",value:e.DataType.uid},145:{name:"timeStart",value:e.DataType.uint},146:{name:"timeEnd",value:e.DataType.uid},152:{name:"hidden",value:e.DataType.bool},17816:{name:"enabled",value:e.DataType.uid},143:{name:"track",container:{137:{name:"trackNumber",value:e.DataType.uid},128:{name:"display",container:{133:{name:"string",value:e.DataType.string},17276:{name:"language ",value:e.DataType.string},17278:{name:"country ",value:e.DataType.string}}}}}}}}}}},307544935:{name:"tags",container:{29555:{name:"tag",multiple:!0,container:{25536:{name:"target",container:{25541:{name:"tagTrackUID",value:e.DataType.uid},25540:{name:"tagChapterUID",value:e.DataType.uint},25542:{name:"tagAttachmentUID",value:e.DataType.uid},25546:{name:"targetType",value:e.DataType.string},26826:{name:"targetTypeValue",value:e.DataType.uint},25545:{name:"tagEditionUID",value:e.DataType.uid}}},26568:{name:"simpleTags",multiple:!0,container:{17827:{name:"name",value:e.DataType.string},17543:{name:"string",value:e.DataType.string},17541:{name:"binary",value:e.DataType.binary},17530:{name:"language",value:e.DataType.string},17531:{name:"languageIETF",value:e.DataType.string},17540:{name:"default",value:e.DataType.bool}}}}}}}}}},MatroskaDtd}var hasRequiredMatroskaParser;function requireMatroskaParser(){if(hasRequiredMatroskaParser)return MatroskaParser;hasRequiredMatroskaParser=1,Object.defineProperty(MatroskaParser,"__esModule",{value:!0}),MatroskaParser.MatroskaParser=void 0;const e=requireLib$2(),t=requireBrowser$3(),i=requireBasicParser(),r=requireTypes(),n=requireMatroskaDtd(),a=(0,t.default)("music-metadata:parser:matroska");let o=class extends i.BasicParser{constructor(){super(),this.padding=0,this.parserMap=new Map,this.ebmlMaxIDLength=4,this.ebmlMaxSizeLength=8,this.parserMap.set(r.DataType.uint,l=>this.readUint(l)),this.parserMap.set(r.DataType.string,l=>this.readString(l)),this.parserMap.set(r.DataType.binary,l=>this.readBuffer(l)),this.parserMap.set(r.DataType.uid,async l=>await this.readUint(l)===1),this.parserMap.set(r.DataType.bool,l=>this.readFlag(l)),this.parserMap.set(r.DataType.float,l=>this.readFloat(l))}init(l,c,d){return super.init(l,c,d),this}async parse(){const l=await this.parseContainer(n.elements,this.tokenizer.fileInfo.size,[]);if(this.metadata.setFormat("container",`EBML/${l.ebml.docType}`),l.segment){const c=l.segment.info;if(c){const m=c.timecodeScale?c.timecodeScale:1e6;if(typeof c.duration=="number"){const f=c.duration*m/1e9;this.addTag("segment:title",c.title),this.metadata.setFormat("duration",f)}}const d=l.segment.tracks;if(d&&d.entries){d.entries.forEach(f=>{const u={codecName:f.codecID.replace("A_","").replace("V_",""),codecSettings:f.codecSettings,flagDefault:f.flagDefault,flagLacing:f.flagLacing,flagEnabled:f.flagEnabled,language:f.language,name:f.name,type:f.trackType,audio:f.audio,video:f.video};this.metadata.addStreamInfo(u)});const m=d.entries.filter(f=>f.trackType===r.TrackType.audio.valueOf()).reduce((f,u)=>!f||!f.flagDefault&&u.flagDefault||u.trackNumber&&u.trackNumber<f.trackNumber?u:f,null);m&&(this.metadata.setFormat("codec",m.codecID.replace("A_","")),this.metadata.setFormat("sampleRate",m.audio.samplingFrequency),this.metadata.setFormat("numberOfChannels",m.audio.channels)),l.segment.tags&&l.segment.tags.tag.forEach(f=>{const u=f.target,b=u?.targetTypeValue?r.TargetType[u.targetTypeValue]:u?.targetType?u.targetType:"track";f.simpleTags.forEach(y=>{const w=y.string?y.string:y.binary;this.addTag(`${b}:${y.name}`,w)})}),l.segment.attachments&&l.segment.attachments.attachedFiles.filter(f=>f.mimeType.startsWith("image/")).map(f=>({data:f.data,format:f.mimeType,description:f.description,name:f.name})).forEach(f=>{this.addTag("picture",f)})}}}async parseContainer(l,c,d){const m={};for(;this.tokenizer.position<c;){let f;try{f=await this.readElement()}catch(b){if(b.message==="End-Of-Stream")break;throw b}const u=l[f.id];if(u)if(a(`Element: name=${u.name}, container=${!!u.container}`),u.container){const b=await this.parseContainer(u.container,f.len>=0?this.tokenizer.position+f.len:-1,d.concat([u.name]));u.multiple?(m[u.name]||(m[u.name]=[]),m[u.name].push(b)):m[u.name]=b}else m[u.name]=await this.parserMap.get(u.value)(f);else switch(f.id){case 236:this.padding+=f.len,await this.tokenizer.ignore(f.len);break;default:a(`parseEbml: path=${d.join("/")}, unknown element: id=${f.id.toString(16)}`),this.padding+=f.len,await this.tokenizer.ignore(f.len)}}return m}async readVintData(l){const c=await this.tokenizer.peekNumber(e.UINT8);let d=128,m=1;for(;(c&d)===0;){if(m>l)throw new Error("VINT value exceeding maximum size");++m,d>>=1}const f=Buffer.alloc(m);return await this.tokenizer.readBuffer(f),f}async readElement(){const l=await this.readVintData(this.ebmlMaxIDLength),c=await this.readVintData(this.ebmlMaxSizeLength);c[0]^=128>>c.length-1;const d=Math.min(6,c.length);return{id:l.readUIntBE(0,l.length),len:c.readUIntBE(c.length-d,d)}}isMaxValue(l){if(l.length===this.ebmlMaxSizeLength){for(let c=1;c<this.ebmlMaxSizeLength;++c)if(l[c]!==255)return!1;return!0}return!1}async readFloat(l){switch(l.len){case 0:return 0;case 4:return this.tokenizer.readNumber(e.Float32_BE);case 8:return this.tokenizer.readNumber(e.Float64_BE);case 10:return this.tokenizer.readNumber(e.Float64_BE);default:throw new Error(`Invalid IEEE-754 float length: ${l.len}`)}}async readFlag(l){return await this.readUint(l)===1}async readUint(l){const c=await this.readBuffer(l),d=Math.min(6,l.len);return c.readUIntBE(l.len-d,d)}async readString(l){return(await this.tokenizer.readToken(new e.StringType(l.len,"utf-8"))).replace(/\00.*$/g,"")}async readBuffer(l){const c=Buffer.alloc(l.len);return await this.tokenizer.readBuffer(c),c}addTag(l,c){this.metadata.addTag("matroska",l,c)}};return MatroskaParser.MatroskaParser=o,MatroskaParser}var hasRequiredParserFactory;function requireParserFactory(){if(hasRequiredParserFactory)return ParserFactory;hasRequiredParserFactory=1,Object.defineProperty(ParserFactory,"__esModule",{value:!0}),ParserFactory.ParserFactory=ParserFactory.parseHttpContentType=void 0;const e=requireCore$1(),t=requireContentType(),i=requireMediaTyper(),r=requireBrowser$3(),n=requireMetadataCollector(),a=requireAiffParser(),o=requireAPEv2Parser(),s=requireAsfParser(),l=requireFlacParser(),c=requireMP4Parser(),d=requireMpegParser(),m=requireMusepack(),f=requireOggParser(),u=requireWaveParser(),b=requireWavPackParser(),y=requireDsfParser(),w=requireDsdiffParser(),T=requireMatroskaParser(),E=(0,r.default)("music-metadata:parser:factory");function R(D){const _=t.parse(D),x=i.parse(_.type);return{type:x.type,subtype:x.subtype,suffix:x.suffix,parameters:_.parameters}}ParserFactory.parseHttpContentType=R;async function C(D,_,x={}){const Z=await B.loadParser(_),L=new n.MetadataCollector(x);return await Z.init(L,D,x).parse(),L.toCommonMetadata()}let B=class Ne{static async parseOnContentType(_,x){const{mimeType:Z,path:L,url:z}=await _.fileInfo,K=Ne.getParserIdForMimeType(Z)||Ne.getParserIdForExtension(L)||Ne.getParserIdForExtension(z);return K||E("No parser found for MIME-type / extension: "+Z),this.parse(_,K,x)}static async parse(_,x,Z){if(!x){E("Guess parser on content...");const L=Buffer.alloc(4100);if(await _.peekBuffer(L,{mayBeLess:!0}),_.fileInfo.path&&(x=this.getParserIdForExtension(_.fileInfo.path)),!x){const z=await e.fromBuffer(L);if(!z)throw new Error("Failed to determine audio format");if(E(`Guessed file type is mime=${z.mime}, extension=${z.ext}`),x=Ne.getParserIdForMimeType(z.mime),!x)throw new Error("Guessed MIME-type not supported: "+z.mime)}}return C(_,x,Z)}static getParserIdForExtension(_){if(!_)return;switch(this.getExtension(_).toLocaleLowerCase()||_){case".mp2":case".mp3":case".m2a":case".aac":return"mpeg";case".ape":return"apev2";case".mp4":case".m4a":case".m4b":case".m4pa":case".m4v":case".m4r":case".3gp":return"mp4";case".wma":case".wmv":case".asf":return"asf";case".flac":return"flac";case".ogg":case".ogv":case".oga":case".ogm":case".ogx":case".opus":case".spx":return"ogg";case".aif":case".aiff":case".aifc":return"aiff";case".wav":case".bwf":return"riff";case".wv":case".wvp":return"wavpack";case".mpc":return"musepack";case".dsf":return"dsf";case".dff":return"dsdiff";case".mka":case".mkv":case".mk3d":case".mks":case".webm":return"matroska"}}static async loadParser(_){switch(_){case"aiff":return new a.AIFFParser;case"adts":case"mpeg":return new d.MpegParser;case"apev2":return new o.APEv2Parser;case"asf":return new s.AsfParser;case"dsf":return new y.DsfParser;case"dsdiff":return new w.DsdiffParser;case"flac":return new l.FlacParser;case"mp4":return new c.MP4Parser;case"musepack":return new m.default;case"ogg":return new f.OggParser;case"riff":return new u.WaveParser;case"wavpack":return new b.WavPackParser;case"matroska":return new T.MatroskaParser;default:throw new Error(`Unknown parser type: ${_}`)}}static getExtension(_){const x=_.lastIndexOf(".");return x===-1?"":_.slice(x)}static getParserIdForMimeType(_){let x;try{x=R(_)}catch{E(`Invalid HTTP Content-Type header value: ${_}`);return}const Z=x.subtype.indexOf("x-")===0?x.subtype.substring(2):x.subtype;switch(x.type){case"audio":switch(Z){case"mp3":case"mpeg":return"mpeg";case"aac":case"aacp":return"adts";case"flac":return"flac";case"ape":case"monkeys-audio":return"apev2";case"mp4":case"m4a":return"mp4";case"ogg":case"opus":case"speex":return"ogg";case"ms-wma":case"ms-wmv":case"ms-asf":return"asf";case"aiff":case"aif":case"aifc":return"aiff";case"vnd.wave":case"wav":case"wave":return"riff";case"wavpack":return"wavpack";case"musepack":return"musepack";case"matroska":case"webm":return"matroska";case"dsf":return"dsf"}break;case"video":switch(Z){case"ms-asf":case"ms-wmv":return"asf";case"m4v":case"mp4":return"mp4";case"ogg":return"ogg";case"matroska":case"webm":return"matroska"}break;case"application":switch(Z){case"vnd.ms-asf":return"asf";case"ogg":return"ogg"}break}}};return ParserFactory.ParserFactory=B,ParserFactory}var RandomUint8ArrayReader={},hasRequiredRandomUint8ArrayReader;function requireRandomUint8ArrayReader(){if(hasRequiredRandomUint8ArrayReader)return RandomUint8ArrayReader;hasRequiredRandomUint8ArrayReader=1,Object.defineProperty(RandomUint8ArrayReader,"__esModule",{value:!0}),RandomUint8ArrayReader.RandomUint8ArrayReader=void 0;let e=class{constructor(i){this.uint8Array=i,this.fileSize=i.length}async randomRead(i,r,n,a){return i.set(this.uint8Array.subarray(a,a+n),r),n}};return RandomUint8ArrayReader.RandomUint8ArrayReader=e,RandomUint8ArrayReader}var Lyrics3={},hasRequiredLyrics3;function requireLyrics3(){return hasRequiredLyrics3||(hasRequiredLyrics3=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getLyricsHeaderLength=e.endTag2=void 0,e.endTag2="LYRICS200";async function t(i){if(i.fileSize>=143){const r=Buffer.alloc(15);await i.randomRead(r,0,r.length,i.fileSize-143);const n=r.toString("binary");if(n.substr(6)===e.endTag2)return parseInt(n.substr(0,6),10)+15}return 0}e.getLyricsHeaderLength=t})(Lyrics3)),Lyrics3}var hasRequiredCore;function requireCore(){if(hasRequiredCore)return core$2;hasRequiredCore=1,Object.defineProperty(core$2,"__esModule",{value:!0}),core$2.scanAppendingHeaders=core$2.selectCover=core$2.ratingToStars=core$2.orderTags=core$2.parseFromTokenizer=core$2.parseBuffer=core$2.parseStream=void 0;const e=requireCore$2(),t=requireParserFactory(),i=requireRandomUint8ArrayReader(),r=requireAPEv2Parser(),n=requireID3v1Parser(),a=requireLyrics3();function o(u,b,y={}){return l(e.fromStream(u,typeof b=="string"?{mimeType:b}:b),y)}core$2.parseStream=o;async function s(u,b,y={}){const w=new i.RandomUint8ArrayReader(u);await f(w,y);const T=e.fromBuffer(u,typeof b=="string"?{mimeType:b}:b);return l(T,y)}core$2.parseBuffer=s;function l(u,b){return t.ParserFactory.parseOnContentType(u,b)}core$2.parseFromTokenizer=l;function c(u){const b={};for(const y of u)(b[y.id]=b[y.id]||[]).push(y.value);return b}core$2.orderTags=c;function d(u){return u===void 0?0:1+Math.round(u*4)}core$2.ratingToStars=d;function m(u){return u?u.reduce((b,y)=>y.name&&y.name.toLowerCase()in["front","cover","cover (front)"]?y:b):null}core$2.selectCover=m;async function f(u,b={}){let y=u.fileSize;if(await(0,n.hasID3v1Header)(u)){y-=128;const w=await(0,a.getLyricsHeaderLength)(u);y-=w}b.apeHeader=await r.APEv2Parser.findApeFooterOffset(u,y)}return core$2.scanAppendingHeaders=f,core$2}var lib={},browser$2={exports:{}},stream={exports:{}},buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=s,base64Js.toByteArray=c,base64Js.fromByteArray=f;for(var e=[],t=[],i=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,a=r.length;n<a;++n)e[n]=r[n],t[r.charCodeAt(n)]=n;t[45]=62,t[95]=63;function o(u){var b=u.length;if(b%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=u.indexOf("=");y===-1&&(y=b);var w=y===b?0:4-y%4;return[y,w]}function s(u){var b=o(u),y=b[0],w=b[1];return(y+w)*3/4-w}function l(u,b,y){return(b+y)*3/4-y}function c(u){var b,y=o(u),w=y[0],T=y[1],E=new i(l(u,w,T)),R=0,C=T>0?w-4:w,B;for(B=0;B<C;B+=4)b=t[u.charCodeAt(B)]<<18|t[u.charCodeAt(B+1)]<<12|t[u.charCodeAt(B+2)]<<6|t[u.charCodeAt(B+3)],E[R++]=b>>16&255,E[R++]=b>>8&255,E[R++]=b&255;return T===2&&(b=t[u.charCodeAt(B)]<<2|t[u.charCodeAt(B+1)]>>4,E[R++]=b&255),T===1&&(b=t[u.charCodeAt(B)]<<10|t[u.charCodeAt(B+1)]<<4|t[u.charCodeAt(B+2)]>>2,E[R++]=b>>8&255,E[R++]=b&255),E}function d(u){return e[u>>18&63]+e[u>>12&63]+e[u>>6&63]+e[u&63]}function m(u,b,y){for(var w,T=[],E=b;E<y;E+=3)w=(u[E]<<16&16711680)+(u[E+1]<<8&65280)+(u[E+2]&255),T.push(d(w));return T.join("")}function f(u){for(var b,y=u.length,w=y%3,T=[],E=16383,R=0,C=y-w;R<C;R+=E)T.push(m(u,R,R+E>C?C:R+E));return w===1?(b=u[y-1],T.push(e[b>>2]+e[b<<4&63]+"==")):w===2&&(b=(u[y-2]<<8)+u[y-1],T.push(e[b>>10]+e[b>>4&63]+e[b<<2&63]+"=")),T.join("")}return base64Js}var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(e){const t=requireBase64Js(),i=requireIeee754(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=s,e.SlowBuffer=E,e.INSPECT_MAX_BYTES=50;const n=2147483647;e.kMaxLength=n,s.TYPED_ARRAY_SUPPORT=a(),!s.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function a(){try{const v=new Uint8Array(1),h={foo:function(){return 42}};return Object.setPrototypeOf(h,Uint8Array.prototype),Object.setPrototypeOf(v,h),v.foo()===42}catch{return!1}}Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}});function o(v){if(v>n)throw new RangeError('The value "'+v+'" is invalid for option "size"');const h=new Uint8Array(v);return Object.setPrototypeOf(h,s.prototype),h}function s(v,h,g){if(typeof v=="number"){if(typeof h=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return m(v)}return l(v,h,g)}s.poolSize=8192;function l(v,h,g){if(typeof v=="string")return f(v,h);if(ArrayBuffer.isView(v))return b(v);if(v==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v);if(W(v,ArrayBuffer)||v&&W(v.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(W(v,SharedArrayBuffer)||v&&W(v.buffer,SharedArrayBuffer)))return y(v,h,g);if(typeof v=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const k=v.valueOf&&v.valueOf();if(k!=null&&k!==v)return s.from(k,h,g);const q=w(v);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof v[Symbol.toPrimitive]=="function")return s.from(v[Symbol.toPrimitive]("string"),h,g);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof v)}s.from=function(v,h,g){return l(v,h,g)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array);function c(v){if(typeof v!="number")throw new TypeError('"size" argument must be of type number');if(v<0)throw new RangeError('The value "'+v+'" is invalid for option "size"')}function d(v,h,g){return c(v),v<=0?o(v):h!==void 0?typeof g=="string"?o(v).fill(h,g):o(v).fill(h):o(v)}s.alloc=function(v,h,g){return d(v,h,g)};function m(v){return c(v),o(v<0?0:T(v)|0)}s.allocUnsafe=function(v){return m(v)},s.allocUnsafeSlow=function(v){return m(v)};function f(v,h){if((typeof h!="string"||h==="")&&(h="utf8"),!s.isEncoding(h))throw new TypeError("Unknown encoding: "+h);const g=R(v,h)|0;let k=o(g);const q=k.write(v,h);return q!==g&&(k=k.slice(0,q)),k}function u(v){const h=v.length<0?0:T(v.length)|0,g=o(h);for(let k=0;k<h;k+=1)g[k]=v[k]&255;return g}function b(v){if(W(v,Uint8Array)){const h=new Uint8Array(v);return y(h.buffer,h.byteOffset,h.byteLength)}return u(v)}function y(v,h,g){if(h<0||v.byteLength<h)throw new RangeError('"offset" is outside of buffer bounds');if(v.byteLength<h+(g||0))throw new RangeError('"length" is outside of buffer bounds');let k;return h===void 0&&g===void 0?k=new Uint8Array(v):g===void 0?k=new Uint8Array(v,h):k=new Uint8Array(v,h,g),Object.setPrototypeOf(k,s.prototype),k}function w(v){if(s.isBuffer(v)){const h=T(v.length)|0,g=o(h);return g.length===0||v.copy(g,0,0,h),g}if(v.length!==void 0)return typeof v.length!="number"||ie(v.length)?o(0):u(v);if(v.type==="Buffer"&&Array.isArray(v.data))return u(v.data)}function T(v){if(v>=n)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+n.toString(16)+" bytes");return v|0}function E(v){return+v!=v&&(v=0),s.alloc(+v)}s.isBuffer=function(h){return h!=null&&h._isBuffer===!0&&h!==s.prototype},s.compare=function(h,g){if(W(h,Uint8Array)&&(h=s.from(h,h.offset,h.byteLength)),W(g,Uint8Array)&&(g=s.from(g,g.offset,g.byteLength)),!s.isBuffer(h)||!s.isBuffer(g))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(h===g)return 0;let k=h.length,q=g.length;for(let X=0,te=Math.min(k,q);X<te;++X)if(h[X]!==g[X]){k=h[X],q=g[X];break}return k<q?-1:q<k?1:0},s.isEncoding=function(h){switch(String(h).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(h,g){if(!Array.isArray(h))throw new TypeError('"list" argument must be an Array of Buffers');if(h.length===0)return s.alloc(0);let k;if(g===void 0)for(g=0,k=0;k<h.length;++k)g+=h[k].length;const q=s.allocUnsafe(g);let X=0;for(k=0;k<h.length;++k){let te=h[k];if(W(te,Uint8Array))X+te.length>q.length?(s.isBuffer(te)||(te=s.from(te)),te.copy(q,X)):Uint8Array.prototype.set.call(q,te,X);else if(s.isBuffer(te))te.copy(q,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=te.length}return q};function R(v,h){if(s.isBuffer(v))return v.length;if(ArrayBuffer.isView(v)||W(v,ArrayBuffer))return v.byteLength;if(typeof v!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof v);const g=v.length,k=arguments.length>2&&arguments[2]===!0;if(!k&&g===0)return 0;let q=!1;for(;;)switch(h){case"ascii":case"latin1":case"binary":return g;case"utf8":case"utf-8":return H(v).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g*2;case"hex":return g>>>1;case"base64":return U(v).length;default:if(q)return k?-1:H(v).length;h=(""+h).toLowerCase(),q=!0}}s.byteLength=R;function C(v,h,g){let k=!1;if((h===void 0||h<0)&&(h=0),h>this.length||((g===void 0||g>this.length)&&(g=this.length),g<=0)||(g>>>=0,h>>>=0,g<=h))return"";for(v||(v="utf8");;)switch(v){case"hex":return fe(this,h,g);case"utf8":case"utf-8":return ae(this,h,g);case"ascii":return he(this,h,g);case"latin1":case"binary":return Y(this,h,g);case"base64":return G(this,h,g);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,h,g);default:if(k)throw new TypeError("Unknown encoding: "+v);v=(v+"").toLowerCase(),k=!0}}s.prototype._isBuffer=!0;function B(v,h,g){const k=v[h];v[h]=v[g],v[g]=k}s.prototype.swap16=function(){const h=this.length;if(h%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let g=0;g<h;g+=2)B(this,g,g+1);return this},s.prototype.swap32=function(){const h=this.length;if(h%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let g=0;g<h;g+=4)B(this,g,g+3),B(this,g+1,g+2);return this},s.prototype.swap64=function(){const h=this.length;if(h%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let g=0;g<h;g+=8)B(this,g,g+7),B(this,g+1,g+6),B(this,g+2,g+5),B(this,g+3,g+4);return this},s.prototype.toString=function(){const h=this.length;return h===0?"":arguments.length===0?ae(this,0,h):C.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(h){if(!s.isBuffer(h))throw new TypeError("Argument must be a Buffer");return this===h?!0:s.compare(this,h)===0},s.prototype.inspect=function(){let h="";const g=e.INSPECT_MAX_BYTES;return h=this.toString("hex",0,g).replace(/(.{2})/g,"$1 ").trim(),this.length>g&&(h+=" ... "),"<Buffer "+h+">"},r&&(s.prototype[r]=s.prototype.inspect),s.prototype.compare=function(h,g,k,q,X){if(W(h,Uint8Array)&&(h=s.from(h,h.offset,h.byteLength)),!s.isBuffer(h))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof h);if(g===void 0&&(g=0),k===void 0&&(k=h?h.length:0),q===void 0&&(q=0),X===void 0&&(X=this.length),g<0||k>h.length||q<0||X>this.length)throw new RangeError("out of range index");if(q>=X&&g>=k)return 0;if(q>=X)return-1;if(g>=k)return 1;if(g>>>=0,k>>>=0,q>>>=0,X>>>=0,this===h)return 0;let te=X-q,ve=k-g;const Se=Math.min(te,ve),Ee=this.slice(q,X),Ie=h.slice(g,k);for(let xe=0;xe<Se;++xe)if(Ee[xe]!==Ie[xe]){te=Ee[xe],ve=Ie[xe];break}return te<ve?-1:ve<te?1:0};function D(v,h,g,k,q){if(v.length===0)return-1;if(typeof g=="string"?(k=g,g=0):g>2147483647?g=2147483647:g<-2147483648&&(g=-2147483648),g=+g,ie(g)&&(g=q?0:v.length-1),g<0&&(g=v.length+g),g>=v.length){if(q)return-1;g=v.length-1}else if(g<0)if(q)g=0;else return-1;if(typeof h=="string"&&(h=s.from(h,k)),s.isBuffer(h))return h.length===0?-1:_(v,h,g,k,q);if(typeof h=="number")return h=h&255,typeof Uint8Array.prototype.indexOf=="function"?q?Uint8Array.prototype.indexOf.call(v,h,g):Uint8Array.prototype.lastIndexOf.call(v,h,g):_(v,[h],g,k,q);throw new TypeError("val must be string, number or Buffer")}function _(v,h,g,k,q){let X=1,te=v.length,ve=h.length;if(k!==void 0&&(k=String(k).toLowerCase(),k==="ucs2"||k==="ucs-2"||k==="utf16le"||k==="utf-16le")){if(v.length<2||h.length<2)return-1;X=2,te/=2,ve/=2,g/=2}function Se(Ie,xe){return X===1?Ie[xe]:Ie.readUInt16BE(xe*X)}let Ee;if(q){let Ie=-1;for(Ee=g;Ee<te;Ee++)if(Se(v,Ee)===Se(h,Ie===-1?0:Ee-Ie)){if(Ie===-1&&(Ie=Ee),Ee-Ie+1===ve)return Ie*X}else Ie!==-1&&(Ee-=Ee-Ie),Ie=-1}else for(g+ve>te&&(g=te-ve),Ee=g;Ee>=0;Ee--){let Ie=!0;for(let xe=0;xe<ve;xe++)if(Se(v,Ee+xe)!==Se(h,xe)){Ie=!1;break}if(Ie)return Ee}return-1}s.prototype.includes=function(h,g,k){return this.indexOf(h,g,k)!==-1},s.prototype.indexOf=function(h,g,k){return D(this,h,g,k,!0)},s.prototype.lastIndexOf=function(h,g,k){return D(this,h,g,k,!1)};function x(v,h,g,k){g=Number(g)||0;const q=v.length-g;k?(k=Number(k),k>q&&(k=q)):k=q;const X=h.length;k>X/2&&(k=X/2);let te;for(te=0;te<k;++te){const ve=parseInt(h.substr(te*2,2),16);if(ie(ve))return te;v[g+te]=ve}return te}function Z(v,h,g,k){return j(H(h,v.length-g),v,g,k)}function L(v,h,g,k){return j($(h),v,g,k)}function z(v,h,g,k){return j(U(h),v,g,k)}function K(v,h,g,k){return j(M(h,v.length-g),v,g,k)}s.prototype.write=function(h,g,k,q){if(g===void 0)q="utf8",k=this.length,g=0;else if(k===void 0&&typeof g=="string")q=g,k=this.length,g=0;else if(isFinite(g))g=g>>>0,isFinite(k)?(k=k>>>0,q===void 0&&(q="utf8")):(q=k,k=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-g;if((k===void 0||k>X)&&(k=X),h.length>0&&(k<0||g<0)||g>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let te=!1;for(;;)switch(q){case"hex":return x(this,h,g,k);case"utf8":case"utf-8":return Z(this,h,g,k);case"ascii":case"latin1":case"binary":return L(this,h,g,k);case"base64":return z(this,h,g,k);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return K(this,h,g,k);default:if(te)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),te=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function G(v,h,g){return h===0&&g===v.length?t.fromByteArray(v):t.fromByteArray(v.slice(h,g))}function ae(v,h,g){g=Math.min(v.length,g);const k=[];let q=h;for(;q<g;){const X=v[q];let te=null,ve=X>239?4:X>223?3:X>191?2:1;if(q+ve<=g){let Se,Ee,Ie,xe;switch(ve){case 1:X<128&&(te=X);break;case 2:Se=v[q+1],(Se&192)===128&&(xe=(X&31)<<6|Se&63,xe>127&&(te=xe));break;case 3:Se=v[q+1],Ee=v[q+2],(Se&192)===128&&(Ee&192)===128&&(xe=(X&15)<<12|(Se&63)<<6|Ee&63,xe>2047&&(xe<55296||xe>57343)&&(te=xe));break;case 4:Se=v[q+1],Ee=v[q+2],Ie=v[q+3],(Se&192)===128&&(Ee&192)===128&&(Ie&192)===128&&(xe=(X&15)<<18|(Se&63)<<12|(Ee&63)<<6|Ie&63,xe>65535&&xe<1114112&&(te=xe))}}te===null?(te=65533,ve=1):te>65535&&(te-=65536,k.push(te>>>10&1023|55296),te=56320|te&1023),k.push(te),q+=ve}return ce(k)}const de=4096;function ce(v){const h=v.length;if(h<=de)return String.fromCharCode.apply(String,v);let g="",k=0;for(;k<h;)g+=String.fromCharCode.apply(String,v.slice(k,k+=de));return g}function he(v,h,g){let k="";g=Math.min(v.length,g);for(let q=h;q<g;++q)k+=String.fromCharCode(v[q]&127);return k}function Y(v,h,g){let k="";g=Math.min(v.length,g);for(let q=h;q<g;++q)k+=String.fromCharCode(v[q]);return k}function fe(v,h,g){const k=v.length;(!h||h<0)&&(h=0),(!g||g<0||g>k)&&(g=k);let q="";for(let X=h;X<g;++X)q+=pe[v[X]];return q}function N(v,h,g){const k=v.slice(h,g);let q="";for(let X=0;X<k.length-1;X+=2)q+=String.fromCharCode(k[X]+k[X+1]*256);return q}s.prototype.slice=function(h,g){const k=this.length;h=~~h,g=g===void 0?k:~~g,h<0?(h+=k,h<0&&(h=0)):h>k&&(h=k),g<0?(g+=k,g<0&&(g=0)):g>k&&(g=k),g<h&&(g=h);const q=this.subarray(h,g);return Object.setPrototypeOf(q,s.prototype),q};function J(v,h,g){if(v%1!==0||v<0)throw new RangeError("offset is not uint");if(v+h>g)throw new RangeError("Trying to access beyond buffer length")}s.prototype.readUintLE=s.prototype.readUIntLE=function(h,g,k){h=h>>>0,g=g>>>0,k||J(h,g,this.length);let q=this[h],X=1,te=0;for(;++te<g&&(X*=256);)q+=this[h+te]*X;return q},s.prototype.readUintBE=s.prototype.readUIntBE=function(h,g,k){h=h>>>0,g=g>>>0,k||J(h,g,this.length);let q=this[h+--g],X=1;for(;g>0&&(X*=256);)q+=this[h+--g]*X;return q},s.prototype.readUint8=s.prototype.readUInt8=function(h,g){return h=h>>>0,g||J(h,1,this.length),this[h]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(h,g){return h=h>>>0,g||J(h,2,this.length),this[h]|this[h+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(h,g){return h=h>>>0,g||J(h,2,this.length),this[h]<<8|this[h+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(h,g){return h=h>>>0,g||J(h,4,this.length),(this[h]|this[h+1]<<8|this[h+2]<<16)+this[h+3]*16777216},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(h,g){return h=h>>>0,g||J(h,4,this.length),this[h]*16777216+(this[h+1]<<16|this[h+2]<<8|this[h+3])},s.prototype.readBigUInt64LE=se(function(h){h=h>>>0,S(h,"offset");const g=this[h],k=this[h+7];(g===void 0||k===void 0)&&I(h,this.length-8);const q=g+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24,X=this[++h]+this[++h]*2**8+this[++h]*2**16+k*2**24;return BigInt(q)+(BigInt(X)<<BigInt(32))}),s.prototype.readBigUInt64BE=se(function(h){h=h>>>0,S(h,"offset");const g=this[h],k=this[h+7];(g===void 0||k===void 0)&&I(h,this.length-8);const q=g*2**24+this[++h]*2**16+this[++h]*2**8+this[++h],X=this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+k;return(BigInt(q)<<BigInt(32))+BigInt(X)}),s.prototype.readIntLE=function(h,g,k){h=h>>>0,g=g>>>0,k||J(h,g,this.length);let q=this[h],X=1,te=0;for(;++te<g&&(X*=256);)q+=this[h+te]*X;return X*=128,q>=X&&(q-=Math.pow(2,8*g)),q},s.prototype.readIntBE=function(h,g,k){h=h>>>0,g=g>>>0,k||J(h,g,this.length);let q=g,X=1,te=this[h+--q];for(;q>0&&(X*=256);)te+=this[h+--q]*X;return X*=128,te>=X&&(te-=Math.pow(2,8*g)),te},s.prototype.readInt8=function(h,g){return h=h>>>0,g||J(h,1,this.length),this[h]&128?(255-this[h]+1)*-1:this[h]},s.prototype.readInt16LE=function(h,g){h=h>>>0,g||J(h,2,this.length);const k=this[h]|this[h+1]<<8;return k&32768?k|4294901760:k},s.prototype.readInt16BE=function(h,g){h=h>>>0,g||J(h,2,this.length);const k=this[h+1]|this[h]<<8;return k&32768?k|4294901760:k},s.prototype.readInt32LE=function(h,g){return h=h>>>0,g||J(h,4,this.length),this[h]|this[h+1]<<8|this[h+2]<<16|this[h+3]<<24},s.prototype.readInt32BE=function(h,g){return h=h>>>0,g||J(h,4,this.length),this[h]<<24|this[h+1]<<16|this[h+2]<<8|this[h+3]},s.prototype.readBigInt64LE=se(function(h){h=h>>>0,S(h,"offset");const g=this[h],k=this[h+7];(g===void 0||k===void 0)&&I(h,this.length-8);const q=this[h+4]+this[h+5]*2**8+this[h+6]*2**16+(k<<24);return(BigInt(q)<<BigInt(32))+BigInt(g+this[++h]*2**8+this[++h]*2**16+this[++h]*2**24)}),s.prototype.readBigInt64BE=se(function(h){h=h>>>0,S(h,"offset");const g=this[h],k=this[h+7];(g===void 0||k===void 0)&&I(h,this.length-8);const q=(g<<24)+this[++h]*2**16+this[++h]*2**8+this[++h];return(BigInt(q)<<BigInt(32))+BigInt(this[++h]*2**24+this[++h]*2**16+this[++h]*2**8+k)}),s.prototype.readFloatLE=function(h,g){return h=h>>>0,g||J(h,4,this.length),i.read(this,h,!0,23,4)},s.prototype.readFloatBE=function(h,g){return h=h>>>0,g||J(h,4,this.length),i.read(this,h,!1,23,4)},s.prototype.readDoubleLE=function(h,g){return h=h>>>0,g||J(h,8,this.length),i.read(this,h,!0,52,8)},s.prototype.readDoubleBE=function(h,g){return h=h>>>0,g||J(h,8,this.length),i.read(this,h,!1,52,8)};function ne(v,h,g,k,q,X){if(!s.isBuffer(v))throw new TypeError('"buffer" argument must be a Buffer instance');if(h>q||h<X)throw new RangeError('"value" argument is out of bounds');if(g+k>v.length)throw new RangeError("Index out of range")}s.prototype.writeUintLE=s.prototype.writeUIntLE=function(h,g,k,q){if(h=+h,g=g>>>0,k=k>>>0,!q){const ve=Math.pow(2,8*k)-1;ne(this,h,g,k,ve,0)}let X=1,te=0;for(this[g]=h&255;++te<k&&(X*=256);)this[g+te]=h/X&255;return g+k},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(h,g,k,q){if(h=+h,g=g>>>0,k=k>>>0,!q){const ve=Math.pow(2,8*k)-1;ne(this,h,g,k,ve,0)}let X=k-1,te=1;for(this[g+X]=h&255;--X>=0&&(te*=256);)this[g+X]=h/te&255;return g+k},s.prototype.writeUint8=s.prototype.writeUInt8=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,1,255,0),this[g]=h&255,g+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,2,65535,0),this[g]=h&255,this[g+1]=h>>>8,g+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,2,65535,0),this[g]=h>>>8,this[g+1]=h&255,g+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,4,4294967295,0),this[g+3]=h>>>24,this[g+2]=h>>>16,this[g+1]=h>>>8,this[g]=h&255,g+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,4,4294967295,0),this[g]=h>>>24,this[g+1]=h>>>16,this[g+2]=h>>>8,this[g+3]=h&255,g+4};function ee(v,h,g,k,q){P(h,k,q,v,g,7);let X=Number(h&BigInt(4294967295));v[g++]=X,X=X>>8,v[g++]=X,X=X>>8,v[g++]=X,X=X>>8,v[g++]=X;let te=Number(h>>BigInt(32)&BigInt(4294967295));return v[g++]=te,te=te>>8,v[g++]=te,te=te>>8,v[g++]=te,te=te>>8,v[g++]=te,g}function me(v,h,g,k,q){P(h,k,q,v,g,7);let X=Number(h&BigInt(4294967295));v[g+7]=X,X=X>>8,v[g+6]=X,X=X>>8,v[g+5]=X,X=X>>8,v[g+4]=X;let te=Number(h>>BigInt(32)&BigInt(4294967295));return v[g+3]=te,te=te>>8,v[g+2]=te,te=te>>8,v[g+1]=te,te=te>>8,v[g]=te,g+8}s.prototype.writeBigUInt64LE=se(function(h,g=0){return ee(this,h,g,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeBigUInt64BE=se(function(h,g=0){return me(this,h,g,BigInt(0),BigInt("0xffffffffffffffff"))}),s.prototype.writeIntLE=function(h,g,k,q){if(h=+h,g=g>>>0,!q){const Se=Math.pow(2,8*k-1);ne(this,h,g,k,Se-1,-Se)}let X=0,te=1,ve=0;for(this[g]=h&255;++X<k&&(te*=256);)h<0&&ve===0&&this[g+X-1]!==0&&(ve=1),this[g+X]=(h/te>>0)-ve&255;return g+k},s.prototype.writeIntBE=function(h,g,k,q){if(h=+h,g=g>>>0,!q){const Se=Math.pow(2,8*k-1);ne(this,h,g,k,Se-1,-Se)}let X=k-1,te=1,ve=0;for(this[g+X]=h&255;--X>=0&&(te*=256);)h<0&&ve===0&&this[g+X+1]!==0&&(ve=1),this[g+X]=(h/te>>0)-ve&255;return g+k},s.prototype.writeInt8=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,1,127,-128),h<0&&(h=255+h+1),this[g]=h&255,g+1},s.prototype.writeInt16LE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,2,32767,-32768),this[g]=h&255,this[g+1]=h>>>8,g+2},s.prototype.writeInt16BE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,2,32767,-32768),this[g]=h>>>8,this[g+1]=h&255,g+2},s.prototype.writeInt32LE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,4,2147483647,-2147483648),this[g]=h&255,this[g+1]=h>>>8,this[g+2]=h>>>16,this[g+3]=h>>>24,g+4},s.prototype.writeInt32BE=function(h,g,k){return h=+h,g=g>>>0,k||ne(this,h,g,4,2147483647,-2147483648),h<0&&(h=4294967295+h+1),this[g]=h>>>24,this[g+1]=h>>>16,this[g+2]=h>>>8,this[g+3]=h&255,g+4},s.prototype.writeBigInt64LE=se(function(h,g=0){return ee(this,h,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),s.prototype.writeBigInt64BE=se(function(h,g=0){return me(this,h,g,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function be(v,h,g,k,q,X){if(g+k>v.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("Index out of range")}function _e(v,h,g,k,q){return h=+h,g=g>>>0,q||be(v,h,g,4),i.write(v,h,g,k,23,4),g+4}s.prototype.writeFloatLE=function(h,g,k){return _e(this,h,g,!0,k)},s.prototype.writeFloatBE=function(h,g,k){return _e(this,h,g,!1,k)};function ye(v,h,g,k,q){return h=+h,g=g>>>0,q||be(v,h,g,8),i.write(v,h,g,k,52,8),g+8}s.prototype.writeDoubleLE=function(h,g,k){return ye(this,h,g,!0,k)},s.prototype.writeDoubleBE=function(h,g,k){return ye(this,h,g,!1,k)},s.prototype.copy=function(h,g,k,q){if(!s.isBuffer(h))throw new TypeError("argument should be a Buffer");if(k||(k=0),!q&&q!==0&&(q=this.length),g>=h.length&&(g=h.length),g||(g=0),q>0&&q<k&&(q=k),q===k||h.length===0||this.length===0)return 0;if(g<0)throw new RangeError("targetStart out of bounds");if(k<0||k>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),h.length-g<q-k&&(q=h.length-g+k);const X=q-k;return this===h&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(g,k,q):Uint8Array.prototype.set.call(h,this.subarray(k,q),g),X},s.prototype.fill=function(h,g,k,q){if(typeof h=="string"){if(typeof g=="string"?(q=g,g=0,k=this.length):typeof k=="string"&&(q=k,k=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!s.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(h.length===1){const te=h.charCodeAt(0);(q==="utf8"&&te<128||q==="latin1")&&(h=te)}}else typeof h=="number"?h=h&255:typeof h=="boolean"&&(h=Number(h));if(g<0||this.length<g||this.length<k)throw new RangeError("Out of range index");if(k<=g)return this;g=g>>>0,k=k===void 0?this.length:k>>>0,h||(h=0);let X;if(typeof h=="number")for(X=g;X<k;++X)this[X]=h;else{const te=s.isBuffer(h)?h:s.from(h,q),ve=te.length;if(ve===0)throw new TypeError('The value "'+h+'" is invalid for argument "value"');for(X=0;X<k-g;++X)this[X+g]=te[X%ve]}return this};const Q={};function re(v,h,g){Q[v]=class extends g{constructor(){super(),Object.defineProperty(this,"message",{value:h.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${v}]`,this.stack,delete this.name}get code(){return v}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${v}]: ${this.message}`}}}re("ERR_BUFFER_OUT_OF_BOUNDS",function(v){return v?`${v} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),re("ERR_INVALID_ARG_TYPE",function(v,h){return`The "${v}" argument must be of type number. Received type ${typeof h}`},TypeError),re("ERR_OUT_OF_RANGE",function(v,h,g){let k=`The value of "${v}" is out of range.`,q=g;return Number.isInteger(g)&&Math.abs(g)>2**32?q=ue(String(g)):typeof g=="bigint"&&(q=String(g),(g>BigInt(2)**BigInt(32)||g<-(BigInt(2)**BigInt(32)))&&(q=ue(q)),q+="n"),k+=` It must be ${h}. Received ${q}`,k},RangeError);function ue(v){let h="",g=v.length;const k=v[0]==="-"?1:0;for(;g>=k+4;g-=3)h=`_${v.slice(g-3,g)}${h}`;return`${v.slice(0,g)}${h}`}function Te(v,h,g){S(h,"offset"),(v[h]===void 0||v[h+g]===void 0)&&I(h,v.length-(g+1))}function P(v,h,g,k,q,X){if(v>g||v<h){const te=typeof h=="bigint"?"n":"";let ve;throw h===0||h===BigInt(0)?ve=`>= 0${te} and < 2${te} ** ${(X+1)*8}${te}`:ve=`>= -(2${te} ** ${(X+1)*8-1}${te}) and < 2 ** ${(X+1)*8-1}${te}`,new Q.ERR_OUT_OF_RANGE("value",ve,v)}Te(k,q,X)}function S(v,h){if(typeof v!="number")throw new Q.ERR_INVALID_ARG_TYPE(h,"number",v)}function I(v,h,g){throw Math.floor(v)!==v?(S(v,g),new Q.ERR_OUT_OF_RANGE("offset","an integer",v)):h<0?new Q.ERR_BUFFER_OUT_OF_BOUNDS:new Q.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${h}`,v)}const O=/[^+/0-9A-Za-z-_]/g;function V(v){if(v=v.split("=")[0],v=v.trim().replace(O,""),v.length<2)return"";for(;v.length%4!==0;)v=v+"=";return v}function H(v,h){h=h||1/0;let g;const k=v.length;let q=null;const X=[];for(let te=0;te<k;++te){if(g=v.charCodeAt(te),g>55295&&g<57344){if(!q){if(g>56319){(h-=3)>-1&&X.push(239,191,189);continue}else if(te+1===k){(h-=3)>-1&&X.push(239,191,189);continue}q=g;continue}if(g<56320){(h-=3)>-1&&X.push(239,191,189),q=g;continue}g=(q-55296<<10|g-56320)+65536}else q&&(h-=3)>-1&&X.push(239,191,189);if(q=null,g<128){if((h-=1)<0)break;X.push(g)}else if(g<2048){if((h-=2)<0)break;X.push(g>>6|192,g&63|128)}else if(g<65536){if((h-=3)<0)break;X.push(g>>12|224,g>>6&63|128,g&63|128)}else if(g<1114112){if((h-=4)<0)break;X.push(g>>18|240,g>>12&63|128,g>>6&63|128,g&63|128)}else throw new Error("Invalid code point")}return X}function $(v){const h=[];for(let g=0;g<v.length;++g)h.push(v.charCodeAt(g)&255);return h}function M(v,h){let g,k,q;const X=[];for(let te=0;te<v.length&&!((h-=2)<0);++te)g=v.charCodeAt(te),k=g>>8,q=g%256,X.push(q),X.push(k);return X}function U(v){return t.toByteArray(V(v))}function j(v,h,g,k){let q;for(q=0;q<k&&!(q+g>=h.length||q>=v.length);++q)h[q+g]=v[q];return q}function W(v,h){return v instanceof h||v!=null&&v.constructor!=null&&v.constructor.name!=null&&v.constructor.name===h.name}function ie(v){return v!==v}const pe=(function(){const v="0123456789abcdef",h=new Array(256);for(let g=0;g<16;++g){const k=g*16;for(let q=0;q<16;++q)h[k+q]=v[g]+v[q]}return h})();function se(v){return typeof BigInt>"u"?we:v}function we(){throw new Error("BigInt not supported")}})(buffer)),buffer}var primordials,hasRequiredPrimordials;function requirePrimordials(){if(hasRequiredPrimordials)return primordials;hasRequiredPrimordials=1;class e extends Error{constructor(i){if(!Array.isArray(i))throw new TypeError(`Expected input to be an Array, got ${typeof i}`);let r="";for(let n=0;n<i.length;n++)r+=`    ${i[n].stack}
`;super(r),this.name="AggregateError",this.errors=i}}return primordials={AggregateError:e,ArrayIsArray(t){return Array.isArray(t)},ArrayPrototypeIncludes(t,i){return t.includes(i)},ArrayPrototypeIndexOf(t,i){return t.indexOf(i)},ArrayPrototypeJoin(t,i){return t.join(i)},ArrayPrototypeMap(t,i){return t.map(i)},ArrayPrototypePop(t,i){return t.pop(i)},ArrayPrototypePush(t,i){return t.push(i)},ArrayPrototypeSlice(t,i,r){return t.slice(i,r)},Error,FunctionPrototypeCall(t,i,...r){return t.call(i,...r)},FunctionPrototypeSymbolHasInstance(t,i){return Function.prototype[Symbol.hasInstance].call(t,i)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(t,i){return Object.defineProperties(t,i)},ObjectDefineProperty(t,i,r){return Object.defineProperty(t,i,r)},ObjectGetOwnPropertyDescriptor(t,i){return Object.getOwnPropertyDescriptor(t,i)},ObjectKeys(t){return Object.keys(t)},ObjectSetPrototypeOf(t,i){return Object.setPrototypeOf(t,i)},Promise,PromisePrototypeCatch(t,i){return t.catch(i)},PromisePrototypeThen(t,i,r){return t.then(i,r)},PromiseReject(t){return Promise.reject(t)},PromiseResolve(t){return Promise.resolve(t)},ReflectApply:Reflect.apply,RegExpPrototypeTest(t,i){return t.test(i)},SafeSet:Set,String,StringPrototypeSlice(t,i,r){return t.slice(i,r)},StringPrototypeToLowerCase(t){return t.toLowerCase()},StringPrototypeToUpperCase(t){return t.toUpperCase()},StringPrototypeTrim(t){return t.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(t,i,r){return t.set(i,r)},Boolean,Uint8Array},primordials}var util={exports:{}},inspect,hasRequiredInspect;function requireInspect(){return hasRequiredInspect||(hasRequiredInspect=1,inspect={format(e,...t){return e.replace(/%([sdifj])/g,function(...[i,r]){const n=t.shift();return r==="f"?n.toFixed(6):r==="j"?JSON.stringify(n):r==="s"&&typeof n=="object"?`${n.constructor!==Object?n.constructor.name:""} {}`.trim():n.toString()})},inspect(e){switch(typeof e){case"string":if(e.includes("'"))if(e.includes('"')){if(!e.includes("`")&&!e.includes("${"))return`\`${e}\``}else return`"${e}"`;return`'${e}'`;case"number":return isNaN(e)?"NaN":Object.is(e,-0)?String(e):e;case"bigint":return`${String(e)}n`;case"boolean":case"undefined":return String(e);case"object":return"{}"}}}),inspect}var errors,hasRequiredErrors;function requireErrors(){if(hasRequiredErrors)return errors;hasRequiredErrors=1;const{format:e,inspect:t}=requireInspect(),{AggregateError:i}=requirePrimordials(),r=globalThis.AggregateError||i,n=Symbol("kIsNodeError"),a=["string","function","number","object","Function","Object","boolean","bigint","symbol"],o=/^([A-Z][a-z0-9]*)+$/,s="__node_internal_",l={};function c(w,T){if(!w)throw new l.ERR_INTERNAL_ASSERTION(T)}function d(w){let T="",E=w.length;const R=w[0]==="-"?1:0;for(;E>=R+4;E-=3)T=`_${w.slice(E-3,E)}${T}`;return`${w.slice(0,E)}${T}`}function m(w,T,E){if(typeof T=="function")return c(T.length<=E.length,`Code: ${w}; The provided arguments length (${E.length}) does not match the required ones (${T.length}).`),T(...E);const R=(T.match(/%[dfijoOs]/g)||[]).length;return c(R===E.length,`Code: ${w}; The provided arguments length (${E.length}) does not match the required ones (${R}).`),E.length===0?T:e(T,...E)}function f(w,T,E){E||(E=Error);class R extends E{constructor(...B){super(m(w,T,B))}toString(){return`${this.name} [${w}]: ${this.message}`}}Object.defineProperties(R.prototype,{name:{value:E.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${w}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),R.prototype.code=w,R.prototype[n]=!0,l[w]=R}function u(w){const T=s+w.name;return Object.defineProperty(w,"name",{value:T}),w}function b(w,T){if(w&&T&&w!==T){if(Array.isArray(T.errors))return T.errors.push(w),T;const E=new r([T,w],T.message);return E.code=T.code,E}return w||T}class y extends Error{constructor(T="The operation was aborted",E=void 0){if(E!==void 0&&typeof E!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",E);super(T,E),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(w,T,E)=>{c(typeof w=="string","'name' must be a string"),Array.isArray(T)||(T=[T]);let R="The ";w.endsWith(" argument")?R+=`${w} `:R+=`"${w}" ${w.includes(".")?"property":"argument"} `,R+="must be ";const C=[],B=[],D=[];for(const x of T)c(typeof x=="string","All expected entries have to be of type string"),a.includes(x)?C.push(x.toLowerCase()):o.test(x)?B.push(x):(c(x!=="object",'The value "object" should be written as "Object"'),D.push(x));if(B.length>0){const x=C.indexOf("object");x!==-1&&(C.splice(C,x,1),B.push("Object"))}if(C.length>0){switch(C.length){case 1:R+=`of type ${C[0]}`;break;case 2:R+=`one of type ${C[0]} or ${C[1]}`;break;default:{const x=C.pop();R+=`one of type ${C.join(", ")}, or ${x}`}}(B.length>0||D.length>0)&&(R+=" or ")}if(B.length>0){switch(B.length){case 1:R+=`an instance of ${B[0]}`;break;case 2:R+=`an instance of ${B[0]} or ${B[1]}`;break;default:{const x=B.pop();R+=`an instance of ${B.join(", ")}, or ${x}`}}D.length>0&&(R+=" or ")}switch(D.length){case 0:break;case 1:D[0].toLowerCase()!==D[0]&&(R+="an "),R+=`${D[0]}`;break;case 2:R+=`one of ${D[0]} or ${D[1]}`;break;default:{const x=D.pop();R+=`one of ${D.join(", ")}, or ${x}`}}if(E==null)R+=`. Received ${E}`;else if(typeof E=="function"&&E.name)R+=`. Received function ${E.name}`;else if(typeof E=="object"){var _;if((_=E.constructor)!==null&&_!==void 0&&_.name)R+=`. Received an instance of ${E.constructor.name}`;else{const x=t(E,{depth:-1});R+=`. Received ${x}`}}else{let x=t(E,{colors:!1});x.length>25&&(x=`${x.slice(0,25)}...`),R+=`. Received type ${typeof E} (${x})`}return R},TypeError),f("ERR_INVALID_ARG_VALUE",(w,T,E="is invalid")=>{let R=t(T);return R.length>128&&(R=R.slice(0,128)+"..."),`The ${w.includes(".")?"property":"argument"} '${w}' ${E}. Received ${R}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(w,T,E)=>{var R;const C=E!=null&&(R=E.constructor)!==null&&R!==void 0&&R.name?`instance of ${E.constructor.name}`:`type ${typeof E}`;return`Expected ${w} to be returned from the "${T}" function but got ${C}.`},TypeError),f("ERR_MISSING_ARGS",(...w)=>{c(w.length>0,"At least one arg needs to be specified");let T;const E=w.length;switch(w=(Array.isArray(w)?w:[w]).map(R=>`"${R}"`).join(" or "),E){case 1:T+=`The ${w[0]} argument`;break;case 2:T+=`The ${w[0]} and ${w[1]} arguments`;break;default:{const R=w.pop();T+=`The ${w.join(", ")}, and ${R} arguments`}break}return`${T} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(w,T,E)=>{c(T,'Missing "range" argument');let R;if(Number.isInteger(E)&&Math.abs(E)>2**32)R=d(String(E));else if(typeof E=="bigint"){R=String(E);const C=BigInt(2)**BigInt(32);(E>C||E<-C)&&(R=d(R)),R+="n"}else R=t(E);return`The value of "${w}" is out of range. It must be ${T}. Received ${R}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),errors={AbortError:y,aggregateTwoErrors:u(b),hideStackFrames:u,codes:l},errors}var browser$1={exports:{}},hasRequiredBrowser$2;function requireBrowser$2(){if(hasRequiredBrowser$2)return browser$1.exports;hasRequiredBrowser$2=1;const{AbortController:e,AbortSignal:t}=typeof self<"u"?self:typeof window<"u"?window:void 0;return browser$1.exports=e,browser$1.exports.AbortSignal=t,browser$1.exports.default=e,browser$1.exports}var events={exports:{}},hasRequiredEvents;function requireEvents(){if(hasRequiredEvents)return events.exports;hasRequiredEvents=1;var e=typeof Reflect=="object"?Reflect:null,t=e&&typeof e.apply=="function"?e.apply:function(B,D,_){return Function.prototype.apply.call(B,D,_)},i;e&&typeof e.ownKeys=="function"?i=e.ownKeys:Object.getOwnPropertySymbols?i=function(B){return Object.getOwnPropertyNames(B).concat(Object.getOwnPropertySymbols(B))}:i=function(B){return Object.getOwnPropertyNames(B)};function r(C){console&&console.warn&&console.warn(C)}var n=Number.isNaN||function(B){return B!==B};function a(){a.init.call(this)}events.exports=a,events.exports.once=T,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var o=10;function s(C){if(typeof C!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof C)}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(C){if(typeof C!="number"||C<0||n(C))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+C+".");o=C}}),a.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(B){if(typeof B!="number"||B<0||n(B))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+B+".");return this._maxListeners=B,this};function l(C){return C._maxListeners===void 0?a.defaultMaxListeners:C._maxListeners}a.prototype.getMaxListeners=function(){return l(this)},a.prototype.emit=function(B){for(var D=[],_=1;_<arguments.length;_++)D.push(arguments[_]);var x=B==="error",Z=this._events;if(Z!==void 0)x=x&&Z.error===void 0;else if(!x)return!1;if(x){var L;if(D.length>0&&(L=D[0]),L instanceof Error)throw L;var z=new Error("Unhandled error."+(L?" ("+L.message+")":""));throw z.context=L,z}var K=Z[B];if(K===void 0)return!1;if(typeof K=="function")t(K,this,D);else for(var G=K.length,ae=b(K,G),_=0;_<G;++_)t(ae[_],this,D);return!0};function c(C,B,D,_){var x,Z,L;if(s(D),Z=C._events,Z===void 0?(Z=C._events=Object.create(null),C._eventsCount=0):(Z.newListener!==void 0&&(C.emit("newListener",B,D.listener?D.listener:D),Z=C._events),L=Z[B]),L===void 0)L=Z[B]=D,++C._eventsCount;else if(typeof L=="function"?L=Z[B]=_?[D,L]:[L,D]:_?L.unshift(D):L.push(D),x=l(C),x>0&&L.length>x&&!L.warned){L.warned=!0;var z=new Error("Possible EventEmitter memory leak detected. "+L.length+" "+String(B)+" listeners added. Use emitter.setMaxListeners() to increase limit");z.name="MaxListenersExceededWarning",z.emitter=C,z.type=B,z.count=L.length,r(z)}return C}a.prototype.addListener=function(B,D){return c(this,B,D,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(B,D){return c(this,B,D,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(C,B,D){var _={fired:!1,wrapFn:void 0,target:C,type:B,listener:D},x=d.bind(_);return x.listener=D,_.wrapFn=x,x}a.prototype.once=function(B,D){return s(D),this.on(B,m(this,B,D)),this},a.prototype.prependOnceListener=function(B,D){return s(D),this.prependListener(B,m(this,B,D)),this},a.prototype.removeListener=function(B,D){var _,x,Z,L,z;if(s(D),x=this._events,x===void 0)return this;if(_=x[B],_===void 0)return this;if(_===D||_.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete x[B],x.removeListener&&this.emit("removeListener",B,_.listener||D));else if(typeof _!="function"){for(Z=-1,L=_.length-1;L>=0;L--)if(_[L]===D||_[L].listener===D){z=_[L].listener,Z=L;break}if(Z<0)return this;Z===0?_.shift():y(_,Z),_.length===1&&(x[B]=_[0]),x.removeListener!==void 0&&this.emit("removeListener",B,z||D)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(B){var D,_,x;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[B]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete _[B]),this;if(arguments.length===0){var Z=Object.keys(_),L;for(x=0;x<Z.length;++x)L=Z[x],L!=="removeListener"&&this.removeAllListeners(L);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=_[B],typeof D=="function")this.removeListener(B,D);else if(D!==void 0)for(x=D.length-1;x>=0;x--)this.removeListener(B,D[x]);return this};function f(C,B,D){var _=C._events;if(_===void 0)return[];var x=_[B];return x===void 0?[]:typeof x=="function"?D?[x.listener||x]:[x]:D?w(x):b(x,x.length)}a.prototype.listeners=function(B){return f(this,B,!0)},a.prototype.rawListeners=function(B){return f(this,B,!1)},a.listenerCount=function(C,B){return typeof C.listenerCount=="function"?C.listenerCount(B):u.call(C,B)},a.prototype.listenerCount=u;function u(C){var B=this._events;if(B!==void 0){var D=B[C];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}a.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]};function b(C,B){for(var D=new Array(B),_=0;_<B;++_)D[_]=C[_];return D}function y(C,B){for(;B+1<C.length;B++)C[B]=C[B+1];C.pop()}function w(C){for(var B=new Array(C.length),D=0;D<B.length;++D)B[D]=C[D].listener||C[D];return B}function T(C,B){return new Promise(function(D,_){function x(L){C.removeListener(B,Z),_(L)}function Z(){typeof C.removeListener=="function"&&C.removeListener("error",x),D([].slice.call(arguments))}R(C,B,Z,{once:!0}),B!=="error"&&E(C,x,{once:!0})})}function E(C,B,D){typeof C.on=="function"&&R(C,"error",B,D)}function R(C,B,D,_){if(typeof C.on=="function")_.once?C.once(B,D):C.on(B,D);else if(typeof C.addEventListener=="function")C.addEventListener(B,function x(Z){_.once&&C.removeEventListener(B,x),D(Z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof C)}return events.exports}var hasRequiredUtil;function requireUtil(){return hasRequiredUtil||(hasRequiredUtil=1,(function(e){const t=requireBuffer(),{format:i,inspect:r}=requireInspect(),{codes:{ERR_INVALID_ARG_TYPE:n}}=requireErrors(),{kResistStopPropagation:a,AggregateError:o,SymbolDispose:s}=requirePrimordials(),l=globalThis.AbortSignal||requireBrowser$2().AbortSignal,c=globalThis.AbortController||requireBrowser$2().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,m=globalThis.Blob||t.Blob,f=typeof m<"u"?function(w){return w instanceof m}:function(w){return!1},u=(y,w)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new n(w,"AbortSignal",y)},b=(y,w)=>{if(typeof y!="function")throw new n(w,"Function",y)};e.exports={AggregateError:o,kEmptyObject:Object.freeze({}),once(y){let w=!1;return function(...T){w||(w=!0,y.apply(this,T))}},createDeferredPromise:function(){let y,w;return{promise:new Promise((E,R)=>{y=E,w=R}),resolve:y,reject:w}},promisify(y){return new Promise((w,T)=>{y((E,...R)=>E?T(E):w(...R))})},debuglog(){return function(){}},format:i,inspect:r,types:{isAsyncFunction(y){return y instanceof d},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:f,deprecate(y,w){return y},addAbortListener:requireEvents().addAbortListener||function(w,T){if(w===void 0)throw new n("signal","AbortSignal",w);u(w,"signal"),b(T,"listener");let E;return w.aborted?queueMicrotask(()=>T()):(w.addEventListener("abort",T,{__proto__:null,once:!0,[a]:!0}),E=()=>{w.removeEventListener("abort",T)}),{__proto__:null,[s](){var R;(R=E)===null||R===void 0||R()}}},AbortSignalAny:l.any||function(w){if(w.length===1)return w[0];const T=new c,E=()=>T.abort();return w.forEach(R=>{u(R,"signals"),R.addEventListener("abort",E,{once:!0})}),T.signal.addEventListener("abort",()=>{w.forEach(R=>R.removeEventListener("abort",E))},{once:!0}),T.signal}},e.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(util)),util.exports}var operators={},validators,hasRequiredValidators;function requireValidators(){if(hasRequiredValidators)return validators;hasRequiredValidators=1;const{ArrayIsArray:e,ArrayPrototypeIncludes:t,ArrayPrototypeJoin:i,ArrayPrototypeMap:r,NumberIsInteger:n,NumberIsNaN:a,NumberMAX_SAFE_INTEGER:o,NumberMIN_SAFE_INTEGER:s,NumberParseInt:l,ObjectPrototypeHasOwnProperty:c,RegExpPrototypeExec:d,String:m,StringPrototypeToUpperCase:f,StringPrototypeTrim:u}=requirePrimordials(),{hideStackFrames:b,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:w,ERR_INVALID_ARG_VALUE:T,ERR_OUT_OF_RANGE:E,ERR_UNKNOWN_SIGNAL:R}}=requireErrors(),{normalizeEncoding:C}=requireUtil(),{isAsyncFunction:B,isArrayBufferView:D}=requireUtil().types,_={};function x(M){return M===(M|0)}function Z(M){return M===M>>>0}const L=/^[0-7]+$/,z="must be a 32-bit unsigned integer or an octal string";function K(M,U,j){if(typeof M>"u"&&(M=j),typeof M=="string"){if(d(L,M)===null)throw new T(U,M,z);M=l(M,8)}return de(M,U),M}const G=b((M,U,j=s,W=o)=>{if(typeof M!="number")throw new w(U,"number",M);if(!n(M))throw new E(U,"an integer",M);if(M<j||M>W)throw new E(U,`>= ${j} && <= ${W}`,M)}),ae=b((M,U,j=-2147483648,W=2147483647)=>{if(typeof M!="number")throw new w(U,"number",M);if(!n(M))throw new E(U,"an integer",M);if(M<j||M>W)throw new E(U,`>= ${j} && <= ${W}`,M)}),de=b((M,U,j=!1)=>{if(typeof M!="number")throw new w(U,"number",M);if(!n(M))throw new E(U,"an integer",M);const W=j?1:0,ie=4294967295;if(M<W||M>ie)throw new E(U,`>= ${W} && <= ${ie}`,M)});function ce(M,U){if(typeof M!="string")throw new w(U,"string",M)}function he(M,U,j=void 0,W){if(typeof M!="number")throw new w(U,"number",M);if(j!=null&&M<j||W!=null&&M>W||(j!=null||W!=null)&&a(M))throw new E(U,`${j!=null?`>= ${j}`:""}${j!=null&&W!=null?" && ":""}${W!=null?`<= ${W}`:""}`,M)}const Y=b((M,U,j)=>{if(!t(j,M)){const ie="must be one of: "+i(r(j,pe=>typeof pe=="string"?`'${pe}'`:m(pe)),", ");throw new T(U,M,ie)}});function fe(M,U){if(typeof M!="boolean")throw new w(U,"boolean",M)}function N(M,U,j){return M==null||!c(M,U)?j:M[U]}const J=b((M,U,j=null)=>{const W=N(j,"allowArray",!1),ie=N(j,"allowFunction",!1);if(!N(j,"nullable",!1)&&M===null||!W&&e(M)||typeof M!="object"&&(!ie||typeof M!="function"))throw new w(U,"Object",M)}),ne=b((M,U)=>{if(M!=null&&typeof M!="object"&&typeof M!="function")throw new w(U,"a dictionary",M)}),ee=b((M,U,j=0)=>{if(!e(M))throw new w(U,"Array",M);if(M.length<j){const W=`must be longer than ${j}`;throw new T(U,M,W)}});function me(M,U){ee(M,U);for(let j=0;j<M.length;j++)ce(M[j],`${U}[${j}]`)}function be(M,U){ee(M,U);for(let j=0;j<M.length;j++)fe(M[j],`${U}[${j}]`)}function _e(M,U){ee(M,U);for(let j=0;j<M.length;j++){const W=M[j],ie=`${U}[${j}]`;if(W==null)throw new w(ie,"AbortSignal",W);Te(W,ie)}}function ye(M,U="signal"){if(ce(M,U),_[M]===void 0)throw _[f(M)]!==void 0?new R(M+" (signals must use all capital letters)"):new R(M)}const Q=b((M,U="buffer")=>{if(!D(M))throw new w(U,["Buffer","TypedArray","DataView"],M)});function re(M,U){const j=C(U),W=M.length;if(j==="hex"&&W%2!==0)throw new T("encoding",U,`is invalid for data of length ${W}`)}function ue(M,U="Port",j=!0){if(typeof M!="number"&&typeof M!="string"||typeof M=="string"&&u(M).length===0||+M!==+M>>>0||M>65535||M===0&&!j)throw new y(U,M,j);return M|0}const Te=b((M,U)=>{if(M!==void 0&&(M===null||typeof M!="object"||!("aborted"in M)))throw new w(U,"AbortSignal",M)}),P=b((M,U)=>{if(typeof M!="function")throw new w(U,"Function",M)}),S=b((M,U)=>{if(typeof M!="function"||B(M))throw new w(U,"Function",M)}),I=b((M,U)=>{if(M!==void 0)throw new w(U,"undefined",M)});function O(M,U,j){if(!t(j,M))throw new w(U,`('${i(j,"|")}')`,M)}const V=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function H(M,U){if(typeof M>"u"||!d(V,M))throw new T(U,M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function $(M){if(typeof M=="string")return H(M,"hints"),M;if(e(M)){const U=M.length;let j="";if(U===0)return j;for(let W=0;W<U;W++){const ie=M[W];H(ie,"hints"),j+=ie,W!==U-1&&(j+=", ")}return j}throw new T("hints",M,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return validators={isInt32:x,isUint32:Z,parseFileMode:K,validateArray:ee,validateStringArray:me,validateBooleanArray:be,validateAbortSignalArray:_e,validateBoolean:fe,validateBuffer:Q,validateDictionary:ne,validateEncoding:re,validateFunction:P,validateInt32:ae,validateInteger:G,validateNumber:he,validateObject:J,validateOneOf:Y,validatePlainFunction:S,validatePort:ue,validateSignalName:ye,validateString:ce,validateUint32:de,validateUndefined:I,validateUnion:O,validateAbortSignal:Te,validateLinkHeaderValue:$},validators}var endOfStream={exports:{}},browser={exports:{}},hasRequiredBrowser$1;function requireBrowser$1(){if(hasRequiredBrowser$1)return browser.exports;hasRequiredBrowser$1=1;var e=browser.exports={},t,i;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?t=setTimeout:t=r}catch{t=r}try{typeof clearTimeout=="function"?i=clearTimeout:i=n}catch{i=n}})();function a(y){if(t===setTimeout)return setTimeout(y,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch{try{return t.call(null,y,0)}catch{return t.call(this,y,0)}}}function o(y){if(i===clearTimeout)return clearTimeout(y);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(y);try{return i(y)}catch{try{return i.call(null,y)}catch{return i.call(this,y)}}}var s=[],l=!1,c,d=-1;function m(){!l||!c||(l=!1,c.length?s=c.concat(s):d=-1,s.length&&f())}function f(){if(!l){var y=a(m);l=!0;for(var w=s.length;w;){for(c=s,s=[];++d<w;)c&&c[d].run();d=-1,w=s.length}c=null,l=!1,o(y)}}e.nextTick=function(y){var w=new Array(arguments.length-1);if(arguments.length>1)for(var T=1;T<arguments.length;T++)w[T-1]=arguments[T];s.push(new u(y,w)),s.length===1&&!l&&a(f)};function u(y,w){this.fun=y,this.array=w}u.prototype.run=function(){this.fun.apply(null,this.array)},e.title="browser",e.browser=!0,e.env={},e.argv=[],e.version="",e.versions={};function b(){}return e.on=b,e.addListener=b,e.once=b,e.off=b,e.removeListener=b,e.removeAllListeners=b,e.emit=b,e.prependListener=b,e.prependOnceListener=b,e.listeners=function(y){return[]},e.binding=function(y){throw new Error("process.binding is not supported")},e.cwd=function(){return"/"},e.chdir=function(y){throw new Error("process.chdir is not supported")},e.umask=function(){return 0},browser.exports}var utils,hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1;const{SymbolAsyncIterator:e,SymbolIterator:t,SymbolFor:i}=requirePrimordials(),r=i("nodejs.stream.destroyed"),n=i("nodejs.stream.errored"),a=i("nodejs.stream.readable"),o=i("nodejs.stream.writable"),s=i("nodejs.stream.disturbed"),l=i("nodejs.webstream.isClosedPromise"),c=i("nodejs.webstream.controllerErrorFunction");function d(N,J=!1){var ne;return!!(N&&typeof N.pipe=="function"&&typeof N.on=="function"&&(!J||typeof N.pause=="function"&&typeof N.resume=="function")&&(!N._writableState||((ne=N._readableState)===null||ne===void 0?void 0:ne.readable)!==!1)&&(!N._writableState||N._readableState))}function m(N){var J;return!!(N&&typeof N.write=="function"&&typeof N.on=="function"&&(!N._readableState||((J=N._writableState)===null||J===void 0?void 0:J.writable)!==!1))}function f(N){return!!(N&&typeof N.pipe=="function"&&N._readableState&&typeof N.on=="function"&&typeof N.write=="function")}function u(N){return N&&(N._readableState||N._writableState||typeof N.write=="function"&&typeof N.on=="function"||typeof N.pipe=="function"&&typeof N.on=="function")}function b(N){return!!(N&&!u(N)&&typeof N.pipeThrough=="function"&&typeof N.getReader=="function"&&typeof N.cancel=="function")}function y(N){return!!(N&&!u(N)&&typeof N.getWriter=="function"&&typeof N.abort=="function")}function w(N){return!!(N&&!u(N)&&typeof N.readable=="object"&&typeof N.writable=="object")}function T(N){return b(N)||y(N)||w(N)}function E(N,J){return N==null?!1:J===!0?typeof N[e]=="function":J===!1?typeof N[t]=="function":typeof N[e]=="function"||typeof N[t]=="function"}function R(N){if(!u(N))return null;const J=N._writableState,ne=N._readableState,ee=J||ne;return!!(N.destroyed||N[r]||ee!=null&&ee.destroyed)}function C(N){if(!m(N))return null;if(N.writableEnded===!0)return!0;const J=N._writableState;return J!=null&&J.errored?!1:typeof J?.ended!="boolean"?null:J.ended}function B(N,J){if(!m(N))return null;if(N.writableFinished===!0)return!0;const ne=N._writableState;return ne!=null&&ne.errored?!1:typeof ne?.finished!="boolean"?null:!!(ne.finished||J===!1&&ne.ended===!0&&ne.length===0)}function D(N){if(!d(N))return null;if(N.readableEnded===!0)return!0;const J=N._readableState;return!J||J.errored?!1:typeof J?.ended!="boolean"?null:J.ended}function _(N,J){if(!d(N))return null;const ne=N._readableState;return ne!=null&&ne.errored?!1:typeof ne?.endEmitted!="boolean"?null:!!(ne.endEmitted||J===!1&&ne.ended===!0&&ne.length===0)}function x(N){return N&&N[a]!=null?N[a]:typeof N?.readable!="boolean"?null:R(N)?!1:d(N)&&N.readable&&!_(N)}function Z(N){return N&&N[o]!=null?N[o]:typeof N?.writable!="boolean"?null:R(N)?!1:m(N)&&N.writable&&!C(N)}function L(N,J){return u(N)?R(N)?!0:!(J?.readable!==!1&&x(N)||J?.writable!==!1&&Z(N)):null}function z(N){var J,ne;return u(N)?N.writableErrored?N.writableErrored:(J=(ne=N._writableState)===null||ne===void 0?void 0:ne.errored)!==null&&J!==void 0?J:null:null}function K(N){var J,ne;return u(N)?N.readableErrored?N.readableErrored:(J=(ne=N._readableState)===null||ne===void 0?void 0:ne.errored)!==null&&J!==void 0?J:null:null}function G(N){if(!u(N))return null;if(typeof N.closed=="boolean")return N.closed;const J=N._writableState,ne=N._readableState;return typeof J?.closed=="boolean"||typeof ne?.closed=="boolean"?J?.closed||ne?.closed:typeof N._closed=="boolean"&&ae(N)?N._closed:null}function ae(N){return typeof N._closed=="boolean"&&typeof N._defaultKeepAlive=="boolean"&&typeof N._removedConnection=="boolean"&&typeof N._removedContLen=="boolean"}function de(N){return typeof N._sent100=="boolean"&&ae(N)}function ce(N){var J;return typeof N._consuming=="boolean"&&typeof N._dumped=="boolean"&&((J=N.req)===null||J===void 0?void 0:J.upgradeOrConnect)===void 0}function he(N){if(!u(N))return null;const J=N._writableState,ne=N._readableState,ee=J||ne;return!ee&&de(N)||!!(ee&&ee.autoDestroy&&ee.emitClose&&ee.closed===!1)}function Y(N){var J;return!!(N&&((J=N[s])!==null&&J!==void 0?J:N.readableDidRead||N.readableAborted))}function fe(N){var J,ne,ee,me,be,_e,ye,Q,re,ue;return!!(N&&((J=(ne=(ee=(me=(be=(_e=N[n])!==null&&_e!==void 0?_e:N.readableErrored)!==null&&be!==void 0?be:N.writableErrored)!==null&&me!==void 0?me:(ye=N._readableState)===null||ye===void 0?void 0:ye.errorEmitted)!==null&&ee!==void 0?ee:(Q=N._writableState)===null||Q===void 0?void 0:Q.errorEmitted)!==null&&ne!==void 0?ne:(re=N._readableState)===null||re===void 0?void 0:re.errored)!==null&&J!==void 0?J:!((ue=N._writableState)===null||ue===void 0)&&ue.errored))}return utils={isDestroyed:R,kIsDestroyed:r,isDisturbed:Y,kIsDisturbed:s,isErrored:fe,kIsErrored:n,isReadable:x,kIsReadable:a,kIsClosedPromise:l,kControllerErrorFunction:c,kIsWritable:o,isClosed:G,isDuplexNodeStream:f,isFinished:L,isIterable:E,isReadableNodeStream:d,isReadableStream:b,isReadableEnded:D,isReadableFinished:_,isReadableErrored:K,isNodeStream:u,isWebStream:T,isWritable:Z,isWritableNodeStream:m,isWritableStream:y,isWritableEnded:C,isWritableFinished:B,isWritableErrored:z,isServerRequest:ce,isServerResponse:de,willEmitClose:he,isTransformStream:w},utils}var hasRequiredEndOfStream;function requireEndOfStream(){if(hasRequiredEndOfStream)return endOfStream.exports;hasRequiredEndOfStream=1;const e=requireBrowser$1(),{AbortError:t,codes:i}=requireErrors(),{ERR_INVALID_ARG_TYPE:r,ERR_STREAM_PREMATURE_CLOSE:n}=i,{kEmptyObject:a,once:o}=requireUtil(),{validateAbortSignal:s,validateFunction:l,validateObject:c,validateBoolean:d}=requireValidators(),{Promise:m,PromisePrototypeThen:f,SymbolDispose:u}=requirePrimordials(),{isClosed:b,isReadable:y,isReadableNodeStream:w,isReadableStream:T,isReadableFinished:E,isReadableErrored:R,isWritable:C,isWritableNodeStream:B,isWritableStream:D,isWritableFinished:_,isWritableErrored:x,isNodeStream:Z,willEmitClose:L,kIsClosedPromise:z}=requireUtils();let K;function G(Y){return Y.setHeader&&typeof Y.abort=="function"}const ae=()=>{};function de(Y,fe,N){var J,ne;if(arguments.length===2?(N=fe,fe=a):fe==null?fe=a:c(fe,"options"),l(N,"callback"),s(fe.signal,"options.signal"),N=o(N),T(Y)||D(Y))return ce(Y,fe,N);if(!Z(Y))throw new r("stream",["ReadableStream","WritableStream","Stream"],Y);const ee=(J=fe.readable)!==null&&J!==void 0?J:w(Y),me=(ne=fe.writable)!==null&&ne!==void 0?ne:B(Y),be=Y._writableState,_e=Y._readableState,ye=()=>{Y.writable||ue()};let Q=L(Y)&&w(Y)===ee&&B(Y)===me,re=_(Y,!1);const ue=()=>{re=!0,Y.destroyed&&(Q=!1),!(Q&&(!Y.readable||ee))&&(!ee||Te)&&N.call(Y)};let Te=E(Y,!1);const P=()=>{Te=!0,Y.destroyed&&(Q=!1),!(Q&&(!Y.writable||me))&&(!me||re)&&N.call(Y)},S=M=>{N.call(Y,M)};let I=b(Y);const O=()=>{I=!0;const M=x(Y)||R(Y);if(M&&typeof M!="boolean")return N.call(Y,M);if(ee&&!Te&&w(Y,!0)&&!E(Y,!1))return N.call(Y,new n);if(me&&!re&&!_(Y,!1))return N.call(Y,new n);N.call(Y)},V=()=>{I=!0;const M=x(Y)||R(Y);if(M&&typeof M!="boolean")return N.call(Y,M);N.call(Y)},H=()=>{Y.req.on("finish",ue)};G(Y)?(Y.on("complete",ue),Q||Y.on("abort",O),Y.req?H():Y.on("request",H)):me&&!be&&(Y.on("end",ye),Y.on("close",ye)),!Q&&typeof Y.aborted=="boolean"&&Y.on("aborted",O),Y.on("end",P),Y.on("finish",ue),fe.error!==!1&&Y.on("error",S),Y.on("close",O),I?e.nextTick(O):be!=null&&be.errorEmitted||_e!=null&&_e.errorEmitted?Q||e.nextTick(V):(!ee&&(!Q||y(Y))&&(re||C(Y)===!1)||!me&&(!Q||C(Y))&&(Te||y(Y)===!1)||_e&&Y.req&&Y.aborted)&&e.nextTick(V);const $=()=>{N=ae,Y.removeListener("aborted",O),Y.removeListener("complete",ue),Y.removeListener("abort",O),Y.removeListener("request",H),Y.req&&Y.req.removeListener("finish",ue),Y.removeListener("end",ye),Y.removeListener("close",ye),Y.removeListener("finish",ue),Y.removeListener("end",P),Y.removeListener("error",S),Y.removeListener("close",O)};if(fe.signal&&!I){const M=()=>{const U=N;$(),U.call(Y,new t(void 0,{cause:fe.signal.reason}))};if(fe.signal.aborted)e.nextTick(M);else{K=K||requireUtil().addAbortListener;const U=K(fe.signal,M),j=N;N=o((...W)=>{U[u](),j.apply(Y,W)})}}return $}function ce(Y,fe,N){let J=!1,ne=ae;if(fe.signal)if(ne=()=>{J=!0,N.call(Y,new t(void 0,{cause:fe.signal.reason}))},fe.signal.aborted)e.nextTick(ne);else{K=K||requireUtil().addAbortListener;const me=K(fe.signal,ne),be=N;N=o((..._e)=>{me[u](),be.apply(Y,_e)})}const ee=(...me)=>{J||e.nextTick(()=>N.apply(Y,me))};return f(Y[z].promise,ee,ee),ae}function he(Y,fe){var N;let J=!1;return fe===null&&(fe=a),(N=fe)!==null&&N!==void 0&&N.cleanup&&(d(fe.cleanup,"cleanup"),J=fe.cleanup),new m((ne,ee)=>{const me=de(Y,fe,be=>{J&&me(),be?ee(be):ne()})})}return endOfStream.exports=de,endOfStream.exports.finished=he,endOfStream.exports}var destroy_1,hasRequiredDestroy;function requireDestroy(){if(hasRequiredDestroy)return destroy_1;hasRequiredDestroy=1;const e=requireBrowser$1(),{aggregateTwoErrors:t,codes:{ERR_MULTIPLE_CALLBACK:i},AbortError:r}=requireErrors(),{Symbol:n}=requirePrimordials(),{kIsDestroyed:a,isDestroyed:o,isFinished:s,isServerRequest:l}=requireUtils(),c=n("kDestroy"),d=n("kConstruct");function m(L,z,K){L&&(L.stack,z&&!z.errored&&(z.errored=L),K&&!K.errored&&(K.errored=L))}function f(L,z){const K=this._readableState,G=this._writableState,ae=G||K;return G!=null&&G.destroyed||K!=null&&K.destroyed?(typeof z=="function"&&z(),this):(m(L,G,K),G&&(G.destroyed=!0),K&&(K.destroyed=!0),ae.constructed?u(this,L,z):this.once(c,function(de){u(this,t(de,L),z)}),this)}function u(L,z,K){let G=!1;function ae(de){if(G)return;G=!0;const ce=L._readableState,he=L._writableState;m(de,he,ce),he&&(he.closed=!0),ce&&(ce.closed=!0),typeof K=="function"&&K(de),de?e.nextTick(b,L,de):e.nextTick(y,L)}try{L._destroy(z||null,ae)}catch(de){ae(de)}}function b(L,z){w(L,z),y(L)}function y(L){const z=L._readableState,K=L._writableState;K&&(K.closeEmitted=!0),z&&(z.closeEmitted=!0),(K!=null&&K.emitClose||z!=null&&z.emitClose)&&L.emit("close")}function w(L,z){const K=L._readableState,G=L._writableState;G!=null&&G.errorEmitted||K!=null&&K.errorEmitted||(G&&(G.errorEmitted=!0),K&&(K.errorEmitted=!0),L.emit("error",z))}function T(){const L=this._readableState,z=this._writableState;L&&(L.constructed=!0,L.closed=!1,L.closeEmitted=!1,L.destroyed=!1,L.errored=null,L.errorEmitted=!1,L.reading=!1,L.ended=L.readable===!1,L.endEmitted=L.readable===!1),z&&(z.constructed=!0,z.destroyed=!1,z.closed=!1,z.closeEmitted=!1,z.errored=null,z.errorEmitted=!1,z.finalCalled=!1,z.prefinished=!1,z.ended=z.writable===!1,z.ending=z.writable===!1,z.finished=z.writable===!1)}function E(L,z,K){const G=L._readableState,ae=L._writableState;if(ae!=null&&ae.destroyed||G!=null&&G.destroyed)return this;G!=null&&G.autoDestroy||ae!=null&&ae.autoDestroy?L.destroy(z):z&&(z.stack,ae&&!ae.errored&&(ae.errored=z),G&&!G.errored&&(G.errored=z),K?e.nextTick(w,L,z):w(L,z))}function R(L,z){if(typeof L._construct!="function")return;const K=L._readableState,G=L._writableState;K&&(K.constructed=!1),G&&(G.constructed=!1),L.once(d,z),!(L.listenerCount(d)>1)&&e.nextTick(C,L)}function C(L){let z=!1;function K(G){if(z){E(L,G??new i);return}z=!0;const ae=L._readableState,de=L._writableState,ce=de||ae;ae&&(ae.constructed=!0),de&&(de.constructed=!0),ce.destroyed?L.emit(c,G):G?E(L,G,!0):e.nextTick(B,L)}try{L._construct(G=>{e.nextTick(K,G)})}catch(G){e.nextTick(K,G)}}function B(L){L.emit(d)}function D(L){return L?.setHeader&&typeof L.abort=="function"}function _(L){L.emit("close")}function x(L,z){L.emit("error",z),e.nextTick(_,L)}function Z(L,z){!L||o(L)||(!z&&!s(L)&&(z=new r),l(L)?(L.socket=null,L.destroy(z)):D(L)?L.abort():D(L.req)?L.req.abort():typeof L.destroy=="function"?L.destroy(z):typeof L.close=="function"?L.close():z?e.nextTick(x,L,z):e.nextTick(_,L),L.destroyed||(L[a]=!0))}return destroy_1={construct:R,destroyer:Z,destroy:f,undestroy:T,errorOrDestroy:E},destroy_1}var legacy,hasRequiredLegacy;function requireLegacy(){if(hasRequiredLegacy)return legacy;hasRequiredLegacy=1;const{ArrayIsArray:e,ObjectSetPrototypeOf:t}=requirePrimordials(),{EventEmitter:i}=requireEvents();function r(a){i.call(this,a)}t(r.prototype,i.prototype),t(r,i),r.prototype.pipe=function(a,o){const s=this;function l(y){a.writable&&a.write(y)===!1&&s.pause&&s.pause()}s.on("data",l);function c(){s.readable&&s.resume&&s.resume()}a.on("drain",c),!a._isStdio&&(!o||o.end!==!1)&&(s.on("end",m),s.on("close",f));let d=!1;function m(){d||(d=!0,a.end())}function f(){d||(d=!0,typeof a.destroy=="function"&&a.destroy())}function u(y){b(),i.listenerCount(this,"error")===0&&this.emit("error",y)}n(s,"error",u),n(a,"error",u);function b(){s.removeListener("data",l),a.removeListener("drain",c),s.removeListener("end",m),s.removeListener("close",f),s.removeListener("error",u),a.removeListener("error",u),s.removeListener("end",b),s.removeListener("close",b),a.removeListener("close",b)}return s.on("end",b),s.on("close",b),a.on("close",b),a.emit("pipe",s),a};function n(a,o,s){if(typeof a.prependListener=="function")return a.prependListener(o,s);!a._events||!a._events[o]?a.on(o,s):e(a._events[o])?a._events[o].unshift(s):a._events[o]=[s,a._events[o]]}return legacy={Stream:r,prependListener:n},legacy}var addAbortSignal={exports:{}},hasRequiredAddAbortSignal;function requireAddAbortSignal(){return hasRequiredAddAbortSignal||(hasRequiredAddAbortSignal=1,(function(e){const{SymbolDispose:t}=requirePrimordials(),{AbortError:i,codes:r}=requireErrors(),{isNodeStream:n,isWebStream:a,kControllerErrorFunction:o}=requireUtils(),s=requireEndOfStream(),{ERR_INVALID_ARG_TYPE:l}=r;let c;const d=(m,f)=>{if(typeof m!="object"||!("aborted"in m))throw new l(f,"AbortSignal",m)};e.exports.addAbortSignal=function(f,u){if(d(f,"signal"),!n(u)&&!a(u))throw new l("stream",["ReadableStream","WritableStream","Stream"],u);return e.exports.addAbortSignalNoValidate(f,u)},e.exports.addAbortSignalNoValidate=function(m,f){if(typeof m!="object"||!("aborted"in m))return f;const u=n(f)?()=>{f.destroy(new i(void 0,{cause:m.reason}))}:()=>{f[o](new i(void 0,{cause:m.reason}))};if(m.aborted)u();else{c=c||requireUtil().addAbortListener;const b=c(m,u);s(f,b[t])}return f}})(addAbortSignal)),addAbortSignal.exports}var buffer_list,hasRequiredBuffer_list;function requireBuffer_list(){if(hasRequiredBuffer_list)return buffer_list;hasRequiredBuffer_list=1;const{StringPrototypeSlice:e,SymbolIterator:t,TypedArrayPrototypeSet:i,Uint8Array:r}=requirePrimordials(),{Buffer:n}=requireBuffer(),{inspect:a}=requireUtil();return buffer_list=class{constructor(){this.head=null,this.tail=null,this.length=0}push(s){const l={data:s,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(s){const l={data:s,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const s=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,s}clear(){this.head=this.tail=null,this.length=0}join(s){if(this.length===0)return"";let l=this.head,c=""+l.data;for(;(l=l.next)!==null;)c+=s+l.data;return c}concat(s){if(this.length===0)return n.alloc(0);const l=n.allocUnsafe(s>>>0);let c=this.head,d=0;for(;c;)i(l,c.data,d),d+=c.data.length,c=c.next;return l}consume(s,l){const c=this.head.data;if(s<c.length){const d=c.slice(0,s);return this.head.data=c.slice(s),d}return s===c.length?this.shift():l?this._getString(s):this._getBuffer(s)}first(){return this.head.data}*[t](){for(let s=this.head;s;s=s.next)yield s.data}_getString(s){let l="",c=this.head,d=0;do{const m=c.data;if(s>m.length)l+=m,s-=m.length;else{s===m.length?(l+=m,++d,c.next?this.head=c.next:this.head=this.tail=null):(l+=e(m,0,s),this.head=c,c.data=e(m,s));break}++d}while((c=c.next)!==null);return this.length-=d,l}_getBuffer(s){const l=n.allocUnsafe(s),c=s;let d=this.head,m=0;do{const f=d.data;if(s>f.length)i(l,f,c-s),s-=f.length;else{s===f.length?(i(l,f,c-s),++m,d.next?this.head=d.next:this.head=this.tail=null):(i(l,new r(f.buffer,f.byteOffset,s),c-s),this.head=d,d.data=f.slice(s));break}++m}while((d=d.next)!==null);return this.length-=m,l}[Symbol.for("nodejs.util.inspect.custom")](s,l){return a(this,{...l,depth:0,customInspect:!1})}},buffer_list}var state,hasRequiredState;function requireState(){if(hasRequiredState)return state;hasRequiredState=1;const{MathFloor:e,NumberIsInteger:t}=requirePrimordials(),{validateInteger:i}=requireValidators(),{ERR_INVALID_ARG_VALUE:r}=requireErrors().codes;let n=16*1024,a=16;function o(d,m,f){return d.highWaterMark!=null?d.highWaterMark:m?d[f]:null}function s(d){return d?a:n}function l(d,m){i(m,"value",0),d?a=m:n=m}function c(d,m,f,u){const b=o(m,u,f);if(b!=null){if(!t(b)||b<0){const y=u?`options.${f}`:"options.highWaterMark";throw new r(y,b)}return e(b)}return s(d.objectMode)}return state={getHighWaterMark:c,getDefaultHighWaterMark:s,setDefaultHighWaterMark:l},state}var string_decoder={},safeBuffer={exports:{}};var hasRequiredSafeBuffer;function requireSafeBuffer(){return hasRequiredSafeBuffer||(hasRequiredSafeBuffer=1,(function(e,t){var i=requireBuffer(),r=i.Buffer;function n(o,s){for(var l in o)s[l]=o[l]}r.from&&r.alloc&&r.allocUnsafe&&r.allocUnsafeSlow?e.exports=i:(n(i,t),t.Buffer=a);function a(o,s,l){return r(o,s,l)}a.prototype=Object.create(r.prototype),n(r,a),a.from=function(o,s,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return r(o,s,l)},a.alloc=function(o,s,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=r(o);return s!==void 0?typeof l=="string"?c.fill(s,l):c.fill(s):c.fill(0),c},a.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return r(o)},a.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i.SlowBuffer(o)}})(safeBuffer,safeBuffer.exports)),safeBuffer.exports}var hasRequiredString_decoder;function requireString_decoder(){if(hasRequiredString_decoder)return string_decoder;hasRequiredString_decoder=1;var e=requireSafeBuffer().Buffer,t=e.isEncoding||function(T){switch(T=""+T,T&&T.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function i(T){if(!T)return"utf8";for(var E;;)switch(T){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return T;default:if(E)return;T=(""+T).toLowerCase(),E=!0}}function r(T){var E=i(T);if(typeof E!="string"&&(e.isEncoding===t||!t(T)))throw new Error("Unknown encoding: "+T);return E||T}string_decoder.StringDecoder=n;function n(T){this.encoding=r(T);var E;switch(this.encoding){case"utf16le":this.text=m,this.end=f,E=4;break;case"utf8":this.fillLast=l,E=4;break;case"base64":this.text=u,this.end=b,E=3;break;default:this.write=y,this.end=w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=e.allocUnsafe(E)}n.prototype.write=function(T){if(T.length===0)return"";var E,R;if(this.lastNeed){if(E=this.fillLast(T),E===void 0)return"";R=this.lastNeed,this.lastNeed=0}else R=0;return R<T.length?E?E+this.text(T,R):this.text(T,R):E||""},n.prototype.end=d,n.prototype.text=c,n.prototype.fillLast=function(T){if(this.lastNeed<=T.length)return T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,this.lastTotal-this.lastNeed,0,T.length),this.lastNeed-=T.length};function a(T){return T<=127?0:T>>5===6?2:T>>4===14?3:T>>3===30?4:T>>6===2?-1:-2}function o(T,E,R){var C=E.length-1;if(C<R)return 0;var B=a(E[C]);return B>=0?(B>0&&(T.lastNeed=B-1),B):--C<R||B===-2?0:(B=a(E[C]),B>=0?(B>0&&(T.lastNeed=B-2),B):--C<R||B===-2?0:(B=a(E[C]),B>=0?(B>0&&(B===2?B=0:T.lastNeed=B-3),B):0))}function s(T,E,R){if((E[0]&192)!==128)return T.lastNeed=0,"";if(T.lastNeed>1&&E.length>1){if((E[1]&192)!==128)return T.lastNeed=1,"";if(T.lastNeed>2&&E.length>2&&(E[2]&192)!==128)return T.lastNeed=2,""}}function l(T){var E=this.lastTotal-this.lastNeed,R=s(this,T);if(R!==void 0)return R;if(this.lastNeed<=T.length)return T.copy(this.lastChar,E,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);T.copy(this.lastChar,E,0,T.length),this.lastNeed-=T.length}function c(T,E){var R=o(this,T,E);if(!this.lastNeed)return T.toString("utf8",E);this.lastTotal=R;var C=T.length-(R-this.lastNeed);return T.copy(this.lastChar,0,C),T.toString("utf8",E,C)}function d(T){var E=T&&T.length?this.write(T):"";return this.lastNeed?E+"":E}function m(T,E){if((T.length-E)%2===0){var R=T.toString("utf16le",E);if(R){var C=R.charCodeAt(R.length-1);if(C>=55296&&C<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1],R.slice(0,-1)}return R}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=T[T.length-1],T.toString("utf16le",E,T.length-1)}function f(T){var E=T&&T.length?this.write(T):"";if(this.lastNeed){var R=this.lastTotal-this.lastNeed;return E+this.lastChar.toString("utf16le",0,R)}return E}function u(T,E){var R=(T.length-E)%3;return R===0?T.toString("base64",E):(this.lastNeed=3-R,this.lastTotal=3,R===1?this.lastChar[0]=T[T.length-1]:(this.lastChar[0]=T[T.length-2],this.lastChar[1]=T[T.length-1]),T.toString("base64",E,T.length-R))}function b(T){var E=T&&T.length?this.write(T):"";return this.lastNeed?E+this.lastChar.toString("base64",0,3-this.lastNeed):E}function y(T){return T.toString(this.encoding)}function w(T){return T&&T.length?this.write(T):""}return string_decoder}var from_1,hasRequiredFrom;function requireFrom(){if(hasRequiredFrom)return from_1;hasRequiredFrom=1;const e=requireBrowser$1(),{PromisePrototypeThen:t,SymbolAsyncIterator:i,SymbolIterator:r}=requirePrimordials(),{Buffer:n}=requireBuffer(),{ERR_INVALID_ARG_TYPE:a,ERR_STREAM_NULL_VALUES:o}=requireErrors().codes;function s(l,c,d){let m;if(typeof c=="string"||c instanceof n)return new l({objectMode:!0,...d,read(){this.push(c),this.push(null)}});let f;if(c&&c[i])f=!0,m=c[i]();else if(c&&c[r])f=!1,m=c[r]();else throw new a("iterable",["Iterable"],c);const u=new l({objectMode:!0,highWaterMark:1,...d});let b=!1;u._read=function(){b||(b=!0,w())},u._destroy=function(T,E){t(y(T),()=>e.nextTick(E,T),R=>e.nextTick(E,R||T))};async function y(T){const E=T!=null,R=typeof m.throw=="function";if(E&&R){const{value:C,done:B}=await m.throw(T);if(await C,B)return}if(typeof m.return=="function"){const{value:C}=await m.return();await C}}async function w(){for(;;){try{const{value:T,done:E}=f?await m.next():m.next();if(E)u.push(null);else{const R=T&&typeof T.then=="function"?await T:T;if(R===null)throw b=!1,new o;if(u.push(R))continue;b=!1}}catch(T){u.destroy(T)}break}}return u}return from_1=s,from_1}var readable,hasRequiredReadable;function requireReadable(){if(hasRequiredReadable)return readable;hasRequiredReadable=1;const e=requireBrowser$1(),{ArrayPrototypeIndexOf:t,NumberIsInteger:i,NumberIsNaN:r,NumberParseInt:n,ObjectDefineProperties:a,ObjectKeys:o,ObjectSetPrototypeOf:s,Promise:l,SafeSet:c,SymbolAsyncDispose:d,SymbolAsyncIterator:m,Symbol:f}=requirePrimordials();readable=W,W.ReadableState=j;const{EventEmitter:u}=requireEvents(),{Stream:b,prependListener:y}=requireLegacy(),{Buffer:w}=requireBuffer(),{addAbortSignal:T}=requireAddAbortSignal(),E=requireEndOfStream();let R=requireUtil().debuglog("stream",A=>{R=A});const C=requireBuffer_list(),B=requireDestroy(),{getHighWaterMark:D,getDefaultHighWaterMark:_}=requireState(),{aggregateTwoErrors:x,codes:{ERR_INVALID_ARG_TYPE:Z,ERR_METHOD_NOT_IMPLEMENTED:L,ERR_OUT_OF_RANGE:z,ERR_STREAM_PUSH_AFTER_EOF:K,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:G},AbortError:ae}=requireErrors(),{validateObject:de}=requireValidators(),ce=f("kPaused"),{StringDecoder:he}=requireString_decoder(),Y=requireFrom();s(W.prototype,b.prototype),s(W,b);const fe=()=>{},{errorOrDestroy:N}=B,J=1,ne=2,ee=4,me=8,be=16,_e=32,ye=64,Q=128,re=256,ue=512,Te=1024,P=2048,S=4096,I=8192,O=16384,V=32768,H=65536,$=1<<17,M=1<<18;function U(A){return{enumerable:!1,get(){return(this.state&A)!==0},set(F){F?this.state|=A:this.state&=~A}}}a(j.prototype,{objectMode:U(J),ended:U(ne),endEmitted:U(ee),reading:U(me),constructed:U(be),sync:U(_e),needReadable:U(ye),emittedReadable:U(Q),readableListening:U(re),resumeScheduled:U(ue),errorEmitted:U(Te),emitClose:U(P),autoDestroy:U(S),destroyed:U(I),closed:U(O),closeEmitted:U(V),multiAwaitDrain:U(H),readingMore:U($),dataEmitted:U(M)});function j(A,F,oe){typeof oe!="boolean"&&(oe=F instanceof requireDuplex()),this.state=P|S|be|_e,A&&A.objectMode&&(this.state|=J),oe&&A&&A.readableObjectMode&&(this.state|=J),this.highWaterMark=A?D(this,A,"readableHighWaterMark",oe):_(!1),this.buffer=new C,this.length=0,this.pipes=[],this.flowing=null,this[ce]=null,A&&A.emitClose===!1&&(this.state&=~P),A&&A.autoDestroy===!1&&(this.state&=~S),this.errored=null,this.defaultEncoding=A&&A.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,A&&A.encoding&&(this.decoder=new he(A.encoding),this.encoding=A.encoding)}function W(A){if(!(this instanceof W))return new W(A);const F=this instanceof requireDuplex();this._readableState=new j(A,this,F),A&&(typeof A.read=="function"&&(this._read=A.read),typeof A.destroy=="function"&&(this._destroy=A.destroy),typeof A.construct=="function"&&(this._construct=A.construct),A.signal&&!F&&T(A.signal,this)),b.call(this,A),B.construct(this,()=>{this._readableState.needReadable&&q(this,this._readableState)})}W.prototype.destroy=B.destroy,W.prototype._undestroy=B.undestroy,W.prototype._destroy=function(A,F){F(A)},W.prototype[u.captureRejectionSymbol]=function(A){this.destroy(A)},W.prototype[d]=function(){let A;return this.destroyed||(A=this.readableEnded?null:new ae,this.destroy(A)),new l((F,oe)=>E(this,le=>le&&le!==A?oe(le):F(null)))},W.prototype.push=function(A,F){return ie(this,A,F,!1)},W.prototype.unshift=function(A,F){return ie(this,A,F,!0)};function ie(A,F,oe,le){R("readableAddChunk",F);const ge=A._readableState;let ke;if((ge.state&J)===0&&(typeof F=="string"?(oe=oe||ge.defaultEncoding,ge.encoding!==oe&&(le&&ge.encoding?F=w.from(F,oe).toString(ge.encoding):(F=w.from(F,oe),oe=""))):F instanceof w?oe="":b._isUint8Array(F)?(F=b._uint8ArrayToBuffer(F),oe=""):F!=null&&(ke=new Z("chunk",["string","Buffer","Uint8Array"],F))),ke)N(A,ke);else if(F===null)ge.state&=~me,h(A,ge);else if((ge.state&J)!==0||F&&F.length>0)if(le)if((ge.state&ee)!==0)N(A,new G);else{if(ge.destroyed||ge.errored)return!1;pe(A,ge,F,!0)}else if(ge.ended)N(A,new K);else{if(ge.destroyed||ge.errored)return!1;ge.state&=~me,ge.decoder&&!oe?(F=ge.decoder.write(F),ge.objectMode||F.length!==0?pe(A,ge,F,!1):q(A,ge)):pe(A,ge,F,!1)}else le||(ge.state&=~me,q(A,ge));return!ge.ended&&(ge.length<ge.highWaterMark||ge.length===0)}function pe(A,F,oe,le){F.flowing&&F.length===0&&!F.sync&&A.listenerCount("data")>0?((F.state&H)!==0?F.awaitDrainWriters.clear():F.awaitDrainWriters=null,F.dataEmitted=!0,A.emit("data",oe)):(F.length+=F.objectMode?1:oe.length,le?F.buffer.unshift(oe):F.buffer.push(oe),(F.state&ye)!==0&&g(A)),q(A,F)}W.prototype.isPaused=function(){const A=this._readableState;return A[ce]===!0||A.flowing===!1},W.prototype.setEncoding=function(A){const F=new he(A);this._readableState.decoder=F,this._readableState.encoding=this._readableState.decoder.encoding;const oe=this._readableState.buffer;let le="";for(const ge of oe)le+=F.write(ge);return oe.clear(),le!==""&&oe.push(le),this._readableState.length=le.length,this};const se=1073741824;function we(A){if(A>se)throw new z("size","<= 1GiB",A);return A--,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A++,A}function v(A,F){return A<=0||F.length===0&&F.ended?0:(F.state&J)!==0?1:r(A)?F.flowing&&F.length?F.buffer.first().length:F.length:A<=F.length?A:F.ended?F.length:0}W.prototype.read=function(A){R("read",A),A===void 0?A=NaN:i(A)||(A=n(A,10));const F=this._readableState,oe=A;if(A>F.highWaterMark&&(F.highWaterMark=we(A)),A!==0&&(F.state&=~Q),A===0&&F.needReadable&&((F.highWaterMark!==0?F.length>=F.highWaterMark:F.length>0)||F.ended))return R("read: emitReadable",F.length,F.ended),F.length===0&&F.ended?qe(this):g(this),null;if(A=v(A,F),A===0&&F.ended)return F.length===0&&qe(this),null;let le=(F.state&ye)!==0;if(R("need readable",le),(F.length===0||F.length-A<F.highWaterMark)&&(le=!0,R("length less than watermark",le)),F.ended||F.reading||F.destroyed||F.errored||!F.constructed)le=!1,R("reading, ended or constructing",le);else if(le){R("do read"),F.state|=me|_e,F.length===0&&(F.state|=ye);try{this._read(F.highWaterMark)}catch(ke){N(this,ke)}F.state&=~_e,F.reading||(A=v(oe,F))}let ge;return A>0?ge=Xe(A,F):ge=null,ge===null?(F.needReadable=F.length<=F.highWaterMark,A=0):(F.length-=A,F.multiAwaitDrain?F.awaitDrainWriters.clear():F.awaitDrainWriters=null),F.length===0&&(F.ended||(F.needReadable=!0),oe!==A&&F.ended&&qe(this)),ge!==null&&!F.errorEmitted&&!F.closeEmitted&&(F.dataEmitted=!0,this.emit("data",ge)),ge};function h(A,F){if(R("onEofChunk"),!F.ended){if(F.decoder){const oe=F.decoder.end();oe&&oe.length&&(F.buffer.push(oe),F.length+=F.objectMode?1:oe.length)}F.ended=!0,F.sync?g(A):(F.needReadable=!1,F.emittedReadable=!0,k(A))}}function g(A){const F=A._readableState;R("emitReadable",F.needReadable,F.emittedReadable),F.needReadable=!1,F.emittedReadable||(R("emitReadable",F.flowing),F.emittedReadable=!0,e.nextTick(k,A))}function k(A){const F=A._readableState;R("emitReadable_",F.destroyed,F.length,F.ended),!F.destroyed&&!F.errored&&(F.length||F.ended)&&(A.emit("readable"),F.emittedReadable=!1),F.needReadable=!F.flowing&&!F.ended&&F.length<=F.highWaterMark,xe(A)}function q(A,F){!F.readingMore&&F.constructed&&(F.readingMore=!0,e.nextTick(X,A,F))}function X(A,F){for(;!F.reading&&!F.ended&&(F.length<F.highWaterMark||F.flowing&&F.length===0);){const oe=F.length;if(R("maybeReadMore read 0"),A.read(0),oe===F.length)break}F.readingMore=!1}W.prototype._read=function(A){throw new L("_read()")},W.prototype.pipe=function(A,F){const oe=this,le=this._readableState;le.pipes.length===1&&(le.multiAwaitDrain||(le.multiAwaitDrain=!0,le.awaitDrainWriters=new c(le.awaitDrainWriters?[le.awaitDrainWriters]:[]))),le.pipes.push(A),R("pipe count=%d opts=%j",le.pipes.length,F);const ke=(!F||F.end!==!1)&&A!==e.stdout&&A!==e.stderr?Ke:Fe;le.endEmitted?e.nextTick(ke):oe.once("end",ke),A.on("unpipe",Re);function Re(De,Ae){R("onunpipe"),De===oe&&Ae&&Ae.hasUnpiped===!1&&(Ae.hasUnpiped=!0,ot())}function Ke(){R("onend"),A.end()}let Be,Je=!1;function ot(){R("cleanup"),A.removeListener("close",ze),A.removeListener("finish",je),Be&&A.removeListener("drain",Be),A.removeListener("error",Ue),A.removeListener("unpipe",Re),oe.removeListener("end",Ke),oe.removeListener("end",Fe),oe.removeListener("data",Qe),Je=!0,Be&&le.awaitDrainWriters&&(!A._writableState||A._writableState.needDrain)&&Be()}function Ze(){Je||(le.pipes.length===1&&le.pipes[0]===A?(R("false write response, pause",0),le.awaitDrainWriters=A,le.multiAwaitDrain=!1):le.pipes.length>1&&le.pipes.includes(A)&&(R("false write response, pause",le.awaitDrainWriters.size),le.awaitDrainWriters.add(A)),oe.pause()),Be||(Be=te(oe,A),A.on("drain",Be))}oe.on("data",Qe);function Qe(De){R("ondata");const Ae=A.write(De);R("dest.write",Ae),Ae===!1&&Ze()}function Ue(De){if(R("onerror",De),Fe(),A.removeListener("error",Ue),A.listenerCount("error")===0){const Ae=A._writableState||A._readableState;Ae&&!Ae.errorEmitted?N(A,De):A.emit("error",De)}}y(A,"error",Ue);function ze(){A.removeListener("finish",je),Fe()}A.once("close",ze);function je(){R("onfinish"),A.removeListener("close",ze),Fe()}A.once("finish",je);function Fe(){R("unpipe"),oe.unpipe(A)}return A.emit("pipe",oe),A.writableNeedDrain===!0?Ze():le.flowing||(R("pipe resume"),oe.resume()),A};function te(A,F){return function(){const le=A._readableState;le.awaitDrainWriters===F?(R("pipeOnDrain",1),le.awaitDrainWriters=null):le.multiAwaitDrain&&(R("pipeOnDrain",le.awaitDrainWriters.size),le.awaitDrainWriters.delete(F)),(!le.awaitDrainWriters||le.awaitDrainWriters.size===0)&&A.listenerCount("data")&&A.resume()}}W.prototype.unpipe=function(A){const F=this._readableState,oe={hasUnpiped:!1};if(F.pipes.length===0)return this;if(!A){const ge=F.pipes;F.pipes=[],this.pause();for(let ke=0;ke<ge.length;ke++)ge[ke].emit("unpipe",this,{hasUnpiped:!1});return this}const le=t(F.pipes,A);return le===-1?this:(F.pipes.splice(le,1),F.pipes.length===0&&this.pause(),A.emit("unpipe",this,oe),this)},W.prototype.on=function(A,F){const oe=b.prototype.on.call(this,A,F),le=this._readableState;return A==="data"?(le.readableListening=this.listenerCount("readable")>0,le.flowing!==!1&&this.resume()):A==="readable"&&!le.endEmitted&&!le.readableListening&&(le.readableListening=le.needReadable=!0,le.flowing=!1,le.emittedReadable=!1,R("on readable",le.length,le.reading),le.length?g(this):le.reading||e.nextTick(Se,this)),oe},W.prototype.addListener=W.prototype.on,W.prototype.removeListener=function(A,F){const oe=b.prototype.removeListener.call(this,A,F);return A==="readable"&&e.nextTick(ve,this),oe},W.prototype.off=W.prototype.removeListener,W.prototype.removeAllListeners=function(A){const F=b.prototype.removeAllListeners.apply(this,arguments);return(A==="readable"||A===void 0)&&e.nextTick(ve,this),F};function ve(A){const F=A._readableState;F.readableListening=A.listenerCount("readable")>0,F.resumeScheduled&&F[ce]===!1?F.flowing=!0:A.listenerCount("data")>0?A.resume():F.readableListening||(F.flowing=null)}function Se(A){R("readable nexttick read 0"),A.read(0)}W.prototype.resume=function(){const A=this._readableState;return A.flowing||(R("resume"),A.flowing=!A.readableListening,Ee(this,A)),A[ce]=!1,this};function Ee(A,F){F.resumeScheduled||(F.resumeScheduled=!0,e.nextTick(Ie,A,F))}function Ie(A,F){R("resume",F.reading),F.reading||A.read(0),F.resumeScheduled=!1,A.emit("resume"),xe(A),F.flowing&&!F.reading&&A.read(0)}W.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[ce]=!0,this};function xe(A){const F=A._readableState;for(R("flow",F.flowing);F.flowing&&A.read()!==null;);}W.prototype.wrap=function(A){let F=!1;A.on("data",le=>{!this.push(le)&&A.pause&&(F=!0,A.pause())}),A.on("end",()=>{this.push(null)}),A.on("error",le=>{N(this,le)}),A.on("close",()=>{this.destroy()}),A.on("destroy",()=>{this.destroy()}),this._read=()=>{F&&A.resume&&(F=!1,A.resume())};const oe=o(A);for(let le=1;le<oe.length;le++){const ge=oe[le];this[ge]===void 0&&typeof A[ge]=="function"&&(this[ge]=A[ge].bind(A))}return this},W.prototype[m]=function(){return $e(this)},W.prototype.iterator=function(A){return A!==void 0&&de(A,"options"),$e(this,A)};function $e(A,F){typeof A.read!="function"&&(A=W.wrap(A,{objectMode:!0}));const oe=nt(A,F);return oe.stream=A,oe}async function*nt(A,F){let oe=fe;function le(Re){this===A?(oe(),oe=fe):oe=Re}A.on("readable",le);let ge;const ke=E(A,{writable:!1},Re=>{ge=Re?x(ge,Re):null,oe(),oe=fe});try{for(;;){const Re=A.destroyed?null:A.read();if(Re!==null)yield Re;else{if(ge)throw ge;if(ge===null)return;await new l(le)}}}catch(Re){throw ge=x(ge,Re),ge}finally{(ge||F?.destroyOnReturn!==!1)&&(ge===void 0||A._readableState.autoDestroy)?B.destroyer(A,null):(A.off("readable",le),ke())}}a(W.prototype,{readable:{__proto__:null,get(){const A=this._readableState;return!!A&&A.readable!==!1&&!A.destroyed&&!A.errorEmitted&&!A.endEmitted},set(A){this._readableState&&(this._readableState.readable=!!A)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(A){this._readableState&&(this._readableState.flowing=A)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(A){this._readableState&&(this._readableState.destroyed=A)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),a(j.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[ce]!==!1},set(A){this[ce]=!!A}}}),W._fromList=Xe;function Xe(A,F){if(F.length===0)return null;let oe;return F.objectMode?oe=F.buffer.shift():!A||A>=F.length?(F.decoder?oe=F.buffer.join(""):F.buffer.length===1?oe=F.buffer.first():oe=F.buffer.concat(F.length),F.buffer.clear()):oe=F.buffer.consume(A,F.decoder),oe}function qe(A){const F=A._readableState;R("endReadable",F.endEmitted),F.endEmitted||(F.ended=!0,e.nextTick(at,F,A))}function at(A,F){if(R("endReadableNT",A.endEmitted,A.length),!A.errored&&!A.closeEmitted&&!A.endEmitted&&A.length===0){if(A.endEmitted=!0,F.emit("end"),F.writable&&F.allowHalfOpen===!1)e.nextTick(st,F);else if(A.autoDestroy){const oe=F._writableState;(!oe||oe.autoDestroy&&(oe.finished||oe.writable===!1))&&F.destroy()}}}function st(A){A.writable&&!A.writableEnded&&!A.destroyed&&A.end()}W.from=function(A,F){return Y(W,A,F)};let Le;function Ye(){return Le===void 0&&(Le={}),Le}return W.fromWeb=function(A,F){return Ye().newStreamReadableFromReadableStream(A,F)},W.toWeb=function(A,F){return Ye().newReadableStreamFromStreamReadable(A,F)},W.wrap=function(A,F){var oe,le;return new W({objectMode:(oe=(le=A.readableObjectMode)!==null&&le!==void 0?le:A.objectMode)!==null&&oe!==void 0?oe:!0,...F,destroy(ge,ke){B.destroyer(A,ge),ke(ge)}}).wrap(A)},readable}var writable,hasRequiredWritable;function requireWritable(){if(hasRequiredWritable)return writable;hasRequiredWritable=1;const e=requireBrowser$1(),{ArrayPrototypeSlice:t,Error:i,FunctionPrototypeSymbolHasInstance:r,ObjectDefineProperty:n,ObjectDefineProperties:a,ObjectSetPrototypeOf:o,StringPrototypeToLowerCase:s,Symbol:l,SymbolHasInstance:c}=requirePrimordials();writable=de,de.WritableState=G;const{EventEmitter:d}=requireEvents(),m=requireLegacy().Stream,{Buffer:f}=requireBuffer(),u=requireDestroy(),{addAbortSignal:b}=requireAddAbortSignal(),{getHighWaterMark:y,getDefaultHighWaterMark:w}=requireState(),{ERR_INVALID_ARG_TYPE:T,ERR_METHOD_NOT_IMPLEMENTED:E,ERR_MULTIPLE_CALLBACK:R,ERR_STREAM_CANNOT_PIPE:C,ERR_STREAM_DESTROYED:B,ERR_STREAM_ALREADY_FINISHED:D,ERR_STREAM_NULL_VALUES:_,ERR_STREAM_WRITE_AFTER_END:x,ERR_UNKNOWN_ENCODING:Z}=requireErrors().codes,{errorOrDestroy:L}=u;o(de.prototype,m.prototype),o(de,m);function z(){}const K=l("kOnFinished");function G(S,I,O){typeof O!="boolean"&&(O=I instanceof requireDuplex()),this.objectMode=!!(S&&S.objectMode),O&&(this.objectMode=this.objectMode||!!(S&&S.writableObjectMode)),this.highWaterMark=S?y(this,S,"writableHighWaterMark",O):w(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const V=!!(S&&S.decodeStrings===!1);this.decodeStrings=!V,this.defaultEncoding=S&&S.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=N.bind(void 0,I),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,ae(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!S||S.emitClose!==!1,this.autoDestroy=!S||S.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[K]=[]}function ae(S){S.buffered=[],S.bufferedIndex=0,S.allBuffers=!0,S.allNoop=!0}G.prototype.getBuffer=function(){return t(this.buffered,this.bufferedIndex)},n(G.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function de(S){const I=this instanceof requireDuplex();if(!I&&!r(de,this))return new de(S);this._writableState=new G(S,this,I),S&&(typeof S.write=="function"&&(this._write=S.write),typeof S.writev=="function"&&(this._writev=S.writev),typeof S.destroy=="function"&&(this._destroy=S.destroy),typeof S.final=="function"&&(this._final=S.final),typeof S.construct=="function"&&(this._construct=S.construct),S.signal&&b(S.signal,this)),m.call(this,S),u.construct(this,()=>{const O=this._writableState;O.writing||me(this,O),Q(this,O)})}n(de,c,{__proto__:null,value:function(S){return r(this,S)?!0:this!==de?!1:S&&S._writableState instanceof G}}),de.prototype.pipe=function(){L(this,new C)};function ce(S,I,O,V){const H=S._writableState;if(typeof O=="function")V=O,O=H.defaultEncoding;else{if(!O)O=H.defaultEncoding;else if(O!=="buffer"&&!f.isEncoding(O))throw new Z(O);typeof V!="function"&&(V=z)}if(I===null)throw new _;if(!H.objectMode)if(typeof I=="string")H.decodeStrings!==!1&&(I=f.from(I,O),O="buffer");else if(I instanceof f)O="buffer";else if(m._isUint8Array(I))I=m._uint8ArrayToBuffer(I),O="buffer";else throw new T("chunk",["string","Buffer","Uint8Array"],I);let $;return H.ending?$=new x:H.destroyed&&($=new B("write")),$?(e.nextTick(V,$),L(S,$,!0),$):(H.pendingcb++,he(S,H,I,O,V))}de.prototype.write=function(S,I,O){return ce(this,S,I,O)===!0},de.prototype.cork=function(){this._writableState.corked++},de.prototype.uncork=function(){const S=this._writableState;S.corked&&(S.corked--,S.writing||me(this,S))},de.prototype.setDefaultEncoding=function(I){if(typeof I=="string"&&(I=s(I)),!f.isEncoding(I))throw new Z(I);return this._writableState.defaultEncoding=I,this};function he(S,I,O,V,H){const $=I.objectMode?1:O.length;I.length+=$;const M=I.length<I.highWaterMark;return M||(I.needDrain=!0),I.writing||I.corked||I.errored||!I.constructed?(I.buffered.push({chunk:O,encoding:V,callback:H}),I.allBuffers&&V!=="buffer"&&(I.allBuffers=!1),I.allNoop&&H!==z&&(I.allNoop=!1)):(I.writelen=$,I.writecb=H,I.writing=!0,I.sync=!0,S._write(O,V,I.onwrite),I.sync=!1),M&&!I.errored&&!I.destroyed}function Y(S,I,O,V,H,$,M){I.writelen=V,I.writecb=M,I.writing=!0,I.sync=!0,I.destroyed?I.onwrite(new B("write")):O?S._writev(H,I.onwrite):S._write(H,$,I.onwrite),I.sync=!1}function fe(S,I,O,V){--I.pendingcb,V(O),ee(I),L(S,O)}function N(S,I){const O=S._writableState,V=O.sync,H=O.writecb;if(typeof H!="function"){L(S,new R);return}O.writing=!1,O.writecb=null,O.length-=O.writelen,O.writelen=0,I?(I.stack,O.errored||(O.errored=I),S._readableState&&!S._readableState.errored&&(S._readableState.errored=I),V?e.nextTick(fe,S,O,I,H):fe(S,O,I,H)):(O.buffered.length>O.bufferedIndex&&me(S,O),V?O.afterWriteTickInfo!==null&&O.afterWriteTickInfo.cb===H?O.afterWriteTickInfo.count++:(O.afterWriteTickInfo={count:1,cb:H,stream:S,state:O},e.nextTick(J,O.afterWriteTickInfo)):ne(S,O,1,H))}function J({stream:S,state:I,count:O,cb:V}){return I.afterWriteTickInfo=null,ne(S,I,O,V)}function ne(S,I,O,V){for(!I.ending&&!S.destroyed&&I.length===0&&I.needDrain&&(I.needDrain=!1,S.emit("drain"));O-- >0;)I.pendingcb--,V();I.destroyed&&ee(I),Q(S,I)}function ee(S){if(S.writing)return;for(let H=S.bufferedIndex;H<S.buffered.length;++H){var I;const{chunk:$,callback:M}=S.buffered[H],U=S.objectMode?1:$.length;S.length-=U,M((I=S.errored)!==null&&I!==void 0?I:new B("write"))}const O=S[K].splice(0);for(let H=0;H<O.length;H++){var V;O[H]((V=S.errored)!==null&&V!==void 0?V:new B("end"))}ae(S)}function me(S,I){if(I.corked||I.bufferProcessing||I.destroyed||!I.constructed)return;const{buffered:O,bufferedIndex:V,objectMode:H}=I,$=O.length-V;if(!$)return;let M=V;if(I.bufferProcessing=!0,$>1&&S._writev){I.pendingcb-=$-1;const U=I.allNoop?z:W=>{for(let ie=M;ie<O.length;++ie)O[ie].callback(W)},j=I.allNoop&&M===0?O:t(O,M);j.allBuffers=I.allBuffers,Y(S,I,!0,I.length,j,"",U),ae(I)}else{do{const{chunk:U,encoding:j,callback:W}=O[M];O[M++]=null;const ie=H?1:U.length;Y(S,I,!1,ie,U,j,W)}while(M<O.length&&!I.writing);M===O.length?ae(I):M>256?(O.splice(0,M),I.bufferedIndex=0):I.bufferedIndex=M}I.bufferProcessing=!1}de.prototype._write=function(S,I,O){if(this._writev)this._writev([{chunk:S,encoding:I}],O);else throw new E("_write()")},de.prototype._writev=null,de.prototype.end=function(S,I,O){const V=this._writableState;typeof S=="function"?(O=S,S=null,I=null):typeof I=="function"&&(O=I,I=null);let H;if(S!=null){const $=ce(this,S,I);$ instanceof i&&(H=$)}return V.corked&&(V.corked=1,this.uncork()),H||(!V.errored&&!V.ending?(V.ending=!0,Q(this,V,!0),V.ended=!0):V.finished?H=new D("end"):V.destroyed&&(H=new B("end"))),typeof O=="function"&&(H||V.finished?e.nextTick(O,H):V[K].push(O)),this};function be(S){return S.ending&&!S.destroyed&&S.constructed&&S.length===0&&!S.errored&&S.buffered.length===0&&!S.finished&&!S.writing&&!S.errorEmitted&&!S.closeEmitted}function _e(S,I){let O=!1;function V(H){if(O){L(S,H??R());return}if(O=!0,I.pendingcb--,H){const $=I[K].splice(0);for(let M=0;M<$.length;M++)$[M](H);L(S,H,I.sync)}else be(I)&&(I.prefinished=!0,S.emit("prefinish"),I.pendingcb++,e.nextTick(re,S,I))}I.sync=!0,I.pendingcb++;try{S._final(V)}catch(H){V(H)}I.sync=!1}function ye(S,I){!I.prefinished&&!I.finalCalled&&(typeof S._final=="function"&&!I.destroyed?(I.finalCalled=!0,_e(S,I)):(I.prefinished=!0,S.emit("prefinish")))}function Q(S,I,O){be(I)&&(ye(S,I),I.pendingcb===0&&(O?(I.pendingcb++,e.nextTick((V,H)=>{be(H)?re(V,H):H.pendingcb--},S,I)):be(I)&&(I.pendingcb++,re(S,I))))}function re(S,I){I.pendingcb--,I.finished=!0;const O=I[K].splice(0);for(let V=0;V<O.length;V++)O[V]();if(S.emit("finish"),I.autoDestroy){const V=S._readableState;(!V||V.autoDestroy&&(V.endEmitted||V.readable===!1))&&S.destroy()}}a(de.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(S){this._writableState&&(this._writableState.destroyed=S)}},writable:{__proto__:null,get(){const S=this._writableState;return!!S&&S.writable!==!1&&!S.destroyed&&!S.errored&&!S.ending&&!S.ended},set(S){this._writableState&&(this._writableState.writable=!!S)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const S=this._writableState;return S?!S.destroyed&&!S.ending&&S.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ue=u.destroy;de.prototype.destroy=function(S,I){const O=this._writableState;return!O.destroyed&&(O.bufferedIndex<O.buffered.length||O[K].length)&&e.nextTick(ee,O),ue.call(this,S,I),this},de.prototype._undestroy=u.undestroy,de.prototype._destroy=function(S,I){I(S)},de.prototype[d.captureRejectionSymbol]=function(S){this.destroy(S)};let Te;function P(){return Te===void 0&&(Te={}),Te}return de.fromWeb=function(S,I){return P().newStreamWritableFromWritableStream(S,I)},de.toWeb=function(S){return P().newWritableStreamFromStreamWritable(S)},writable}var duplexify,hasRequiredDuplexify;function requireDuplexify(){if(hasRequiredDuplexify)return duplexify;hasRequiredDuplexify=1;const e=requireBrowser$1(),t=requireBuffer(),{isReadable:i,isWritable:r,isIterable:n,isNodeStream:a,isReadableNodeStream:o,isWritableNodeStream:s,isDuplexNodeStream:l,isReadableStream:c,isWritableStream:d}=requireUtils(),m=requireEndOfStream(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_RETURN_VALUE:b}}=requireErrors(),{destroyer:y}=requireDestroy(),w=requireDuplex(),T=requireReadable(),E=requireWritable(),{createDeferredPromise:R}=requireUtil(),C=requireFrom(),B=globalThis.Blob||t.Blob,D=typeof B<"u"?function(G){return G instanceof B}:function(G){return!1},_=globalThis.AbortController||requireBrowser$2().AbortController,{FunctionPrototypeCall:x}=requirePrimordials();class Z extends w{constructor(G){super(G),G?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),G?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}duplexify=function K(G,ae){if(l(G))return G;if(o(G))return z({readable:G});if(s(G))return z({writable:G});if(a(G))return z({writable:!1,readable:!1});if(c(G))return z({readable:T.fromWeb(G)});if(d(G))return z({writable:E.fromWeb(G)});if(typeof G=="function"){const{value:ce,write:he,final:Y,destroy:fe}=L(G);if(n(ce))return C(Z,ce,{objectMode:!0,write:he,final:Y,destroy:fe});const N=ce?.then;if(typeof N=="function"){let J;const ne=x(N,ce,ee=>{if(ee!=null)throw new b("nully","body",ee)},ee=>{y(J,ee)});return J=new Z({objectMode:!0,readable:!1,write:he,final(ee){Y(async()=>{try{await ne,e.nextTick(ee,null)}catch(me){e.nextTick(ee,me)}})},destroy:fe})}throw new b("Iterable, AsyncIterable or AsyncFunction",ae,ce)}if(D(G))return K(G.arrayBuffer());if(n(G))return C(Z,G,{objectMode:!0,writable:!1});if(c(G?.readable)&&d(G?.writable))return Z.fromWeb(G);if(typeof G?.writable=="object"||typeof G?.readable=="object"){const ce=G!=null&&G.readable?o(G?.readable)?G?.readable:K(G.readable):void 0,he=G!=null&&G.writable?s(G?.writable)?G?.writable:K(G.writable):void 0;return z({readable:ce,writable:he})}const de=G?.then;if(typeof de=="function"){let ce;return x(de,G,he=>{he!=null&&ce.push(he),ce.push(null)},he=>{y(ce,he)}),ce=new Z({objectMode:!0,writable:!1,read(){}})}throw new u(ae,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],G)};function L(K){let{promise:G,resolve:ae}=R();const de=new _,ce=de.signal;return{value:K((async function*(){for(;;){const Y=G;G=null;const{chunk:fe,done:N,cb:J}=await Y;if(e.nextTick(J),N)return;if(ce.aborted)throw new f(void 0,{cause:ce.reason});({promise:G,resolve:ae}=R()),yield fe}})(),{signal:ce}),write(Y,fe,N){const J=ae;ae=null,J({chunk:Y,done:!1,cb:N})},final(Y){const fe=ae;ae=null,fe({done:!0,cb:Y})},destroy(Y,fe){de.abort(),fe(Y)}}}function z(K){const G=K.readable&&typeof K.readable.read!="function"?T.wrap(K.readable):K.readable,ae=K.writable;let de=!!i(G),ce=!!r(ae),he,Y,fe,N,J;function ne(ee){const me=N;N=null,me?me(ee):ee&&J.destroy(ee)}return J=new Z({readableObjectMode:!!(G!=null&&G.readableObjectMode),writableObjectMode:!!(ae!=null&&ae.writableObjectMode),readable:de,writable:ce}),ce&&(m(ae,ee=>{ce=!1,ee&&y(G,ee),ne(ee)}),J._write=function(ee,me,be){ae.write(ee,me)?be():he=be},J._final=function(ee){ae.end(),Y=ee},ae.on("drain",function(){if(he){const ee=he;he=null,ee()}}),ae.on("finish",function(){if(Y){const ee=Y;Y=null,ee()}})),de&&(m(G,ee=>{de=!1,ee&&y(G,ee),ne(ee)}),G.on("readable",function(){if(fe){const ee=fe;fe=null,ee()}}),G.on("end",function(){J.push(null)}),J._read=function(){for(;;){const ee=G.read();if(ee===null){fe=J._read;return}if(!J.push(ee))return}}),J._destroy=function(ee,me){!ee&&N!==null&&(ee=new f),fe=null,he=null,Y=null,N===null?me(ee):(N=me,y(ae,ee),y(G,ee))},J}return duplexify}var duplex,hasRequiredDuplex;function requireDuplex(){if(hasRequiredDuplex)return duplex;hasRequiredDuplex=1;const{ObjectDefineProperties:e,ObjectGetOwnPropertyDescriptor:t,ObjectKeys:i,ObjectSetPrototypeOf:r}=requirePrimordials();duplex=o;const n=requireReadable(),a=requireWritable();r(o.prototype,n.prototype),r(o,n);{const d=i(a.prototype);for(let m=0;m<d.length;m++){const f=d[m];o.prototype[f]||(o.prototype[f]=a.prototype[f])}}function o(d){if(!(this instanceof o))return new o(d);n.call(this,d),a.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}e(o.prototype,{writable:{__proto__:null,...t(a.prototype,"writable")},writableHighWaterMark:{__proto__:null,...t(a.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...t(a.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...t(a.prototype,"writableBuffer")},writableLength:{__proto__:null,...t(a.prototype,"writableLength")},writableFinished:{__proto__:null,...t(a.prototype,"writableFinished")},writableCorked:{__proto__:null,...t(a.prototype,"writableCorked")},writableEnded:{__proto__:null,...t(a.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...t(a.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let s;function l(){return s===void 0&&(s={}),s}o.fromWeb=function(d,m){return l().newStreamDuplexFromReadableWritablePair(d,m)},o.toWeb=function(d){return l().newReadableWritablePairFromDuplex(d)};let c;return o.from=function(d){return c||(c=requireDuplexify()),c(d,"body")},duplex}var transform,hasRequiredTransform;function requireTransform(){if(hasRequiredTransform)return transform;hasRequiredTransform=1;const{ObjectSetPrototypeOf:e,Symbol:t}=requirePrimordials();transform=o;const{ERR_METHOD_NOT_IMPLEMENTED:i}=requireErrors().codes,r=requireDuplex(),{getHighWaterMark:n}=requireState();e(o.prototype,r.prototype),e(o,r);const a=t("kCallback");function o(c){if(!(this instanceof o))return new o(c);const d=c?n(this,c,"readableHighWaterMark",!0):null;d===0&&(c={...c,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:c.writableHighWaterMark||0}),r.call(this,c),this._readableState.sync=!1,this[a]=null,c&&(typeof c.transform=="function"&&(this._transform=c.transform),typeof c.flush=="function"&&(this._flush=c.flush)),this.on("prefinish",l)}function s(c){typeof this._flush=="function"&&!this.destroyed?this._flush((d,m)=>{if(d){c?c(d):this.destroy(d);return}m!=null&&this.push(m),this.push(null),c&&c()}):(this.push(null),c&&c())}function l(){this._final!==s&&s.call(this)}return o.prototype._final=s,o.prototype._transform=function(c,d,m){throw new i("_transform()")},o.prototype._write=function(c,d,m){const f=this._readableState,u=this._writableState,b=f.length;this._transform(c,d,(y,w)=>{if(y){m(y);return}w!=null&&this.push(w),u.ended||b===f.length||f.length<f.highWaterMark?m():this[a]=m})},o.prototype._read=function(){if(this[a]){const c=this[a];this[a]=null,c()}},transform}var passthrough,hasRequiredPassthrough;function requirePassthrough(){if(hasRequiredPassthrough)return passthrough;hasRequiredPassthrough=1;const{ObjectSetPrototypeOf:e}=requirePrimordials();passthrough=i;const t=requireTransform();e(i.prototype,t.prototype),e(i,t);function i(r){if(!(this instanceof i))return new i(r);t.call(this,r)}return i.prototype._transform=function(r,n,a){a(null,r)},passthrough}var pipeline_1,hasRequiredPipeline;function requirePipeline(){if(hasRequiredPipeline)return pipeline_1;hasRequiredPipeline=1;const e=requireBrowser$1(),{ArrayIsArray:t,Promise:i,SymbolAsyncIterator:r,SymbolDispose:n}=requirePrimordials(),a=requireEndOfStream(),{once:o}=requireUtil(),s=requireDestroy(),l=requireDuplex(),{aggregateTwoErrors:c,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:m,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:u,ERR_STREAM_PREMATURE_CLOSE:b},AbortError:y}=requireErrors(),{validateFunction:w,validateAbortSignal:T}=requireValidators(),{isIterable:E,isReadable:R,isReadableNodeStream:C,isNodeStream:B,isTransformStream:D,isWebStream:_,isReadableStream:x,isReadableFinished:Z}=requireUtils(),L=globalThis.AbortController||requireBrowser$2().AbortController;let z,K,G;function ae(ee,me,be){let _e=!1;ee.on("close",()=>{_e=!0});const ye=a(ee,{readable:me,writable:be},Q=>{_e=!Q});return{destroy:Q=>{_e||(_e=!0,s.destroyer(ee,Q||new u("pipe")))},cleanup:ye}}function de(ee){return w(ee[ee.length-1],"streams[stream.length - 1]"),ee.pop()}function ce(ee){if(E(ee))return ee;if(C(ee))return he(ee);throw new d("val",["Readable","Iterable","AsyncIterable"],ee)}async function*he(ee){K||(K=requireReadable()),yield*K.prototype[r].call(ee)}async function Y(ee,me,be,{end:_e}){let ye,Q=null;const re=P=>{if(P&&(ye=P),Q){const S=Q;Q=null,S()}},ue=()=>new i((P,S)=>{ye?S(ye):Q=()=>{ye?S(ye):P()}});me.on("drain",re);const Te=a(me,{readable:!1},re);try{me.writableNeedDrain&&await ue();for await(const P of ee)me.write(P)||await ue();_e&&(me.end(),await ue()),be()}catch(P){be(ye!==P?c(ye,P):P)}finally{Te(),me.off("drain",re)}}async function fe(ee,me,be,{end:_e}){D(me)&&(me=me.writable);const ye=me.getWriter();try{for await(const Q of ee)await ye.ready,ye.write(Q).catch(()=>{});await ye.ready,_e&&await ye.close(),be()}catch(Q){try{await ye.abort(Q),be(Q)}catch(re){be(re)}}}function N(...ee){return J(ee,o(de(ee)))}function J(ee,me,be){if(ee.length===1&&t(ee[0])&&(ee=ee[0]),ee.length<2)throw new f("streams");const _e=new L,ye=_e.signal,Q=be?.signal,re=[];T(Q,"options.signal");function ue(){H(new y)}G=G||requireUtil().addAbortListener;let Te;Q&&(Te=G(Q,ue));let P,S;const I=[];let O=0;function V(j){H(j,--O===0)}function H(j,W){var ie;if(j&&(!P||P.code==="ERR_STREAM_PREMATURE_CLOSE")&&(P=j),!(!P&&!W)){for(;I.length;)I.shift()(P);(ie=Te)===null||ie===void 0||ie[n](),_e.abort(),W&&(P||re.forEach(pe=>pe()),e.nextTick(me,P,S))}}let $;for(let j=0;j<ee.length;j++){const W=ee[j],ie=j<ee.length-1,pe=j>0,se=ie||be?.end!==!1,we=j===ee.length-1;if(B(W)){let v=function(h){h&&h.name!=="AbortError"&&h.code!=="ERR_STREAM_PREMATURE_CLOSE"&&V(h)};if(se){const{destroy:h,cleanup:g}=ae(W,ie,pe);I.push(h),R(W)&&we&&re.push(g)}W.on("error",v),R(W)&&we&&re.push(()=>{W.removeListener("error",v)})}if(j===0)if(typeof W=="function"){if($=W({signal:ye}),!E($))throw new m("Iterable, AsyncIterable or Stream","source",$)}else E(W)||C(W)||D(W)?$=W:$=l.from(W);else if(typeof W=="function"){if(D($)){var M;$=ce((M=$)===null||M===void 0?void 0:M.readable)}else $=ce($);if($=W($,{signal:ye}),ie){if(!E($,!0))throw new m("AsyncIterable",`transform[${j-1}]`,$)}else{var U;z||(z=requirePassthrough());const v=new z({objectMode:!0}),h=(U=$)===null||U===void 0?void 0:U.then;if(typeof h=="function")O++,h.call($,q=>{S=q,q!=null&&v.write(q),se&&v.end(),e.nextTick(V)},q=>{v.destroy(q),e.nextTick(V,q)});else if(E($,!0))O++,Y($,v,V,{end:se});else if(x($)||D($)){const q=$.readable||$;O++,Y(q,v,V,{end:se})}else throw new m("AsyncIterable or Promise","destination",$);$=v;const{destroy:g,cleanup:k}=ae($,!1,!0);I.push(g),we&&re.push(k)}}else if(B(W)){if(C($)){O+=2;const v=ne($,W,V,{end:se});R(W)&&we&&re.push(v)}else if(D($)||x($)){const v=$.readable||$;O++,Y(v,W,V,{end:se})}else if(E($))O++,Y($,W,V,{end:se});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],$);$=W}else if(_(W)){if(C($))O++,fe(ce($),W,V,{end:se});else if(x($)||E($))O++,fe($,W,V,{end:se});else if(D($))O++,fe($.readable,W,V,{end:se});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],$);$=W}else $=l.from(W)}return(ye!=null&&ye.aborted||Q!=null&&Q.aborted)&&e.nextTick(ue),$}function ne(ee,me,be,{end:_e}){let ye=!1;if(me.on("close",()=>{ye||be(new b)}),ee.pipe(me,{end:!1}),_e){let Q=function(){ye=!0,me.end()};Z(ee)?e.nextTick(Q):ee.once("end",Q)}else be();return a(ee,{readable:!0,writable:!1},Q=>{const re=ee._readableState;Q&&Q.code==="ERR_STREAM_PREMATURE_CLOSE"&&re&&re.ended&&!re.errored&&!re.errorEmitted?ee.once("end",be).once("error",be):be(Q)}),a(me,{readable:!1,writable:!0},be)}return pipeline_1={pipelineImpl:J,pipeline:N},pipeline_1}var compose,hasRequiredCompose;function requireCompose(){if(hasRequiredCompose)return compose;hasRequiredCompose=1;const{pipeline:e}=requirePipeline(),t=requireDuplex(),{destroyer:i}=requireDestroy(),{isNodeStream:r,isReadable:n,isWritable:a,isWebStream:o,isTransformStream:s,isWritableStream:l,isReadableStream:c}=requireUtils(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:m,ERR_MISSING_ARGS:f}}=requireErrors(),u=requireEndOfStream();return compose=function(...y){if(y.length===0)throw new f("streams");if(y.length===1)return t.from(y[0]);const w=[...y];if(typeof y[0]=="function"&&(y[0]=t.from(y[0])),typeof y[y.length-1]=="function"){const z=y.length-1;y[z]=t.from(y[z])}for(let z=0;z<y.length;++z)if(!(!r(y[z])&&!o(y[z]))){if(z<y.length-1&&!(n(y[z])||c(y[z])||s(y[z])))throw new m(`streams[${z}]`,w[z],"must be readable");if(z>0&&!(a(y[z])||l(y[z])||s(y[z])))throw new m(`streams[${z}]`,w[z],"must be writable")}let T,E,R,C,B;function D(z){const K=C;C=null,K?K(z):z?B.destroy(z):!L&&!Z&&B.destroy()}const _=y[0],x=e(y,D),Z=!!(a(_)||l(_)||s(_)),L=!!(n(x)||c(x)||s(x));if(B=new t({writableObjectMode:!!(_!=null&&_.writableObjectMode),readableObjectMode:!!(x!=null&&x.readableObjectMode),writable:Z,readable:L}),Z){if(r(_))B._write=function(K,G,ae){_.write(K,G)?ae():T=ae},B._final=function(K){_.end(),E=K},_.on("drain",function(){if(T){const K=T;T=null,K()}});else if(o(_)){const G=(s(_)?_.writable:_).getWriter();B._write=async function(ae,de,ce){try{await G.ready,G.write(ae).catch(()=>{}),ce()}catch(he){ce(he)}},B._final=async function(ae){try{await G.ready,G.close().catch(()=>{}),E=ae}catch(de){ae(de)}}}const z=s(x)?x.readable:x;u(z,()=>{if(E){const K=E;E=null,K()}})}if(L){if(r(x))x.on("readable",function(){if(R){const z=R;R=null,z()}}),x.on("end",function(){B.push(null)}),B._read=function(){for(;;){const z=x.read();if(z===null){R=B._read;return}if(!B.push(z))return}};else if(o(x)){const K=(s(x)?x.readable:x).getReader();B._read=async function(){for(;;)try{const{value:G,done:ae}=await K.read();if(!B.push(G))return;if(ae){B.push(null);return}}catch{return}}}}return B._destroy=function(z,K){!z&&C!==null&&(z=new d),R=null,T=null,E=null,C===null?K(z):(C=K,r(x)&&i(x,z))},B},compose}var hasRequiredOperators;function requireOperators(){if(hasRequiredOperators)return operators;hasRequiredOperators=1;const e=globalThis.AbortController||requireBrowser$2().AbortController,{codes:{ERR_INVALID_ARG_VALUE:t,ERR_INVALID_ARG_TYPE:i,ERR_MISSING_ARGS:r,ERR_OUT_OF_RANGE:n},AbortError:a}=requireErrors(),{validateAbortSignal:o,validateInteger:s,validateObject:l}=requireValidators(),c=requirePrimordials().Symbol("kWeak"),d=requirePrimordials().Symbol("kResistStopPropagation"),{finished:m}=requireEndOfStream(),f=requireCompose(),{addAbortSignalNoValidate:u}=requireAddAbortSignal(),{isWritable:b,isNodeStream:y}=requireUtils(),{deprecate:w}=requireUtil(),{ArrayPrototypePush:T,Boolean:E,MathFloor:R,Number:C,NumberIsNaN:B,Promise:D,PromiseReject:_,PromiseResolve:x,PromisePrototypeThen:Z,Symbol:L}=requirePrimordials(),z=L("kEmpty"),K=L("kEof");function G(Q,re){if(re!=null&&l(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),y(Q)&&!b(Q))throw new t("stream",Q,"must be writable");const ue=f(this,Q);return re!=null&&re.signal&&u(re.signal,ue),ue}function ae(Q,re){if(typeof Q!="function")throw new i("fn",["Function","AsyncFunction"],Q);re!=null&&l(re,"options"),re?.signal!=null&&o(re.signal,"options.signal");let ue=1;re?.concurrency!=null&&(ue=R(re.concurrency));let Te=ue-1;return re?.highWaterMark!=null&&(Te=R(re.highWaterMark)),s(ue,"options.concurrency",1),s(Te,"options.highWaterMark",0),Te+=ue,(async function*(){const S=requireUtil().AbortSignalAny([re?.signal].filter(E)),I=this,O=[],V={signal:S};let H,$,M=!1,U=0;function j(){M=!0,W()}function W(){U-=1,ie()}function ie(){$&&!M&&U<ue&&O.length<Te&&($(),$=null)}async function pe(){try{for await(let se of I){if(M)return;if(S.aborted)throw new a;try{if(se=Q(se,V),se===z)continue;se=x(se)}catch(we){se=_(we)}U+=1,Z(se,W,j),O.push(se),H&&(H(),H=null),!M&&(O.length>=Te||U>=ue)&&await new D(we=>{$=we})}O.push(K)}catch(se){const we=_(se);Z(we,W,j),O.push(we)}finally{M=!0,H&&(H(),H=null)}}pe();try{for(;;){for(;O.length>0;){const se=await O[0];if(se===K)return;if(S.aborted)throw new a;se!==z&&(yield se),O.shift(),ie()}await new D(se=>{H=se})}}finally{M=!0,$&&($(),$=null)}}).call(this)}function de(Q=void 0){return Q!=null&&l(Q,"options"),Q?.signal!=null&&o(Q.signal,"options.signal"),(async function*(){let ue=0;for await(const P of this){var Te;if(Q!=null&&(Te=Q.signal)!==null&&Te!==void 0&&Te.aborted)throw new a({cause:Q.signal.reason});yield[ue++,P]}}).call(this)}async function ce(Q,re=void 0){for await(const ue of N.call(this,Q,re))return!0;return!1}async function he(Q,re=void 0){if(typeof Q!="function")throw new i("fn",["Function","AsyncFunction"],Q);return!await ce.call(this,async(...ue)=>!await Q(...ue),re)}async function Y(Q,re){for await(const ue of N.call(this,Q,re))return ue}async function fe(Q,re){if(typeof Q!="function")throw new i("fn",["Function","AsyncFunction"],Q);async function ue(Te,P){return await Q(Te,P),z}for await(const Te of ae.call(this,ue,re));}function N(Q,re){if(typeof Q!="function")throw new i("fn",["Function","AsyncFunction"],Q);async function ue(Te,P){return await Q(Te,P)?Te:z}return ae.call(this,ue,re)}class J extends r{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function ne(Q,re,ue){var Te;if(typeof Q!="function")throw new i("reducer",["Function","AsyncFunction"],Q);ue!=null&&l(ue,"options"),ue?.signal!=null&&o(ue.signal,"options.signal");let P=arguments.length>1;if(ue!=null&&(Te=ue.signal)!==null&&Te!==void 0&&Te.aborted){const H=new a(void 0,{cause:ue.signal.reason});throw this.once("error",()=>{}),await m(this.destroy(H)),H}const S=new e,I=S.signal;if(ue!=null&&ue.signal){const H={once:!0,[c]:this,[d]:!0};ue.signal.addEventListener("abort",()=>S.abort(),H)}let O=!1;try{for await(const H of this){var V;if(O=!0,ue!=null&&(V=ue.signal)!==null&&V!==void 0&&V.aborted)throw new a;P?re=await Q(re,H,{signal:I}):(re=H,P=!0)}if(!O&&!P)throw new J}finally{S.abort()}return re}async function ee(Q){Q!=null&&l(Q,"options"),Q?.signal!=null&&o(Q.signal,"options.signal");const re=[];for await(const Te of this){var ue;if(Q!=null&&(ue=Q.signal)!==null&&ue!==void 0&&ue.aborted)throw new a(void 0,{cause:Q.signal.reason});T(re,Te)}return re}function me(Q,re){const ue=ae.call(this,Q,re);return(async function*(){for await(const P of ue)yield*P}).call(this)}function be(Q){if(Q=C(Q),B(Q))return 0;if(Q<0)throw new n("number",">= 0",Q);return Q}function _e(Q,re=void 0){return re!=null&&l(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),Q=be(Q),(async function*(){var Te;if(re!=null&&(Te=re.signal)!==null&&Te!==void 0&&Te.aborted)throw new a;for await(const S of this){var P;if(re!=null&&(P=re.signal)!==null&&P!==void 0&&P.aborted)throw new a;Q--<=0&&(yield S)}}).call(this)}function ye(Q,re=void 0){return re!=null&&l(re,"options"),re?.signal!=null&&o(re.signal,"options.signal"),Q=be(Q),(async function*(){var Te;if(re!=null&&(Te=re.signal)!==null&&Te!==void 0&&Te.aborted)throw new a;for await(const S of this){var P;if(re!=null&&(P=re.signal)!==null&&P!==void 0&&P.aborted)throw new a;if(Q-- >0&&(yield S),Q<=0)return}}).call(this)}return operators.streamReturningOperators={asIndexedPairs:w(de,"readable.asIndexedPairs will be removed in a future version."),drop:_e,filter:N,flatMap:me,map:ae,take:ye,compose:G},operators.promiseReturningOperators={every:he,forEach:fe,reduce:ne,toArray:ee,some:ce,find:Y},operators}var promises,hasRequiredPromises;function requirePromises(){if(hasRequiredPromises)return promises;hasRequiredPromises=1;const{ArrayPrototypePop:e,Promise:t}=requirePrimordials(),{isIterable:i,isNodeStream:r,isWebStream:n}=requireUtils(),{pipelineImpl:a}=requirePipeline(),{finished:o}=requireEndOfStream();requireStream();function s(...l){return new t((c,d)=>{let m,f;const u=l[l.length-1];if(u&&typeof u=="object"&&!r(u)&&!i(u)&&!n(u)){const b=e(l);m=b.signal,f=b.end}a(l,(b,y)=>{b?d(b):c(y)},{signal:m,end:f})})}return promises={finished:o,pipeline:s},promises}var hasRequiredStream;function requireStream(){if(hasRequiredStream)return stream.exports;hasRequiredStream=1;const{Buffer:e}=requireBuffer(),{ObjectDefineProperty:t,ObjectKeys:i,ReflectApply:r}=requirePrimordials(),{promisify:{custom:n}}=requireUtil(),{streamReturningOperators:a,promiseReturningOperators:o}=requireOperators(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:s}}=requireErrors(),l=requireCompose(),{setDefaultHighWaterMark:c,getDefaultHighWaterMark:d}=requireState(),{pipeline:m}=requirePipeline(),{destroyer:f}=requireDestroy(),u=requireEndOfStream(),b=requirePromises(),y=requireUtils(),w=stream.exports=requireLegacy().Stream;w.isDestroyed=y.isDestroyed,w.isDisturbed=y.isDisturbed,w.isErrored=y.isErrored,w.isReadable=y.isReadable,w.isWritable=y.isWritable,w.Readable=requireReadable();for(const R of i(a)){let B=function(...D){if(new.target)throw s();return w.Readable.from(r(C,this,D))};var E=B;const C=a[R];t(B,"name",{__proto__:null,value:C.name}),t(B,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,R,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}for(const R of i(o)){let B=function(..._){if(new.target)throw s();return r(C,this,_)};var E=B;const C=o[R];t(B,"name",{__proto__:null,value:C.name}),t(B,"length",{__proto__:null,value:C.length}),t(w.Readable.prototype,R,{__proto__:null,value:B,enumerable:!1,configurable:!0,writable:!0})}w.Writable=requireWritable(),w.Duplex=requireDuplex(),w.Transform=requireTransform(),w.PassThrough=requirePassthrough(),w.pipeline=m;const{addAbortSignal:T}=requireAddAbortSignal();return w.addAbortSignal=T,w.finished=u,w.destroy=f,w.compose=l,w.setDefaultHighWaterMark=c,w.getDefaultHighWaterMark=d,t(w,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return b}}),t(m,n,{__proto__:null,enumerable:!0,get(){return b.pipeline}}),t(u,n,{__proto__:null,enumerable:!0,get(){return b.finished}}),w.Stream=w,w._isUint8Array=function(C){return C instanceof Uint8Array},w._uint8ArrayToBuffer=function(C){return e.from(C.buffer,C.byteOffset,C.byteLength)},stream.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(e){const t=requireStream(),i=requirePromises(),r=t.Readable.destroy;e.exports=t.Readable,e.exports._uint8ArrayToBuffer=t._uint8ArrayToBuffer,e.exports._isUint8Array=t._isUint8Array,e.exports.isDisturbed=t.isDisturbed,e.exports.isErrored=t.isErrored,e.exports.isReadable=t.isReadable,e.exports.Readable=t.Readable,e.exports.Writable=t.Writable,e.exports.Duplex=t.Duplex,e.exports.Transform=t.Transform,e.exports.PassThrough=t.PassThrough,e.exports.addAbortSignal=t.addAbortSignal,e.exports.finished=t.finished,e.exports.destroy=t.destroy,e.exports.destroy=r,e.exports.pipeline=t.pipeline,e.exports.compose=t.compose,Object.defineProperty(t,"promises",{configurable:!0,enumerable:!0,get(){return i}}),e.exports.Stream=t.Stream,e.exports.default=e.exports})(browser$2)),browser$2.exports}var hasRequiredLib$1;function requireLib$1(){if(hasRequiredLib$1)return lib;hasRequiredLib$1=1,Object.defineProperty(lib,"__esModule",{value:!0}),lib.ReadableWebToNodeStream=void 0;const e=requireBrowser();class t extends e.Readable{constructor(r){super(),this.bytesRead=0,this.released=!1,this.reader=r.getReader()}_read(){if(this.released){this.push(null);return}this.pendingRead=this.reader.read().then(r=>{delete this.pendingRead,r.done||this.released?this.push(null):(this.bytesRead+=r.value.length,this.push(r.value))}).catch(r=>{this.destroy(r)})}async waitForReadToComplete(){this.pendingRead&&await this.pendingRead}async close(){await this.syncAndRelease()}async syncAndRelease(){this.released=!0,await this.waitForReadToComplete(),await this.reader.releaseLock()}}return lib.ReadableWebToNodeStream=t,lib}var hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.fetchFromUrl=e.parseBlob=e.parseReadableStream=e.parseNodeStream=e.selectCover=e.ratingToStars=e.orderTags=e.parseFromTokenizer=e.parseBuffer=void 0;const t=requireBrowser$3(),i=requireCore(),r=requireLib$1(),n=t("music-metadata-browser:main");var a=requireCore();Object.defineProperty(e,"parseBuffer",{enumerable:!0,get:function(){return a.parseBuffer}}),Object.defineProperty(e,"parseFromTokenizer",{enumerable:!0,get:function(){return a.parseFromTokenizer}}),Object.defineProperty(e,"orderTags",{enumerable:!0,get:function(){return a.orderTags}}),Object.defineProperty(e,"ratingToStars",{enumerable:!0,get:function(){return a.ratingToStars}}),Object.defineProperty(e,"selectCover",{enumerable:!0,get:function(){return a.selectCover}}),e.parseNodeStream=i.parseStream;async function o(d,m,f){const u=new r.ReadableWebToNodeStream(d),b=await(0,e.parseNodeStream)(u,typeof m=="string"?{mimeType:m}:m,f);return await u.close(),b}e.parseReadableStream=o;async function s(d,m){d.type,d.size,d instanceof File&&d.name;const f=d.stream?d.stream():l(d);return o(f,{mimeType:d.type,size:d.size},m)}e.parseBlob=s;function l(d){const m=new FileReader;return new ReadableStream({start(f){m.onloadend=u=>{let b=u.target.result;b instanceof ArrayBuffer&&(b=new Uint8Array(b)),f.enqueue(b),f.close()},m.onerror=u=>{f.close()},m.onabort=u=>{f.close()},m.readAsArrayBuffer(d)}})}async function c(d,m){const f=await fetch(d),u={size:parseInt(f.headers.get("Content-Length"),10),mimeType:f.headers.get("Content-Type")};if(f.ok)if(f.body){const b=await o(f.body,u,m);return n("Closing HTTP-readable-stream..."),f.body.locked||await f.body.cancel(),n("HTTP-readable-stream closed."),b}else return s(await f.blob(),m);else throw new Error(`HTTP error status=${f.status}: ${f.statusText}`)}e.fetchFromUrl=c})(lib$3)),lib$3}var libExports=requireLib(),bufferExports=requireBuffer();window.Buffer=bufferExports.Buffer;const _sfc_main$2={name:"FileUpload",data(){return{statusMessage:"click me to upload a file!"}},methods:{handleClick(){this.$refs.fileInput.click()},handleFileSelect(e){const t=e.target.files[0];t&&(console.log("Fichier selected"),this.processFile(t))},async processFile(e){console.log(" ---- DETAILS DU FICHIER ----- "),console.log("Name:",e.name),console.log("Size (MB):",(e.size/1024/1024).toFixed(2),"MB"),console.log("Type:",e.type),this.statusMessage="extracting metadata...";try{const t=await libExports.parseBlob(e);if(console.log(" ---- METADATA EXTRACTED ----- "),console.log("Title:",t.common.title||" "),console.log("Artist:",t.common.artist||" "),console.log("Album:",t.common.album||" "),console.log("Year:",t.common.year||" "),console.log("Genre:",t.common.genre?.join(", ")||" "),console.log(" ---- INFOS TECHNIQUES ----- "),console.log("Duration:",t.format.duration,"seconds"),console.log("Bitrate:",t.format.bitrate||"N/A"),console.log("Sample Rate:",t.format.sampleRate||"N/A"),console.log("Codec:",t.format.codec||"N/A"),console.log(" ---- ALBUM ART ----- "),t.common.picture&&t.common.picture.length>0){const i=t.common.picture[0];console.log("cover found"),console.log("Format:",i.format),console.log("Type:",i.type),console.log("Description:",i.description),console.log("Data size:",i.data.length,"bytes");const r=new Blob([i.data],{type:i.format}),n=URL.createObjectURL(r);console.log("url cr : ",n)}else console.log("pas de cover found");console.log(" ---- FULL METADATA ----- "),console.log(t),this.statusMessage="metadata extracted, check console"}catch(t){console.error("erreur:",t),this.statusMessage="error extracting metadata"}try{const t=await libExports.parseBlob(e);let i=null;if(t.common.picture&&t.common.picture.length>0){const n=t.common.picture[0],a=new Blob([n.data],{type:n.format});i=URL.createObjectURL(a)}const r={fileName:e.name,fileSize:(e.size/1024/1024).toFixed(2),fileType:e.type,title:t.common.title||" ",artist:t.common.artist||" ",album:t.common.album||" ",genre:t.common.genre?.join(", ")||" ",year:t.common.year||" ",duration:t.format.duration,bitrate:t.format.bitrate,sampleRate:t.format.sampleRate,codec:t.format.codec,codecProfile:t.format.codecProfile||"N/A",lossless:t.format.lossless,numberOfChannels:t.format.numberOfChannels,tool:t.format.tool||"N/A",trackGain:t.format.trackGain,albumArtUrl:i,fullMetadata:t};this.$emit("metadata-extracted",r),this.statusMessage="metadata extracted!"}catch(t){console.error("erreur:",t),this.statusMessage="error extracting metadata"}}}};function _sfc_render$1(e,t,i,r,n,a){return openBlock(),createElementBlock("div",{class:"file-container",onClick:t[1]||(t[1]=(...o)=>a.handleClick&&a.handleClick(...o))},[createBaseVNode("input",{ref:"fileInput",type:"file",accept:"audio/*",onChange:t[0]||(t[0]=(...o)=>a.handleFileSelect&&a.handleFileSelect(...o)),style:{display:"none"}},null,544),createBaseVNode("p",null,toDisplayString(n.statusMessage),1)])}const FileUpload=_export_sfc(_sfc_main$2,[["render",_sfc_render$1],["__scopeId","data-v-9f8e764d"]]),_sfc_main$1={name:"DisplayMetadata",props:{metadata:{type:Object,required:!0}},data(){return{isAnimating:!1,dropdownStates:{1:!0,2:!1,3:!0}}},watch:{metadata:{handler(e,t){this.isAnimating=!0,setTimeout(()=>{this.isAnimating=!1},300)},deep:!0,immediate:!0}},mounted(){this.isAnimating=!0},methods:{formatDuration(e){if(!e)return" ";const t=Math.floor(e/60),i=Math.floor(e%60);return`${t}m${i}s`},formatDurationSeconds(e){return e?`${Math.floor(e)}s`:" "},formatBitrate(e){return e?e>=1e3?`${Math.floor(e/1e3)}kbps`:`${e}bps`:" "},formatSampleRate(e){return e?e>=1e3?`${e/1e3}kHz`:`${e}Hz`:" "},formatTrackGain(e){return e==null?"N/A":`${e}dB`},getFileExtension(e){return e?e.split(".").pop().toLowerCase():" "},getChannelLayout(e){return e?e===1?"mono":e===2?"stereo":`${e} channels`:" "},getID3Size(){const e=this.metadata.fullMetadata?.native?.["ID3v2.2"]||this.metadata.fullMetadata?.native?.["ID3v2.3"]||this.metadata.fullMetadata?.native?.["ID3v2.4"];return e&&Array.isArray(e)?`~${e.length} tags`:"N/A"},openImageInNewTab(){window.open(this.metadata.albumArtUrl,"_blank")}}},_hoisted_1$1={class:"grid-container"},_hoisted_2$1=["src"],_hoisted_3={key:1,class:"album-art no-art"},_hoisted_4={class:"dropdown"},_hoisted_5={for:"metadata-toggle-1",class:"dropdown-label"},_hoisted_6={class:"dropdown-list"},_hoisted_7={class:"dropdown"},_hoisted_8={for:"metadata-toggle-2",class:"dropdown-label"},_hoisted_9={class:"dropdown-list"},_hoisted_10={class:"dropdown"},_hoisted_11={for:"metadata-toggle-3",class:"dropdown-label"},_hoisted_12={class:"dropdown-list"};function _sfc_render(e,t,i,r,n,a){return openBlock(),createElementBlock("div",{class:normalizeClass(["metadata-container",{"fade-in":n.isAnimating}])},[createBaseVNode("div",_hoisted_1$1,[i.metadata.albumArtUrl?(openBlock(),createElementBlock("img",{key:0,src:i.metadata.albumArtUrl,class:"album-art",alt:"Album Art",onClick:t[0]||(t[0]=(...o)=>a.openImageInNewTab&&a.openImageInNewTab(...o))},null,8,_hoisted_2$1)):(openBlock(),createElementBlock("div",_hoisted_3,"no album art found // "+toDisplayString(i.metadata.fileName),1)),createBaseVNode("div",_hoisted_4,[createBaseVNode("input",{type:"checkbox",id:"metadata-toggle-1",class:"dropdown-toggle",checked:"",onChange:t[1]||(t[1]=o=>n.dropdownStates[1]=!n.dropdownStates[1])},null,32),createBaseVNode("label",_hoisted_5,"audio infos "+toDisplayString(n.dropdownStates[1]?"v":">"),1),createBaseVNode("ul",_hoisted_6,[createBaseVNode("li",null,[t[4]||(t[4]=createTextVNode("title : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.title),1)]),createBaseVNode("li",null,[t[5]||(t[5]=createTextVNode("artists : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.artist),1)]),createBaseVNode("li",null,[t[6]||(t[6]=createTextVNode("album : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.album),1)]),createBaseVNode("li",null,[t[7]||(t[7]=createTextVNode("genre : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.genre),1)]),createBaseVNode("li",null,[t[8]||(t[8]=createTextVNode("year : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.year),1)]),createBaseVNode("li",null,[t[9]||(t[9]=createTextVNode("duration : ",-1)),createBaseVNode("strong",null,toDisplayString(a.formatDuration(i.metadata.duration)),1)]),createBaseVNode("li",null,[t[10]||(t[10]=createTextVNode("file type : ",-1)),createBaseVNode("strong",null,toDisplayString(a.getFileExtension(i.metadata.fileName)),1)]),createBaseVNode("li",null,[t[11]||(t[11]=createTextVNode("bitrate : ",-1)),createBaseVNode("strong",null,toDisplayString(a.formatBitrate(i.metadata.bitrate)),1)]),createBaseVNode("li",null,[t[12]||(t[12]=createTextVNode("sample rate : ",-1)),createBaseVNode("strong",null,toDisplayString(a.formatSampleRate(i.metadata.sampleRate)),1)]),createBaseVNode("li",null,[t[13]||(t[13]=createTextVNode("bits per sample : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.fullMetadata?.format?.bitsPerSample||"N/A"),1)]),createBaseVNode("li",null,[t[14]||(t[14]=createTextVNode("channel layout : ",-1)),createBaseVNode("strong",null,toDisplayString(a.getChannelLayout(i.metadata.numberOfChannels)),1)])])]),createBaseVNode("div",_hoisted_7,[createBaseVNode("input",{type:"checkbox",id:"metadata-toggle-2",class:"dropdown-toggle",onChange:t[2]||(t[2]=o=>n.dropdownStates[2]=!n.dropdownStates[2])},null,32),createBaseVNode("label",_hoisted_8,"technical infos "+toDisplayString(n.dropdownStates[2]?"v":">"),1),createBaseVNode("ul",_hoisted_9,[createBaseVNode("li",null,[t[15]||(t[15]=createTextVNode("codec : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.codec||"N/A"),1)]),createBaseVNode("li",null,[t[16]||(t[16]=createTextVNode("codec profile : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.codecProfile),1)]),createBaseVNode("li",null,[t[17]||(t[17]=createTextVNode("lossless : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.lossless!==void 0?i.metadata.lossless:" "),1)]),createBaseVNode("li",null,[t[18]||(t[18]=createTextVNode("encoder : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.tool||"N/A"),1)]),createBaseVNode("li",null,[t[19]||(t[19]=createTextVNode("id3 size : ",-1)),createBaseVNode("strong",null,toDisplayString(a.getID3Size()),1)]),createBaseVNode("li",null,[t[20]||(t[20]=createTextVNode("copyright flag : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.fullMetadata?.native?.["ID3v2.2"]?.copyright||"false"),1)]),createBaseVNode("li",null,[t[21]||(t[21]=createTextVNode("track gain : ",-1)),createBaseVNode("strong",null,toDisplayString(a.formatTrackGain(i.metadata.trackGain)),1)])])]),createBaseVNode("div",_hoisted_10,[createBaseVNode("input",{type:"checkbox",id:"metadata-toggle-3",class:"dropdown-toggle",checked:"",onChange:t[3]||(t[3]=o=>n.dropdownStates[3]=!n.dropdownStates[3])},null,32),createBaseVNode("label",_hoisted_11,"file infos "+toDisplayString(n.dropdownStates[3]?"v":">"),1),createBaseVNode("ul",_hoisted_12,[createBaseVNode("li",null,[t[22]||(t[22]=createTextVNode("file name : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.fileName),1)]),createBaseVNode("li",null,[t[23]||(t[23]=createTextVNode("file extension : ",-1)),createBaseVNode("strong",null,toDisplayString(a.getFileExtension(i.metadata.fileName))+" ("+toDisplayString(i.metadata.fileType)+")",1)]),createBaseVNode("li",null,[t[24]||(t[24]=createTextVNode("file size (mb) : ",-1)),createBaseVNode("strong",null,toDisplayString(i.metadata.fileSize)+"MB",1)]),createBaseVNode("li",null,[t[25]||(t[25]=createTextVNode("file duration (s) : ",-1)),createBaseVNode("strong",null,toDisplayString(a.formatDurationSeconds(i.metadata.duration)),1)])])])])],2)}const DisplayMetadata=_export_sfc(_sfc_main$1,[["render",_sfc_render],["__scopeId","data-v-b6f85b4f"]]),_hoisted_1={class:"app-wrapper"},_hoisted_2={class:"app-container"},__default__={components:{FileUpload,DisplayMetadata},data(){return{metadataInfo:null}},methods:{handleMetadata(e){this.metadataInfo=e}}},_sfc_main=Object.assign(__default__,{__name:"App",setup(e){const t=ref(!1);return(i,r)=>(openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[r[3]||(r[3]=createBaseVNode("div",{class:"header"},[createBaseVNode("h1",null,"audmdex"),createBaseVNode("h2",null,"your go-to audio metadata extractor.")],-1)),createVNode(FileUpload,{onMetadataExtracted:i.handleMetadata},null,8,["onMetadataExtracted"]),i.metadataInfo?(openBlock(),createBlock(DisplayMetadata,{key:0,metadata:i.metadataInfo},null,8,["metadata"])):createCommentVNode("",!0),createBaseVNode("footer",null,[r[2]||(r[2]=createBaseVNode("a",{class:"footerlink",href:"https://ryandufault.com",target:"_blank"},"made by ryan dufault",-1)),createBaseVNode("p",{class:"footerlink",onClick:r[0]||(r[0]=n=>t.value=!0)},"about")])]),t.value?(openBlock(),createBlock(About,{key:0,onClose:r[1]||(r[1]=n=>t.value=!1)})):createCommentVNode("",!0)]))}}),App=_export_sfc(_sfc_main,[["__scopeId","data-v-d257871f"]]);createApp(App).mount("#app");
